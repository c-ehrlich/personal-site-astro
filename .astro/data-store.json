[["Map",1,2,9,10,447,448,546,547,686,687,831,832],"meta::meta",["Map",3,4,5,6,7,8],"astro-version","5.16.8","content-config-digest","b4154c1dc97518b5","astro-config-digest","{\"root\":{},\"srcDir\":{},\"publicDir\":{},\"outDir\":{},\"cacheDir\":{},\"site\":\"https://c-ehrlich.dev/\",\"compressHTML\":true,\"base\":\"/\",\"trailingSlash\":\"ignore\",\"output\":\"static\",\"scopedStyleStrategy\":\"attribute\",\"build\":{\"format\":\"directory\",\"client\":{},\"server\":{},\"assets\":\"_astro\",\"serverEntry\":\"entry.mjs\",\"redirects\":true,\"inlineStylesheets\":\"auto\",\"concurrency\":1},\"server\":{\"open\":false,\"host\":false,\"port\":4321,\"streaming\":true,\"allowedHosts\":[]},\"redirects\":{\"/blog/golang\":\"https://www.youtube.com/watch?v=dQw4w9WgXcQ\"},\"prefetch\":true,\"image\":{\"endpoint\":{\"route\":\"/_image\"},\"service\":{\"entrypoint\":\"astro/assets/services/sharp\",\"config\":{}},\"domains\":[],\"remotePatterns\":[],\"responsiveStyles\":false},\"devToolbar\":{\"enabled\":true},\"markdown\":{\"syntaxHighlight\":{\"type\":\"shiki\",\"excludeLangs\":[\"math\"]},\"shikiConfig\":{\"langs\":[],\"langAlias\":{},\"theme\":\"dark-plus\",\"themes\":{},\"wrap\":true,\"transformers\":[]},\"remarkPlugins\":[],\"rehypePlugins\":[],\"remarkRehype\":{},\"gfm\":false,\"smartypants\":false},\"security\":{\"checkOrigin\":true,\"allowedDomains\":[]},\"env\":{\"schema\":{},\"validateSecrets\":false},\"experimental\":{\"clientPrerender\":false,\"contentIntellisense\":false,\"headingIdCompat\":false,\"preserveScriptOrder\":false,\"liveContentCollections\":false,\"csp\":false,\"staticImportMetaEnv\":false,\"chromeDevtoolsWorkspace\":false,\"failOnPrerenderConflict\":false,\"svgo\":false},\"legacy\":{\"collections\":false}}","content",["Map",11,12,36,37,60,61,81,82,107,108,129,130,151,152,177,178,208,209,232,233,254,255,282,283,307,308,328,329,370,371,416,417],"2023-edge-react-vienna",{"id":11,"data":13,"body":22,"filePath":23,"digest":24,"rendered":25},{"title":14,"type":15,"description":16,"published":17,"updated":18,"tags":19,"videoLength":21},"Talking Edge Runtime at React Vienna","talk","(n/a)",["Date","2023-09-14T15:00:00.000Z"],["Date","2022-09-14T15:00:00.000Z"],[20],"Edge",24,"\u003Cdiv class=\"video-container\">\n  \u003Ciframe\n    width=\"100%\"\n    height=\"900px\"\n    src=\"https://www.youtube.com/watch?v=1Iod9RClfEA\"\n    frameborder=\"0\"\n    allow=\"accelerometer; \n    autoplay; \n    encrypted-media; \n    gyroscope; \n    picture-in-picture\"\n    allowfullscreen\n  >\u003C/iframe>\n\u003C/div>","src/content/content/2023-edge-react-vienna.md","9e1a45982e38edf5",{"html":26,"metadata":27},"\u003Cdiv class=\"video-container\">\n  \u003Ciframe width=\"100%\" height=\"900px\" src=\"https://www.youtube.com/watch?v=1Iod9RClfEA\" frameborder=\"0\" allow=\"accelerometer; \n    autoplay; \n    encrypted-media; \n    gyroscope; \n    picture-in-picture\" allowfullscreen>\u003C/iframe>\n\u003C/div>",{"headings":28,"localImagePaths":29,"remoteImagePaths":30,"frontmatter":31,"imagePaths":35},[],[],[],{"title":14,"type":15,"description":16,"published":32,"updated":33,"tags":34,"videoLength":21},"2023/09/15","2022/09/15",[20],[],"2024-how-to-show-10m",{"id":36,"data":38,"body":47,"filePath":48,"digest":49,"rendered":50},{"title":39,"type":15,"description":40,"published":41,"updated":42,"tags":43,"videoLength":46},"How to show 10 million of something","Notes from the far end of frontend performance",["Date","2024-12-16T15:00:00.000Z"],["Date","2024-12-16T15:00:00.000Z"],[44,45],"Performance","Talk",15,"A few days ago I had the chance to speak at [Vendure](https://vendure.io/) conference about a type of frontend performance work I often do, about which there are not many resources online: Keeping an app performant while there are huge amounts of data.\n\nThe example I used is [Axiom](https://axiom.co/)'s trace viewer, which is able to load and render millions of spans without pagination.\n\nThanks for having me!\n\n\u003Cdiv class=\"video-container\">\n  \u003Ciframe\n    width=\"100%\"\n    height=\"900px\"\n    src=\"https://www.youtube.com/embed/EPRGxXvMT_s?feature=oembed\"\n    frameborder=\"0\"\n    allow=\"accelerometer; \n    autoplay; \n    encrypted-media; \n    gyroscope; \n    picture-in-picture\"\n    allowfullscreen\n  >\u003C/iframe>\n\u003C/div>","src/content/content/2024-how-to-show-10m.md","61db58c525c42adc",{"html":51,"metadata":52},"\u003Cp>A few days ago I had the chance to speak at \u003Ca href=\"https://vendure.io/\">Vendure\u003C/a> conference about a type of frontend performance work I often do, about which there are not many resources online: Keeping an app performant while there are huge amounts of data.\u003C/p>\n\u003Cp>The example I used is \u003Ca href=\"https://axiom.co/\">Axiom\u003C/a>'s trace viewer, which is able to load and render millions of spans without pagination.\u003C/p>\n\u003Cp>Thanks for having me!\u003C/p>\n\u003Cdiv class=\"video-container\">\n  \u003Ciframe width=\"100%\" height=\"900px\" src=\"https://www.youtube.com/embed/EPRGxXvMT_s?feature=oembed\" frameborder=\"0\" allow=\"accelerometer; \n    autoplay; \n    encrypted-media; \n    gyroscope; \n    picture-in-picture\" allowfullscreen>\u003C/iframe>\n\u003C/div>",{"headings":53,"localImagePaths":54,"remoteImagePaths":55,"frontmatter":56,"imagePaths":59},[],[],[],{"title":39,"type":15,"description":40,"published":57,"updated":57,"tags":58,"videoLength":46},"2024/12/17",[44,45],[],"2023-new-tools",{"id":60,"data":62,"body":68,"filePath":69,"digest":70,"rendered":71},{"title":63,"type":15,"description":64,"published":65,"updated":66,"tags":67,"videoLength":21},"The new tools JavaScript MIGHT get","Looking at TC39 and how it relates to TypeScript",["Date","2023-11-09T15:00:00.000Z"],["Date","2023-11-09T15:00:00.000Z"],[44,45],"Last week I spoke at City JS Berlin about some of the most interesting TC39 proposals, the timelines for them, and how this releates to TypeScript. This talk might interest you if\n\n- You're a JS/TS developer who is not very familiar with other languages\n- You're a JS/TS developer by necessity, and wish it could adopt some features from other languages\n- You're interested in learning about the process by with the JavaScript language gets new features, and how this relates to TypeScript\n\nIf the embed doesn't automatically jump to the right timestamp, please go to 1:12:17.\n\n\u003Cdiv class=\"video-container\">\n  \u003Ciframe\n    width=\"100%\"\n    height=\"900px\"\n    src=\"https://www.youtube.com/embed/MSXhNutLjYU?feature=oembed&start=4337\"\n    frameborder=\"0\"\n    allow=\"accelerometer; \n    autoplay; \n    encrypted-media; \n    gyroscope; \n    picture-in-picture\"\n    allowfullscreen\n  >\u003C/iframe>\n\u003C/div>","src/content/content/2023-new-tools.md","4bb82ee4fa3065dc",{"html":72,"metadata":73},"\u003Cp>Last week I spoke at City JS Berlin about some of the most interesting TC39 proposals, the timelines for them, and how this releates to TypeScript. This talk might interest you if\u003C/p>\n\u003Cul>\n\u003Cli>You're a JS/TS developer who is not very familiar with other languages\u003C/li>\n\u003Cli>You're a JS/TS developer by necessity, and wish it could adopt some features from other languages\u003C/li>\n\u003Cli>You're interested in learning about the process by with the JavaScript language gets new features, and how this relates to TypeScript\u003C/li>\n\u003C/ul>\n\u003Cp>If the embed doesn't automatically jump to the right timestamp, please go to 1:12:17.\u003C/p>\n\u003Cdiv class=\"video-container\">\n  \u003Ciframe width=\"100%\" height=\"900px\" src=\"https://www.youtube.com/embed/MSXhNutLjYU?feature=oembed&#x26;start=4337\" frameborder=\"0\" allow=\"accelerometer; \n    autoplay; \n    encrypted-media; \n    gyroscope; \n    picture-in-picture\" allowfullscreen>\u003C/iframe>\n\u003C/div>",{"headings":74,"localImagePaths":75,"remoteImagePaths":76,"frontmatter":77,"imagePaths":80},[],[],[],{"title":63,"type":15,"description":64,"published":78,"updated":78,"tags":79,"videoLength":21},"2023/11/10",[44,45],[],"2025-support-your-feature",{"id":81,"data":83,"body":91,"filePath":92,"digest":93,"rendered":94},{"title":84,"type":85,"description":86,"published":87,"updated":88,"tags":89},"support your feature","article","ship, then stick around",["Date","2025-04-11T15:00:00.000Z"],["Date","2025-04-11T15:00:00.000Z"],[90],"opinion","## ship, then stick around\n\nwhen you ship a feature, most of the bugs will come in fast. week one, week two. itâ€™s expected. the real problem is what you do with them.\n\nbecause bugfixes, by default, make your code worse. they're patches. glue. workarounds.\n\nby default, anyway.\n\nbecause the people making them donâ€™t have the full picture. they werenâ€™t in the meetings. they didnâ€™t see the tradeoffs. they donâ€™t know which edge case was intentional and which was just â€œgood enough to ship.â€ and they donâ€™t have time to figure it out. theyâ€™re just trying to stop the bleeding.\n\nso what happens? bandaids. fragile logic. duplicated code. â€œjust in timeâ€ hacks that turn your clean system into a jenga tower.\n\nand it didnâ€™t have to be like that.\n\nbecause when bugs show up, the code is still fresh in your head. you know whatâ€™s safe to delete. what you wish youâ€™d written differently. what tech debt you didnâ€™t quite have time to clean up before launch.\n\nbugfixes are a gift. theyâ€™re a second chance to get it right. this is your chance to finish the work, not just patch it.\n\nbecause if you disappear, someone else will fix it for you. and it wonâ€™t be an upgrade.\n\nsupport your feature.","src/content/content/2025-support-your-feature.md","336a335b2bb95ef9",{"html":95,"metadata":96},"\u003Ch2 id=\"ship-then-stick-around\">ship, then stick around\u003C/h2>\n\u003Cp>when you ship a feature, most of the bugs will come in fast. week one, week two. itâ€™s expected. the real problem is what you do with them.\u003C/p>\n\u003Cp>because bugfixes, by default, make your code worse. they're patches. glue. workarounds.\u003C/p>\n\u003Cp>by default, anyway.\u003C/p>\n\u003Cp>because the people making them donâ€™t have the full picture. they werenâ€™t in the meetings. they didnâ€™t see the tradeoffs. they donâ€™t know which edge case was intentional and which was just â€œgood enough to ship.â€ and they donâ€™t have time to figure it out. theyâ€™re just trying to stop the bleeding.\u003C/p>\n\u003Cp>so what happens? bandaids. fragile logic. duplicated code. â€œjust in timeâ€ hacks that turn your clean system into a jenga tower.\u003C/p>\n\u003Cp>and it didnâ€™t have to be like that.\u003C/p>\n\u003Cp>because when bugs show up, the code is still fresh in your head. you know whatâ€™s safe to delete. what you wish youâ€™d written differently. what tech debt you didnâ€™t quite have time to clean up before launch.\u003C/p>\n\u003Cp>bugfixes are a gift. theyâ€™re a second chance to get it right. this is your chance to finish the work, not just patch it.\u003C/p>\n\u003Cp>because if you disappear, someone else will fix it for you. and it wonâ€™t be an upgrade.\u003C/p>\n\u003Cp>support your feature.\u003C/p>",{"headings":97,"localImagePaths":101,"remoteImagePaths":102,"frontmatter":103,"imagePaths":106},[98],{"depth":99,"slug":100,"text":86},2,"ship-then-stick-around",[],[],{"title":84,"type":85,"description":86,"published":104,"updated":104,"tags":105},"2025/04/12",[90],[],"2025-rules-to-live-by",{"id":107,"data":109,"body":116,"filePath":117,"digest":118,"rendered":119},{"title":110,"type":85,"description":111,"published":112,"updated":113,"tags":114},"Rules to work by","todo",["Date","2025-04-26T15:00:00.000Z"],["Date","2025-04-26T15:00:00.000Z"],[115],"idk","- be kind https://boz.com/articles/be-kind\n  - take responsibility for your impact on the people around you\n- let other people talk (how to make friends and influence people)\n- ask questions\n- be proactive / high agency https://auren.substack.com/p/ultimate-employee-the-one-that-is\n- always stay learning\n- always know what it would take for you to be wrong\n- work in a perceived profit center https://www.seangoedecke.com/where-the-money-comes-from/\n\n\nhow we work at warp https://warpdev.notion.site/\n\n---\n\nleadership\n- listen more than you speak\n- let people know that you value them enormously\n\n---\n\nmake close friends https://www.neelnanda.io/blog/43-making-friends","src/content/content/2025-rules-to-live-by.md","06bcd538fc543b18",{"html":120,"metadata":121},"\u003Cul>\n\u003Cli>be kind https://boz.com/articles/be-kind\n\u003Cul>\n\u003Cli>take responsibility for your impact on the people around you\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>let other people talk (how to make friends and influence people)\u003C/li>\n\u003Cli>ask questions\u003C/li>\n\u003Cli>be proactive / high agency https://auren.substack.com/p/ultimate-employee-the-one-that-is\u003C/li>\n\u003Cli>always stay learning\u003C/li>\n\u003Cli>always know what it would take for you to be wrong\u003C/li>\n\u003Cli>work in a perceived profit center https://www.seangoedecke.com/where-the-money-comes-from/\u003C/li>\n\u003C/ul>\n\u003Cp>how we work at warp https://warpdev.notion.site/\u003C/p>\n\u003Chr>\n\u003Cp>leadership\u003C/p>\n\u003Cul>\n\u003Cli>listen more than you speak\u003C/li>\n\u003Cli>let people know that you value them enormously\u003C/li>\n\u003C/ul>\n\u003Chr>\n\u003Cp>make close friends https://www.neelnanda.io/blog/43-making-friends\u003C/p>",{"headings":122,"localImagePaths":123,"remoteImagePaths":124,"frontmatter":125,"imagePaths":128},[],[],[],{"title":110,"type":85,"description":111,"published":126,"updated":126,"tags":127},"2025/04/27",[115],[],"2025-otel-frustrations",{"id":129,"data":131,"body":138,"filePath":139,"digest":140,"rendered":141},{"title":132,"type":85,"description":133,"published":134,"updated":135,"tags":136},"OTel Frustrations","...",["Date","2025-04-17T15:00:00.000Z"],["Date","2025-04-17T15:00:00.000Z"],[90,137],"OpenTelemetry","its sad how much time and money has been funnelled into opentelemetry, how much its being shilled by companies, and its still so wildly immature\n\n\u003Cspan style=\"font:monospace\">David Cramer (@zeeg) - [4:50 AM Â· Apr 18, 2025](https://x.com/zeeg/status/1913062466507956593)\u003C/span>\n\n\u003Cbr />\n\nHow would you improve it?\n\nMatt Pocock (@mattpocockuk) - [10:16 AM Â· Apr 18, 2025](https://x.com/mattpocockuk/status/1913144580322525407)\n\n\u003Cbr />\n\nmove faster\n\nhow are we 4 months into 2025 and genai semantic conventions are still incubating?\n\noutcome is that everyone just does their own thing instead (example: vercel ai sdk `experimentalTelemetry` is very nonstandard)\n\nChristopher Ehrlich (@ccccjjjjeeee) - [10:27 AM Â· Apr 18, 2025](https://x.com/ccccjjjjeeee/status/1913147336873693527)\n\n\u003Cbr />\n\n\"you have to put prompts and responses as events instead of attributes, but beware this will change again after complex attributes land, but also there has been no perceivable progress on them since the issue was opened\"\n\nChristopher Ehrlich (@ccccjjjjeeee) - [10:33 AM Â· Apr 18, 2025](https://x.com/ccccjjjjeeee/status/1913148754779156649)\n\n\u003Cbr />\n\ni appreciate that its a project built by volunteers, prs welcome etc\n\nbut the experience of building tooling for it is an exercise in frustration\n\nand so the tooling is bad and its also frustrating for users\n\nChristopher Ehrlich (@ccccjjjjeeee) - [10:33 AM Â· Apr 18, 2025](https://x.com/ccccjjjjeeee/status/1913148919443345853)\n\n\u003Cbr />\n\nthe promise of otel is that if there is a common agreed upon schema then multiple vendors can build tooling for that schema\n\nbut that promise isn't really true and so it's hard to build any kind of ui/ux that makes assumptions about schema beyond the most basic things\n\nChristopher Ehrlich (@ccccjjjjeeee) - [10:37 AM Â· Apr 18, 2025](https://x.com/ccccjjjjeeee/status/1913149948264095872)\n\n\u003Cbr />\n\nin their defense we're still better off than we were 10 years ago. just it could be so much better if there wasn't so much design by committee.\n\nChristopher Ehrlich (@ccccjjjjeeee) - [10:39 AM Â· Apr 18, 2025](https://x.com/ccccjjjjeeee/status/1913150279945511263)\n\n\u003Cbr />\n\nbtw the best otel tooling i've come across is the one in \n@EffectTS_ ðŸ˜­\n\nwhich i think is because they own the whole thing so they can be opinionated\n\nand no opinions = bad ux\n\nChristopher Ehrlich (@ccccjjjjeeee) - [10:46 AM Â· Apr 18, 2025](https://x.com/ccccjjjjeeee/status/1913152259480756246)","src/content/content/2025-otel-frustrations.md","a443f2993bce7f45",{"html":142,"metadata":143},"\u003Cp>its sad how much time and money has been funnelled into opentelemetry, how much its being shilled by companies, and its still so wildly immature\u003C/p>\n\u003Cp>\u003Cspan style=\"font:monospace\">David Cramer (@zeeg) - \u003Ca href=\"https://x.com/zeeg/status/1913062466507956593\">4:50 AM Â· Apr 18, 2025\u003C/a>\u003C/span>\u003C/p>\n\u003Cbr>\n\u003Cp>How would you improve it?\u003C/p>\n\u003Cp>Matt Pocock (@mattpocockuk) - \u003Ca href=\"https://x.com/mattpocockuk/status/1913144580322525407\">10:16 AM Â· Apr 18, 2025\u003C/a>\u003C/p>\n\u003Cbr>\n\u003Cp>move faster\u003C/p>\n\u003Cp>how are we 4 months into 2025 and genai semantic conventions are still incubating?\u003C/p>\n\u003Cp>outcome is that everyone just does their own thing instead (example: vercel ai sdk \u003Ccode>experimentalTelemetry\u003C/code> is very nonstandard)\u003C/p>\n\u003Cp>Christopher Ehrlich (@ccccjjjjeeee) - \u003Ca href=\"https://x.com/ccccjjjjeeee/status/1913147336873693527\">10:27 AM Â· Apr 18, 2025\u003C/a>\u003C/p>\n\u003Cbr>\n\u003Cp>\"you have to put prompts and responses as events instead of attributes, but beware this will change again after complex attributes land, but also there has been no perceivable progress on them since the issue was opened\"\u003C/p>\n\u003Cp>Christopher Ehrlich (@ccccjjjjeeee) - \u003Ca href=\"https://x.com/ccccjjjjeeee/status/1913148754779156649\">10:33 AM Â· Apr 18, 2025\u003C/a>\u003C/p>\n\u003Cbr>\n\u003Cp>i appreciate that its a project built by volunteers, prs welcome etc\u003C/p>\n\u003Cp>but the experience of building tooling for it is an exercise in frustration\u003C/p>\n\u003Cp>and so the tooling is bad and its also frustrating for users\u003C/p>\n\u003Cp>Christopher Ehrlich (@ccccjjjjeeee) - \u003Ca href=\"https://x.com/ccccjjjjeeee/status/1913148919443345853\">10:33 AM Â· Apr 18, 2025\u003C/a>\u003C/p>\n\u003Cbr>\n\u003Cp>the promise of otel is that if there is a common agreed upon schema then multiple vendors can build tooling for that schema\u003C/p>\n\u003Cp>but that promise isn't really true and so it's hard to build any kind of ui/ux that makes assumptions about schema beyond the most basic things\u003C/p>\n\u003Cp>Christopher Ehrlich (@ccccjjjjeeee) - \u003Ca href=\"https://x.com/ccccjjjjeeee/status/1913149948264095872\">10:37 AM Â· Apr 18, 2025\u003C/a>\u003C/p>\n\u003Cbr>\n\u003Cp>in their defense we're still better off than we were 10 years ago. just it could be so much better if there wasn't so much design by committee.\u003C/p>\n\u003Cp>Christopher Ehrlich (@ccccjjjjeeee) - \u003Ca href=\"https://x.com/ccccjjjjeeee/status/1913150279945511263\">10:39 AM Â· Apr 18, 2025\u003C/a>\u003C/p>\n\u003Cbr>\n\u003Cp>btw the best otel tooling i've come across is the one in\n@EffectTS_ ðŸ˜­\u003C/p>\n\u003Cp>which i think is because they own the whole thing so they can be opinionated\u003C/p>\n\u003Cp>and no opinions = bad ux\u003C/p>\n\u003Cp>Christopher Ehrlich (@ccccjjjjeeee) - \u003Ca href=\"https://x.com/ccccjjjjeeee/status/1913152259480756246\">10:46 AM Â· Apr 18, 2025\u003C/a>\u003C/p>",{"headings":144,"localImagePaths":145,"remoteImagePaths":146,"frontmatter":147,"imagePaths":150},[],[],[],{"title":132,"type":85,"description":133,"published":148,"updated":148,"tags":149},"2025/04/18",[90,137],[],"advanced-trpc",{"id":151,"data":153,"body":164,"filePath":165,"digest":166,"rendered":167},{"title":154,"type":155,"description":156,"published":157,"updated":158,"tags":159,"videoLength":163},"Advanced tRPC - Callers, functions, and gSSP","video","How to call procedures from other procedures, how to structure a large tRPC backend, different ways of getting data from tRPC in getServerSideProps and when to use each one, and what Callers should actually be used for.",["Date","2023-01-30T15:00:00.000Z"],["Date","2023-01-30T15:00:00.000Z"],[160,161,162],"tRPC","create-t3-app","YouTube",10,"I released another video about tRPC. This one is more in depth and aimed at advanced users. Topics include:\n\n- How to call procedures from other procedures\n- How to structure a large tRPC backend\n- Different ways of getting data from tRPC in getServerSideProps and when to use each one\n- What Callers should and should not be used for. \n\n\u003Cdiv class=\"video-container\">\n  \u003Ciframe\n    width=\"100%\"\n    height=\"900px\"\n    src=\"https://www.youtube.com/embed/G2ZzmgShHgQ?feature=oembed\"\n    frameborder=\"0\"\n    allow=\"accelerometer; \n    autoplay; \n    encrypted-media; \n    gyroscope; \n    picture-in-picture\"\n    allowfullscreen\n  >\u003C/iframe>\n\u003C/div>","src/content/content/advanced-trpc.md","74ed757f2e09b9ac",{"html":168,"metadata":169},"\u003Cp>I released another video about tRPC. This one is more in depth and aimed at advanced users. Topics include:\u003C/p>\n\u003Cul>\n\u003Cli>How to call procedures from other procedures\u003C/li>\n\u003Cli>How to structure a large tRPC backend\u003C/li>\n\u003Cli>Different ways of getting data from tRPC in getServerSideProps and when to use each one\u003C/li>\n\u003Cli>What Callers should and should not be used for.\u003C/li>\n\u003C/ul>\n\u003Cdiv class=\"video-container\">\n  \u003Ciframe width=\"100%\" height=\"900px\" src=\"https://www.youtube.com/embed/G2ZzmgShHgQ?feature=oembed\" frameborder=\"0\" allow=\"accelerometer; \n    autoplay; \n    encrypted-media; \n    gyroscope; \n    picture-in-picture\" allowfullscreen>\u003C/iframe>\n\u003C/div>",{"headings":170,"localImagePaths":171,"remoteImagePaths":172,"frontmatter":173,"imagePaths":176},[],[],[],{"title":154,"type":155,"description":156,"published":174,"updated":174,"tags":175,"videoLength":163},"2023/01/31",[160,161,162],[],"jutanium-stream",{"id":177,"data":179,"body":189,"filePath":190,"digest":191,"rendered":192},{"title":180,"type":181,"description":182,"published":183,"updated":184,"tags":185,"videoLength":188},"Talking tRPC and Docs with Dan Jutan","appearance","We also talked about education, abstraction and practicality, dx, open source, and much more",["Date","2023-04-10T15:00:00.000Z"],["Date","2023-04-10T15:00:00.000Z"],[160,186,187],"Jutanium","Guest Appearance",120,"## ðŸš¨ Disclaimer ðŸš¨\n\nI'm returning to this post due to the recent [inacceptable](https://twitter.com/zeu_dev/status/1678935365699371010) [behaviour](https://twitter.com/devagrawal09/status/1679268841673707528) [by](https://twitter.com/crutchcorn/status/1679214679430922240) [Dan](https://twitter.com/LadyBluenotes/status/1679242965263454208).\n\nI thought about deleting my original post entirely, but I believe it's important to acknowledge the situation, and make anyone who might watch the video on his channel aware of the situation. Therefore, I have chosen to leave the post unedited but provide this disclaimer to offer clarity.\n\nWhen I appeared on Dan's stream, I knew him from his work on the Solid.js and Astro docs, and as someone who was just getting into technical writing and community management myself, I was eager to talk shop. Most of the bad stuff involving Dan hadn't happened yet, and the stuff that did already happen I simply wasn't aware of.\n\nAs someone who has faced personal struggles with mental health, I generally advocate for understanding and forgiveness when individuals exhibit harmful behavior. I have, in the past, acted poorly toward those I care about, and I am grateful for their willingness to accept my apologies once I regained clarity. I still hope Dan can get the help that he evidently needs.\n\nHowever, it is crucial to acknowledge that Dan's behavior has crossed a line of unacceptability. Our primary concern should be the well-being of his victims.\n\nI should have said this earlier, but at least I can say it now: I don't endorse any of Dan's behaviour, and I would recommend any project or person who is contacted by Dan to stay away from him. If you have been a victim of abuse or threats from Dan, or want to talk for any other reason, my DMs are always open.\n\n## Original Post\n\nLast night I appeared on the stream / YouTube channel of Dan Jutan aka [@jutanium](https://twitter.com/jutanium). We talked for almost two hours, covering:\n\n- Approaches to teaching\n- The value of documentation\n- How to maintain the quality of documentation over time\n- How to know if documentation is working, and which parts need improvement\n- Why technical writers are undervalued\n- tRPC and the huge surface area of its API\n\n...and much more.\n\nBut more importantly, Dan gave me a review of the tRPC landing page and introductory docs. I am currently working on rewriting the \"first 5 minutes\" of the docs, so this was extremely valuable.\n\nThanks a lot to Dan for having me on and the docs review!\n\n\u003Cdiv class=\"video-container\">\n  \u003Ciframe\n    width=\"100%\"\n    height=\"900px\"\n    src=\"https://www.youtube.com/embed/PWRRHoGDJhY?feature=oembed\"\n    frameborder=\"0\"\n    allow=\"accelerometer; \n    autoplay; \n    encrypted-media; \n    gyroscope; \n    picture-in-picture\"\n    allowfullscreen\n  >\u003C/iframe>\n\u003C/div>","src/content/content/jutanium-stream.md","9432fb21053a24da",{"html":193,"metadata":194},"\u003Ch2 id=\"-disclaimer\">ðŸš¨ Disclaimer ðŸš¨\u003C/h2>\n\u003Cp>I'm returning to this post due to the recent \u003Ca href=\"https://twitter.com/zeu_dev/status/1678935365699371010\">inacceptable\u003C/a> \u003Ca href=\"https://twitter.com/devagrawal09/status/1679268841673707528\">behaviour\u003C/a> \u003Ca href=\"https://twitter.com/crutchcorn/status/1679214679430922240\">by\u003C/a> \u003Ca href=\"https://twitter.com/LadyBluenotes/status/1679242965263454208\">Dan\u003C/a>.\u003C/p>\n\u003Cp>I thought about deleting my original post entirely, but I believe it's important to acknowledge the situation, and make anyone who might watch the video on his channel aware of the situation. Therefore, I have chosen to leave the post unedited but provide this disclaimer to offer clarity.\u003C/p>\n\u003Cp>When I appeared on Dan's stream, I knew him from his work on the Solid.js and Astro docs, and as someone who was just getting into technical writing and community management myself, I was eager to talk shop. Most of the bad stuff involving Dan hadn't happened yet, and the stuff that did already happen I simply wasn't aware of.\u003C/p>\n\u003Cp>As someone who has faced personal struggles with mental health, I generally advocate for understanding and forgiveness when individuals exhibit harmful behavior. I have, in the past, acted poorly toward those I care about, and I am grateful for their willingness to accept my apologies once I regained clarity. I still hope Dan can get the help that he evidently needs.\u003C/p>\n\u003Cp>However, it is crucial to acknowledge that Dan's behavior has crossed a line of unacceptability. Our primary concern should be the well-being of his victims.\u003C/p>\n\u003Cp>I should have said this earlier, but at least I can say it now: I don't endorse any of Dan's behaviour, and I would recommend any project or person who is contacted by Dan to stay away from him. If you have been a victim of abuse or threats from Dan, or want to talk for any other reason, my DMs are always open.\u003C/p>\n\u003Ch2 id=\"original-post\">Original Post\u003C/h2>\n\u003Cp>Last night I appeared on the stream / YouTube channel of Dan Jutan aka \u003Ca href=\"https://twitter.com/jutanium\">@jutanium\u003C/a>. We talked for almost two hours, covering:\u003C/p>\n\u003Cul>\n\u003Cli>Approaches to teaching\u003C/li>\n\u003Cli>The value of documentation\u003C/li>\n\u003Cli>How to maintain the quality of documentation over time\u003C/li>\n\u003Cli>How to know if documentation is working, and which parts need improvement\u003C/li>\n\u003Cli>Why technical writers are undervalued\u003C/li>\n\u003Cli>tRPC and the huge surface area of its API\u003C/li>\n\u003C/ul>\n\u003Cp>...and much more.\u003C/p>\n\u003Cp>But more importantly, Dan gave me a review of the tRPC landing page and introductory docs. I am currently working on rewriting the \"first 5 minutes\" of the docs, so this was extremely valuable.\u003C/p>\n\u003Cp>Thanks a lot to Dan for having me on and the docs review!\u003C/p>\n\u003Cdiv class=\"video-container\">\n  \u003Ciframe width=\"100%\" height=\"900px\" src=\"https://www.youtube.com/embed/PWRRHoGDJhY?feature=oembed\" frameborder=\"0\" allow=\"accelerometer; \n    autoplay; \n    encrypted-media; \n    gyroscope; \n    picture-in-picture\" allowfullscreen>\u003C/iframe>\n\u003C/div>",{"headings":195,"localImagePaths":202,"remoteImagePaths":203,"frontmatter":204,"imagePaths":207},[196,199],{"depth":99,"slug":197,"text":198},"-disclaimer","ðŸš¨ Disclaimer ðŸš¨",{"depth":99,"slug":200,"text":201},"original-post","Original Post",[],[],{"title":180,"type":181,"description":182,"published":205,"updated":205,"tags":206,"videoLength":188},"2023/04/11",[160,186,187],[],"ryan-carniato-stream",{"id":208,"data":210,"body":219,"filePath":220,"digest":221,"rendered":222},{"title":211,"type":181,"description":182,"published":212,"updated":213,"tags":214,"videoLength":218},"Talking T3 with Ryan Carniato",["Date","2023-02-02T15:00:00.000Z"],["Date","2023-02-02T15:00:00.000Z"],[215,216,217,187],"Create T3 App","Next.js","Ryan Carniato",150,"Last night I had the immense privilege of being on the stream of Ryan Carniato, the creator of [SolidJS](https://www.solidjs.com/).\n\nThe first 2.5 hours are my conversation with Ryan, and then Ryan looks at React Server Components for about 1.5 hours, and the final hour is Ryan discussing recent news in the JavaScript ecosystem.\n\nTopics include:\n\n- Practicality and Abstraction in learning\n- Ways to learn new technology\n- Making content to answer questions and learn\n- How I got involved with T3 OSS\n- Advice on getting started with Open Source\n- Using Create T3 App\n- tRPC and the data flow\n- tRPC and TanStack Query\n- The balancing act between DX and bleeding edge\n\n...and many more\n\nI had a great time talking with Ryan and I'm really happy with how this turned out :)\n\n\u003Cdiv class=\"video-container\">\n  \u003Ciframe\n    width=\"100%\"\n    height=\"900px\"\n    src=\"https://www.youtube.com/embed/-CWarVQDtEg?feature=oembed\"\n    frameborder=\"0\"\n    allow=\"accelerometer; \n    autoplay; \n    encrypted-media; \n    gyroscope; \n    picture-in-picture\"\n    allowfullscreen\n  >\u003C/iframe>\n\u003C/div>","src/content/content/ryan-carniato-stream.md","059e0f9b3e7e6d71",{"html":223,"metadata":224},"\u003Cp>Last night I had the immense privilege of being on the stream of Ryan Carniato, the creator of \u003Ca href=\"https://www.solidjs.com/\">SolidJS\u003C/a>.\u003C/p>\n\u003Cp>The first 2.5 hours are my conversation with Ryan, and then Ryan looks at React Server Components for about 1.5 hours, and the final hour is Ryan discussing recent news in the JavaScript ecosystem.\u003C/p>\n\u003Cp>Topics include:\u003C/p>\n\u003Cul>\n\u003Cli>Practicality and Abstraction in learning\u003C/li>\n\u003Cli>Ways to learn new technology\u003C/li>\n\u003Cli>Making content to answer questions and learn\u003C/li>\n\u003Cli>How I got involved with T3 OSS\u003C/li>\n\u003Cli>Advice on getting started with Open Source\u003C/li>\n\u003Cli>Using Create T3 App\u003C/li>\n\u003Cli>tRPC and the data flow\u003C/li>\n\u003Cli>tRPC and TanStack Query\u003C/li>\n\u003Cli>The balancing act between DX and bleeding edge\u003C/li>\n\u003C/ul>\n\u003Cp>...and many more\u003C/p>\n\u003Cp>I had a great time talking with Ryan and I'm really happy with how this turned out :)\u003C/p>\n\u003Cdiv class=\"video-container\">\n  \u003Ciframe width=\"100%\" height=\"900px\" src=\"https://www.youtube.com/embed/-CWarVQDtEg?feature=oembed\" frameborder=\"0\" allow=\"accelerometer; \n    autoplay; \n    encrypted-media; \n    gyroscope; \n    picture-in-picture\" allowfullscreen>\u003C/iframe>\n\u003C/div>",{"headings":225,"localImagePaths":226,"remoteImagePaths":227,"frontmatter":228,"imagePaths":231},[],[],[],{"title":211,"type":181,"description":182,"published":229,"updated":229,"tags":230,"videoLength":218},"2023/02/03",[215,216,217,187],[],"trpc-data-flows",{"id":232,"data":234,"body":241,"filePath":242,"digest":243,"rendered":244},{"title":235,"type":155,"description":236,"published":237,"updated":238,"tags":239,"videoLength":240},"How tRPC really works","Everything you need to know about data flows in tRPC",["Date","2023-01-12T15:00:00.000Z"],["Date","2023-01-12T15:00:00.000Z"],[160,161,162],20,"Today I released my first educational YouTube video, \"How tRPC really works\".\n\nIt's aimed at people who have used tRPC before and want to level up their understanding of it. The video follows the data flow of a single query through the codebase from the frontend, to the procedure, and back to the frontend, and closely examines what happens at each stage.\n\nAny feedback is appreciated. If you are interested in a written article version of this video, or in having it adapted into a talk for your meetup or conference, please get in touch :)\n\n\u003Cdiv class=\"video-container\">\n  \u003Ciframe\n    width=\"100%\"\n    height=\"900px\"\n    src=\"https://www.youtube.com/embed/x4mu-jOiA0Q?feature=oembed\"\n    frameborder=\"0\"\n    allow=\"accelerometer; \n    autoplay; \n    encrypted-media; \n    gyroscope; \n    picture-in-picture\"\n    allowfullscreen\n  >\u003C/iframe>\n\u003C/div>\n\nHere is a larger version of the diagram that I use in the video.\n\n![Large version of the diagram presented in the video](/img/youtube/trpc-data-flows.png)","src/content/content/trpc-data-flows.md","a212dc808082e76f",{"html":245,"metadata":246},"\u003Cp>Today I released my first educational YouTube video, \"How tRPC really works\".\u003C/p>\n\u003Cp>It's aimed at people who have used tRPC before and want to level up their understanding of it. The video follows the data flow of a single query through the codebase from the frontend, to the procedure, and back to the frontend, and closely examines what happens at each stage.\u003C/p>\n\u003Cp>Any feedback is appreciated. If you are interested in a written article version of this video, or in having it adapted into a talk for your meetup or conference, please get in touch :)\u003C/p>\n\u003Cdiv class=\"video-container\">\n  \u003Ciframe width=\"100%\" height=\"900px\" src=\"https://www.youtube.com/embed/x4mu-jOiA0Q?feature=oembed\" frameborder=\"0\" allow=\"accelerometer; \n    autoplay; \n    encrypted-media; \n    gyroscope; \n    picture-in-picture\" allowfullscreen>\u003C/iframe>\n\u003C/div>\n\u003Cp>Here is a larger version of the diagram that I use in the video.\u003C/p>\n\u003Cp>\u003Cimg src=\"/img/youtube/trpc-data-flows.png\" alt=\"Large version of the diagram presented in the video\">\u003C/p>",{"headings":247,"localImagePaths":248,"remoteImagePaths":249,"frontmatter":250,"imagePaths":253},[],[],[],{"title":235,"type":155,"description":236,"published":251,"updated":251,"tags":252,"videoLength":240},"2023/01/13",[160,161,162],[],"react-query-patterns",{"id":254,"data":256,"body":263,"filePath":264,"digest":265,"rendered":266},{"title":257,"type":85,"description":258,"published":259,"tags":260},"Writing clean React Query code","Patterns to improve your frontend codebase",["Date","2022-05-27T15:00:00.000Z"],[261,262],"React Query","Clean Code","> âš ï¸ **This article is outdated!** I wrote this for React Query v2/v3. Some of the patterns here are no longer good practice, and the code snippets will break entirely in v5. I'll leave this article up because I don't like when content online disappears, but please be aware that you probably shouldn't take it as advice.\n\nReact Query is by far my favourite library for dealing with server state. But after spending some time reading both code posted by people on support channels such as Stack Overflow and the React Query Discord, and some Open Source projects that use React Query, I've noticed that there are two very easy to implement patterns that make React Query code easier to read and less prone to bugs.\n\n## 1. Use variables as Query Keys\n\nReact Query uses Query Keys to store and later invalidate queries. This is very userful, but they are just arbitrary strings, which means they are not checked by TypeScript in any way. An easy way around this is to use variables. There are two levels to this:\n\n1. Keep your Query Keys in an enum\n2. Assign a variable to the entire Query Key at the start of the function\n\nImagine this very simple query:\n\n```ts\nfunction useGroup(id: number) {\n  return useQuery([\"group\", id], () => fetchGroup(id));\n}\n```\n\nYou are probably also using the `group` Query Key in some other places. What if you misspell it in one place? That can lead to a frustrating debugging session, or even worse, not noticing at all and losing all the benefits of React Query by not using the cache at all due to mismatching Query Keys. The solution is simple: Keep your keys in an enum, and refer to that instead.\n\n```ts\n// QueryKeys.ts\nexport enum QueryKeys {\n  user = \"user\",\n  group = \"group\",\n  post = \"post\",\n}\n\n// useGroup.ts\nfunction useGroup(id: number) {\n  return useQuery([QueryKeys.group, id], () => fetchGroup(id));\n}\n```\n\nBy referring to a key of the enum, you are making sure that you will always use the correct value. It also gives you an easy way to keep track of all the different Query Keys that you have in your app.\n\nThe second level to this is that if you use the same complex Query Key more than once in the same mutation, it's probably worth assigning it to a variable at the start of each function and just referring to that throughout the function. This is for the same reason as the previous tip - it helps to prevent bugs.\n\nHere's an example of how this might look:\n\n```ts\nconst useUpdateGroup = ({\n  groupId,\n}: {\n  groupId: string;\n}) => {\n  const queryClient = useQueryClient();\n  const queryKey = [QueryKeys.group, surveyId]; // Create Query Key\n\n  return useMutation(\n    queryKey, // Usage #1\n    (data) => axios.patch(`/api/group/${groupId}`, data),\n    {\n      onError: (e) => {\n        console.error(e);\n        queryClient.invalidateQueries(queryKey); // Usage #2\n      }\n      onMutate: (data) => {\n        queryClient.cancelQueries(queryKey); // Usage #3\n        let optimisticUpdate = queryClient.getQueryData(queryKey); // Usage #4\n        if (optimisticUpdate) {\n          /* create the updated object */\n          queryClient.setQueryData(queryKey, optimisticUpdate); // Usage #5\n        }\n      },\n      onSettled: () => {\n        queryClient.invalidateQueries(queryKey); // Usage #6\n      },\n    }\n  );\n};\n```\n\nWe use the `queryKey` variable **six** times in the function above, and I've seen mutations that use it even more times than that. Imagine you don't do this, and later realize that you need to change the Query Key. In a function that is much more complicated than the one above, what are the odds of missing one instance and introducing a bug? With this system, you just need to change one thing in the future.\n\n## 2. You don't have to spread arrays or objects to create optimistic updates\n\nThe second easy to fix thing is an antipattern that I see people using all the time in mutations. It comes from being used to dealing with immutable state so frequently that spreading becomes the default behaviour.\n\nHere is one example of how this antipattern might manifest itself.\n\n```ts\nonMutate: (data) => {\n  queryClient.cancelQueries(queryKey);\n  const optimisticUpdate = queryClient.getQueryData(queryKey);\n  if (optimisticUpdate) {\n    queryClient.setQueryData(queryKey, {\n      ...optimisticUpdate, foo: {\n        ...optimistic.foo, bar: {\n          ...optimisticUpdate.foo.bar, baz: {\n            /* etc, imagine how ugly it gets when dealing with nested arrays */\n          }\n        }\n      }\n    });\n  }\n},\n```\n\n**You don't have to do this!**\n\nOne 'solution' I see sometimes is people reaching for libraries such as [Immer](https://immerjs.github.io/immer/). Immer is a lovely library, but there is an even easier way.\n\nThe simplest solution is to just use a mutable variable for your optimistic update. In this particular situation, there is absolutely no advantage to using immutable data.\n\n```ts\nonMutate: (data) => {\n  queryClient.cancelQueries(queryKey);\n  let optimisticUpdate = queryClient.getQueryData(queryKey);\n  if (optimisticUpdate) {\n    optimisticUpdate.foo.bar.baz = 'new value'; // modify a deeply nested oject\n    queryClient.setQueryData(queryKey, optimisticUpdate);\n  }\n},\n```\n\nLook at how easy to read this is compared to above. Not only that, but it's also much more difficult to introduce bugs (raise your hand if you've ever made an off-by-one error while using `Array.slice()`).\n\nI hope these tips were helpful. Thanks for reading and please don't hesitate to contact me if you have any questions or comments.","src/content/content/react-query-patterns.md","08be916916ca80cc",{"html":267,"metadata":268},"\u003Cblockquote>\n\u003Cp>âš ï¸ \u003Cstrong>This article is outdated!\u003C/strong> I wrote this for React Query v2/v3. Some of the patterns here are no longer good practice, and the code snippets will break entirely in v5. I'll leave this article up because I don't like when content online disappears, but please be aware that you probably shouldn't take it as advice.\u003C/p>\n\u003C/blockquote>\n\u003Cp>React Query is by far my favourite library for dealing with server state. But after spending some time reading both code posted by people on support channels such as Stack Overflow and the React Query Discord, and some Open Source projects that use React Query, I've noticed that there are two very easy to implement patterns that make React Query code easier to read and less prone to bugs.\u003C/p>\n\u003Ch2 id=\"1-use-variables-as-query-keys\">1. Use variables as Query Keys\u003C/h2>\n\u003Cp>React Query uses Query Keys to store and later invalidate queries. This is very userful, but they are just arbitrary strings, which means they are not checked by TypeScript in any way. An easy way around this is to use variables. There are two levels to this:\u003C/p>\n\u003Col>\n\u003Cli>Keep your Query Keys in an enum\u003C/li>\n\u003Cli>Assign a variable to the entire Query Key at the start of the function\u003C/li>\n\u003C/ol>\n\u003Cp>Imagine this very simple query:\u003C/p>\n\u003Cpre class=\"astro-code dark-plus\" style=\"background-color:#1E1E1E;color:#D4D4D4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"ts\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#569CD6\">function\u003C/span>\u003Cspan style=\"color:#DCDCAA\"> useGroup\u003C/span>\u003Cspan style=\"color:#D4D4D4\">(\u003C/span>\u003Cspan style=\"color:#9CDCFE\">id\u003C/span>\u003Cspan style=\"color:#D4D4D4\">: \u003C/span>\u003Cspan style=\"color:#4EC9B0\">number\u003C/span>\u003Cspan style=\"color:#D4D4D4\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C586C0\">  return\u003C/span>\u003Cspan style=\"color:#DCDCAA\"> useQuery\u003C/span>\u003Cspan style=\"color:#D4D4D4\">([\u003C/span>\u003Cspan style=\"color:#CE9178\">\"group\"\u003C/span>\u003Cspan style=\"color:#D4D4D4\">, \u003C/span>\u003Cspan style=\"color:#9CDCFE\">id\u003C/span>\u003Cspan style=\"color:#D4D4D4\">], () \u003C/span>\u003Cspan style=\"color:#569CD6\">=>\u003C/span>\u003Cspan style=\"color:#DCDCAA\"> fetchGroup\u003C/span>\u003Cspan style=\"color:#D4D4D4\">(\u003C/span>\u003Cspan style=\"color:#9CDCFE\">id\u003C/span>\u003Cspan style=\"color:#D4D4D4\">));\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>You are probably also using the \u003Ccode>group\u003C/code> Query Key in some other places. What if you misspell it in one place? That can lead to a frustrating debugging session, or even worse, not noticing at all and losing all the benefits of React Query by not using the cache at all due to mismatching Query Keys. The solution is simple: Keep your keys in an enum, and refer to that instead.\u003C/p>\n\u003Cpre class=\"astro-code dark-plus\" style=\"background-color:#1E1E1E;color:#D4D4D4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"ts\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A9955\">// QueryKeys.ts\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C586C0\">export\u003C/span>\u003Cspan style=\"color:#569CD6\"> enum\u003C/span>\u003Cspan style=\"color:#4EC9B0\"> QueryKeys\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#4FC1FF\">  user\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> = \u003C/span>\u003Cspan style=\"color:#CE9178\">\"user\"\u003C/span>\u003Cspan style=\"color:#D4D4D4\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#4FC1FF\">  group\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> = \u003C/span>\u003Cspan style=\"color:#CE9178\">\"group\"\u003C/span>\u003Cspan style=\"color:#D4D4D4\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#4FC1FF\">  post\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> = \u003C/span>\u003Cspan style=\"color:#CE9178\">\"post\"\u003C/span>\u003Cspan style=\"color:#D4D4D4\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A9955\">// useGroup.ts\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#569CD6\">function\u003C/span>\u003Cspan style=\"color:#DCDCAA\"> useGroup\u003C/span>\u003Cspan style=\"color:#D4D4D4\">(\u003C/span>\u003Cspan style=\"color:#9CDCFE\">id\u003C/span>\u003Cspan style=\"color:#D4D4D4\">: \u003C/span>\u003Cspan style=\"color:#4EC9B0\">number\u003C/span>\u003Cspan style=\"color:#D4D4D4\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C586C0\">  return\u003C/span>\u003Cspan style=\"color:#DCDCAA\"> useQuery\u003C/span>\u003Cspan style=\"color:#D4D4D4\">([\u003C/span>\u003Cspan style=\"color:#9CDCFE\">QueryKeys\u003C/span>\u003Cspan style=\"color:#D4D4D4\">.\u003C/span>\u003Cspan style=\"color:#9CDCFE\">group\u003C/span>\u003Cspan style=\"color:#D4D4D4\">, \u003C/span>\u003Cspan style=\"color:#9CDCFE\">id\u003C/span>\u003Cspan style=\"color:#D4D4D4\">], () \u003C/span>\u003Cspan style=\"color:#569CD6\">=>\u003C/span>\u003Cspan style=\"color:#DCDCAA\"> fetchGroup\u003C/span>\u003Cspan style=\"color:#D4D4D4\">(\u003C/span>\u003Cspan style=\"color:#9CDCFE\">id\u003C/span>\u003Cspan style=\"color:#D4D4D4\">));\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>By referring to a key of the enum, you are making sure that you will always use the correct value. It also gives you an easy way to keep track of all the different Query Keys that you have in your app.\u003C/p>\n\u003Cp>The second level to this is that if you use the same complex Query Key more than once in the same mutation, it's probably worth assigning it to a variable at the start of each function and just referring to that throughout the function. This is for the same reason as the previous tip - it helps to prevent bugs.\u003C/p>\n\u003Cp>Here's an example of how this might look:\u003C/p>\n\u003Cpre class=\"astro-code dark-plus\" style=\"background-color:#1E1E1E;color:#D4D4D4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"ts\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#569CD6\">const\u003C/span>\u003Cspan style=\"color:#DCDCAA\"> useUpdateGroup\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> = ({\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#9CDCFE\">  groupId\u003C/span>\u003Cspan style=\"color:#D4D4D4\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">}: {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#9CDCFE\">  groupId\u003C/span>\u003Cspan style=\"color:#D4D4D4\">: \u003C/span>\u003Cspan style=\"color:#4EC9B0\">string\u003C/span>\u003Cspan style=\"color:#D4D4D4\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">}) \u003C/span>\u003Cspan style=\"color:#569CD6\">=>\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#569CD6\">  const\u003C/span>\u003Cspan style=\"color:#4FC1FF\"> queryClient\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> = \u003C/span>\u003Cspan style=\"color:#DCDCAA\">useQueryClient\u003C/span>\u003Cspan style=\"color:#D4D4D4\">();\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#569CD6\">  const\u003C/span>\u003Cspan style=\"color:#4FC1FF\"> queryKey\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> = [\u003C/span>\u003Cspan style=\"color:#9CDCFE\">QueryKeys\u003C/span>\u003Cspan style=\"color:#D4D4D4\">.\u003C/span>\u003Cspan style=\"color:#9CDCFE\">group\u003C/span>\u003Cspan style=\"color:#D4D4D4\">, \u003C/span>\u003Cspan style=\"color:#9CDCFE\">surveyId\u003C/span>\u003Cspan style=\"color:#D4D4D4\">]; \u003C/span>\u003Cspan style=\"color:#6A9955\">// Create Query Key\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C586C0\">  return\u003C/span>\u003Cspan style=\"color:#DCDCAA\"> useMutation\u003C/span>\u003Cspan style=\"color:#D4D4D4\">(\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#9CDCFE\">    queryKey\u003C/span>\u003Cspan style=\"color:#D4D4D4\">, \u003C/span>\u003Cspan style=\"color:#6A9955\">// Usage #1\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">    (\u003C/span>\u003Cspan style=\"color:#9CDCFE\">data\u003C/span>\u003Cspan style=\"color:#D4D4D4\">) \u003C/span>\u003Cspan style=\"color:#569CD6\">=>\u003C/span>\u003Cspan style=\"color:#9CDCFE\"> axios\u003C/span>\u003Cspan style=\"color:#D4D4D4\">.\u003C/span>\u003Cspan style=\"color:#DCDCAA\">patch\u003C/span>\u003Cspan style=\"color:#D4D4D4\">(\u003C/span>\u003Cspan style=\"color:#CE9178\">`/api/group/\u003C/span>\u003Cspan style=\"color:#569CD6\">${\u003C/span>\u003Cspan style=\"color:#9CDCFE\">groupId\u003C/span>\u003Cspan style=\"color:#569CD6\">}\u003C/span>\u003Cspan style=\"color:#CE9178\">`\u003C/span>\u003Cspan style=\"color:#D4D4D4\">, \u003C/span>\u003Cspan style=\"color:#9CDCFE\">data\u003C/span>\u003Cspan style=\"color:#D4D4D4\">),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">    {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#DCDCAA\">      onError\u003C/span>\u003Cspan style=\"color:#9CDCFE\">:\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> (\u003C/span>\u003Cspan style=\"color:#9CDCFE\">e\u003C/span>\u003Cspan style=\"color:#D4D4D4\">) \u003C/span>\u003Cspan style=\"color:#569CD6\">=>\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#9CDCFE\">        console\u003C/span>\u003Cspan style=\"color:#D4D4D4\">.\u003C/span>\u003Cspan style=\"color:#DCDCAA\">error\u003C/span>\u003Cspan style=\"color:#D4D4D4\">(\u003C/span>\u003Cspan style=\"color:#9CDCFE\">e\u003C/span>\u003Cspan style=\"color:#D4D4D4\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#9CDCFE\">        queryClient\u003C/span>\u003Cspan style=\"color:#D4D4D4\">.\u003C/span>\u003Cspan style=\"color:#DCDCAA\">invalidateQueries\u003C/span>\u003Cspan style=\"color:#D4D4D4\">(\u003C/span>\u003Cspan style=\"color:#9CDCFE\">queryKey\u003C/span>\u003Cspan style=\"color:#D4D4D4\">); \u003C/span>\u003Cspan style=\"color:#6A9955\">// Usage #2\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">      }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#9CDCFE\">      onMutate\u003C/span>\u003Cspan style=\"color:#D4D4D4\">: (\u003C/span>\u003Cspan style=\"color:#9CDCFE\">data\u003C/span>\u003Cspan style=\"color:#D4D4D4\">) \u003C/span>\u003Cspan style=\"color:#569CD6\">=>\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#9CDCFE\">        queryClient\u003C/span>\u003Cspan style=\"color:#D4D4D4\">.\u003C/span>\u003Cspan style=\"color:#DCDCAA\">cancelQueries\u003C/span>\u003Cspan style=\"color:#D4D4D4\">(\u003C/span>\u003Cspan style=\"color:#9CDCFE\">queryKey\u003C/span>\u003Cspan style=\"color:#D4D4D4\">); \u003C/span>\u003Cspan style=\"color:#6A9955\">// Usage #3\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#569CD6\">        let\u003C/span>\u003Cspan style=\"color:#9CDCFE\"> optimisticUpdate\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> = \u003C/span>\u003Cspan style=\"color:#9CDCFE\">queryClient\u003C/span>\u003Cspan style=\"color:#D4D4D4\">.\u003C/span>\u003Cspan style=\"color:#DCDCAA\">getQueryData\u003C/span>\u003Cspan style=\"color:#D4D4D4\">(\u003C/span>\u003Cspan style=\"color:#9CDCFE\">queryKey\u003C/span>\u003Cspan style=\"color:#D4D4D4\">); \u003C/span>\u003Cspan style=\"color:#6A9955\">// Usage #4\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C586C0\">        if\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> (\u003C/span>\u003Cspan style=\"color:#9CDCFE\">optimisticUpdate\u003C/span>\u003Cspan style=\"color:#D4D4D4\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A9955\">          /* create the updated object */\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#9CDCFE\">          queryClient\u003C/span>\u003Cspan style=\"color:#D4D4D4\">.\u003C/span>\u003Cspan style=\"color:#DCDCAA\">setQueryData\u003C/span>\u003Cspan style=\"color:#D4D4D4\">(\u003C/span>\u003Cspan style=\"color:#9CDCFE\">queryKey\u003C/span>\u003Cspan style=\"color:#D4D4D4\">, \u003C/span>\u003Cspan style=\"color:#9CDCFE\">optimisticUpdate\u003C/span>\u003Cspan style=\"color:#D4D4D4\">); \u003C/span>\u003Cspan style=\"color:#6A9955\">// Usage #5\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">        }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">      },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#DCDCAA\">      onSettled\u003C/span>\u003Cspan style=\"color:#9CDCFE\">:\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> () \u003C/span>\u003Cspan style=\"color:#569CD6\">=>\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#9CDCFE\">        queryClient\u003C/span>\u003Cspan style=\"color:#D4D4D4\">.\u003C/span>\u003Cspan style=\"color:#DCDCAA\">invalidateQueries\u003C/span>\u003Cspan style=\"color:#D4D4D4\">(\u003C/span>\u003Cspan style=\"color:#9CDCFE\">queryKey\u003C/span>\u003Cspan style=\"color:#D4D4D4\">); \u003C/span>\u003Cspan style=\"color:#6A9955\">// Usage #6\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">      },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">    }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">  );\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">};\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>We use the \u003Ccode>queryKey\u003C/code> variable \u003Cstrong>six\u003C/strong> times in the function above, and I've seen mutations that use it even more times than that. Imagine you don't do this, and later realize that you need to change the Query Key. In a function that is much more complicated than the one above, what are the odds of missing one instance and introducing a bug? With this system, you just need to change one thing in the future.\u003C/p>\n\u003Ch2 id=\"2-you-dont-have-to-spread-arrays-or-objects-to-create-optimistic-updates\">2. You don't have to spread arrays or objects to create optimistic updates\u003C/h2>\n\u003Cp>The second easy to fix thing is an antipattern that I see people using all the time in mutations. It comes from being used to dealing with immutable state so frequently that spreading becomes the default behaviour.\u003C/p>\n\u003Cp>Here is one example of how this antipattern might manifest itself.\u003C/p>\n\u003Cpre class=\"astro-code dark-plus\" style=\"background-color:#1E1E1E;color:#D4D4D4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"ts\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#C8C8C8\">onMutate\u003C/span>\u003Cspan style=\"color:#D4D4D4\">: (\u003C/span>\u003Cspan style=\"color:#9CDCFE\">data\u003C/span>\u003Cspan style=\"color:#D4D4D4\">) \u003C/span>\u003Cspan style=\"color:#569CD6\">=>\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#9CDCFE\">  queryClient\u003C/span>\u003Cspan style=\"color:#D4D4D4\">.\u003C/span>\u003Cspan style=\"color:#DCDCAA\">cancelQueries\u003C/span>\u003Cspan style=\"color:#D4D4D4\">(\u003C/span>\u003Cspan style=\"color:#9CDCFE\">queryKey\u003C/span>\u003Cspan style=\"color:#D4D4D4\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#569CD6\">  const\u003C/span>\u003Cspan style=\"color:#4FC1FF\"> optimisticUpdate\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> = \u003C/span>\u003Cspan style=\"color:#9CDCFE\">queryClient\u003C/span>\u003Cspan style=\"color:#D4D4D4\">.\u003C/span>\u003Cspan style=\"color:#DCDCAA\">getQueryData\u003C/span>\u003Cspan style=\"color:#D4D4D4\">(\u003C/span>\u003Cspan style=\"color:#9CDCFE\">queryKey\u003C/span>\u003Cspan style=\"color:#D4D4D4\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C586C0\">  if\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> (\u003C/span>\u003Cspan style=\"color:#9CDCFE\">optimisticUpdate\u003C/span>\u003Cspan style=\"color:#D4D4D4\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#9CDCFE\">    queryClient\u003C/span>\u003Cspan style=\"color:#D4D4D4\">.\u003C/span>\u003Cspan style=\"color:#DCDCAA\">setQueryData\u003C/span>\u003Cspan style=\"color:#D4D4D4\">(\u003C/span>\u003Cspan style=\"color:#9CDCFE\">queryKey\u003C/span>\u003Cspan style=\"color:#D4D4D4\">, {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">      ...\u003C/span>\u003Cspan style=\"color:#9CDCFE\">optimisticUpdate\u003C/span>\u003Cspan style=\"color:#D4D4D4\">, \u003C/span>\u003Cspan style=\"color:#9CDCFE\">foo:\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">        ...\u003C/span>\u003Cspan style=\"color:#9CDCFE\">optimistic\u003C/span>\u003Cspan style=\"color:#D4D4D4\">.\u003C/span>\u003Cspan style=\"color:#9CDCFE\">foo\u003C/span>\u003Cspan style=\"color:#D4D4D4\">, \u003C/span>\u003Cspan style=\"color:#9CDCFE\">bar:\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">          ...\u003C/span>\u003Cspan style=\"color:#9CDCFE\">optimisticUpdate\u003C/span>\u003Cspan style=\"color:#D4D4D4\">.\u003C/span>\u003Cspan style=\"color:#9CDCFE\">foo\u003C/span>\u003Cspan style=\"color:#D4D4D4\">.\u003C/span>\u003Cspan style=\"color:#9CDCFE\">bar\u003C/span>\u003Cspan style=\"color:#D4D4D4\">, \u003C/span>\u003Cspan style=\"color:#9CDCFE\">baz:\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A9955\">            /* etc, imagine how ugly it gets when dealing with nested arrays */\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">          }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">        }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">      }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">    });\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">},\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>\u003Cstrong>You don't have to do this!\u003C/strong>\u003C/p>\n\u003Cp>One 'solution' I see sometimes is people reaching for libraries such as \u003Ca href=\"https://immerjs.github.io/immer/\">Immer\u003C/a>. Immer is a lovely library, but there is an even easier way.\u003C/p>\n\u003Cp>The simplest solution is to just use a mutable variable for your optimistic update. In this particular situation, there is absolutely no advantage to using immutable data.\u003C/p>\n\u003Cpre class=\"astro-code dark-plus\" style=\"background-color:#1E1E1E;color:#D4D4D4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"ts\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#C8C8C8\">onMutate\u003C/span>\u003Cspan style=\"color:#D4D4D4\">: (\u003C/span>\u003Cspan style=\"color:#9CDCFE\">data\u003C/span>\u003Cspan style=\"color:#D4D4D4\">) \u003C/span>\u003Cspan style=\"color:#569CD6\">=>\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#9CDCFE\">  queryClient\u003C/span>\u003Cspan style=\"color:#D4D4D4\">.\u003C/span>\u003Cspan style=\"color:#DCDCAA\">cancelQueries\u003C/span>\u003Cspan style=\"color:#D4D4D4\">(\u003C/span>\u003Cspan style=\"color:#9CDCFE\">queryKey\u003C/span>\u003Cspan style=\"color:#D4D4D4\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#569CD6\">  let\u003C/span>\u003Cspan style=\"color:#9CDCFE\"> optimisticUpdate\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> = \u003C/span>\u003Cspan style=\"color:#9CDCFE\">queryClient\u003C/span>\u003Cspan style=\"color:#D4D4D4\">.\u003C/span>\u003Cspan style=\"color:#DCDCAA\">getQueryData\u003C/span>\u003Cspan style=\"color:#D4D4D4\">(\u003C/span>\u003Cspan style=\"color:#9CDCFE\">queryKey\u003C/span>\u003Cspan style=\"color:#D4D4D4\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C586C0\">  if\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> (\u003C/span>\u003Cspan style=\"color:#9CDCFE\">optimisticUpdate\u003C/span>\u003Cspan style=\"color:#D4D4D4\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#9CDCFE\">    optimisticUpdate\u003C/span>\u003Cspan style=\"color:#D4D4D4\">.\u003C/span>\u003Cspan style=\"color:#9CDCFE\">foo\u003C/span>\u003Cspan style=\"color:#D4D4D4\">.\u003C/span>\u003Cspan style=\"color:#9CDCFE\">bar\u003C/span>\u003Cspan style=\"color:#D4D4D4\">.\u003C/span>\u003Cspan style=\"color:#9CDCFE\">baz\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> = \u003C/span>\u003Cspan style=\"color:#CE9178\">'new value'\u003C/span>\u003Cspan style=\"color:#D4D4D4\">; \u003C/span>\u003Cspan style=\"color:#6A9955\">// modify a deeply nested oject\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#9CDCFE\">    queryClient\u003C/span>\u003Cspan style=\"color:#D4D4D4\">.\u003C/span>\u003Cspan style=\"color:#DCDCAA\">setQueryData\u003C/span>\u003Cspan style=\"color:#D4D4D4\">(\u003C/span>\u003Cspan style=\"color:#9CDCFE\">queryKey\u003C/span>\u003Cspan style=\"color:#D4D4D4\">, \u003C/span>\u003Cspan style=\"color:#9CDCFE\">optimisticUpdate\u003C/span>\u003Cspan style=\"color:#D4D4D4\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">},\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Look at how easy to read this is compared to above. Not only that, but it's also much more difficult to introduce bugs (raise your hand if you've ever made an off-by-one error while using \u003Ccode>Array.slice()\u003C/code>).\u003C/p>\n\u003Cp>I hope these tips were helpful. Thanks for reading and please don't hesitate to contact me if you have any questions or comments.\u003C/p>",{"headings":269,"localImagePaths":276,"remoteImagePaths":277,"frontmatter":278,"imagePaths":281},[270,273],{"depth":99,"slug":271,"text":272},"1-use-variables-as-query-keys","1. Use variables as Query Keys",{"depth":99,"slug":274,"text":275},"2-you-dont-have-to-spread-arrays-or-objects-to-create-optimistic-updates","2. You don't have to spread arrays or objects to create optimistic updates",[],[],{"title":257,"type":85,"description":258,"published":279,"tags":280},"2022/05/28",[261,262],[],"next-is-an-spa",{"id":282,"data":284,"body":293,"filePath":294,"digest":295,"rendered":296},{"title":285,"type":155,"description":286,"published":287,"updated":288,"tags":289,"videoLength":292},"Next.js is an SPA","Fixing a common incorrect assumption",["Date","2023-03-14T15:00:00.000Z"],["Date","2022-03-14T15:00:00.000Z"],[290,216,155,291],"React","Fav",7,"New video about a common misconception that people have about Next.js. I found that this misunderstanding about where we are now makes it more difficult for people to understand why Server Components are so compelling, so I made this video to explain it.\n\n\u003Cdiv class=\"video-container\">\n  \u003Ciframe\n    width=\"100%\"\n    height=\"900px\"\n    src=\"https://www.youtube.com/watch?v=DWRq1nRPUMs\"\n    frameborder=\"0\"\n    allow=\"accelerometer; \n    autoplay; \n    encrypted-media; \n    gyroscope; \n    picture-in-picture\"\n    allowfullscreen\n  >\u003C/iframe>\n\u003C/div>","src/content/content/next-is-an-spa.md","af89d95f8fa5dc2c",{"html":297,"metadata":298},"\u003Cp>New video about a common misconception that people have about Next.js. I found that this misunderstanding about where we are now makes it more difficult for people to understand why Server Components are so compelling, so I made this video to explain it.\u003C/p>\n\u003Cdiv class=\"video-container\">\n  \u003Ciframe width=\"100%\" height=\"900px\" src=\"https://www.youtube.com/watch?v=DWRq1nRPUMs\" frameborder=\"0\" allow=\"accelerometer; \n    autoplay; \n    encrypted-media; \n    gyroscope; \n    picture-in-picture\" allowfullscreen>\u003C/iframe>\n\u003C/div>",{"headings":299,"localImagePaths":300,"remoteImagePaths":301,"frontmatter":302,"imagePaths":306},[],[],[],{"title":285,"type":155,"description":286,"published":303,"updated":304,"tags":305,"videoLength":292},"2023/03/15","2022/03/15",[290,216,155,291],[],"viennajs-trpc",{"id":307,"data":309,"body":315,"filePath":316,"digest":317,"rendered":318},{"title":310,"type":15,"description":182,"published":311,"updated":312,"tags":313},"Talking tRPC at ViennaJS",["Date","2023-03-27T15:00:00.000Z"],["Date","2023-03-27T15:00:00.000Z"],[160,45,314],"ViennaJS","I gave my first talk at a meetup this week, talking about tRPC at ViennaJS.\n\n![Christopher Ehrlich presenting at ViennaJS](/img/content/trpc-viennajs/trpc-viennajs.jpg)\n\n\u003Cp class=\"caption\">...if you have, you might like tRPC\u003C/p>\n\nUnfortunately due to a small misunderstanding there is no recording of this talk. I had initially planned to make my own recording in OBS, but when I saw that the presentations were being run through Streamyard I (incorrectly) assumed that there was going to be a VOD. Lesson learned, will double check with the organizers in the future.\n\nYou can find the slides and a collection of other related resources [here](/misc/trpc-viennajs).\n\nThanks to everyone who came, and I look forward to doing another one soon :)","src/content/content/viennajs-trpc.md","008350aa6f99abe4",{"html":319,"metadata":320},"\u003Cp>I gave my first talk at a meetup this week, talking about tRPC at ViennaJS.\u003C/p>\n\u003Cp>\u003Cimg src=\"/img/content/trpc-viennajs/trpc-viennajs.jpg\" alt=\"Christopher Ehrlich presenting at ViennaJS\">\u003C/p>\n\u003Cp class=\"caption\">...if you have, you might like tRPC\u003C/p>\n\u003Cp>Unfortunately due to a small misunderstanding there is no recording of this talk. I had initially planned to make my own recording in OBS, but when I saw that the presentations were being run through Streamyard I (incorrectly) assumed that there was going to be a VOD. Lesson learned, will double check with the organizers in the future.\u003C/p>\n\u003Cp>You can find the slides and a collection of other related resources \u003Ca href=\"/misc/trpc-viennajs\">here\u003C/a>.\u003C/p>\n\u003Cp>Thanks to everyone who came, and I look forward to doing another one soon :)\u003C/p>",{"headings":321,"localImagePaths":322,"remoteImagePaths":323,"frontmatter":324,"imagePaths":327},[],[],[],{"title":310,"type":15,"description":182,"published":325,"updated":325,"tags":326},"2023/03/28",[160,45,314],[],"contributing-to-oss",{"id":328,"data":330,"body":338,"filePath":339,"digest":340,"rendered":341},{"title":331,"type":85,"description":332,"published":333,"updated":334,"tags":335},"How To Start Contributing to Open Source","Everyone says you should do it. But how?",["Date","2022-05-24T15:00:00.000Z"],["Date","2022-06-19T15:00:00.000Z"],[336,337,291],"Open Source","Free Code Camp","TLDR:\n\n1. Use open source projects\n2. Find issues\n3. Fix them\n\nThere's a bit more to it than that, but that's the basic idea.\n\n## Background\n\nWhen I started taking this programming thing seriously, I heard one thing over and over: \"The best way to learn is to build projects yourself, and to contribute to open source\".\n\nThe first part didn't seem so difficult: Learn a new technology and build something with it. Then learn another new technology and build something that uses both of those technologies. Keep going, maybe swapping out some parts of your stack here and there, until you can build a real app that people use. Of course it took a lot of time and effort to get to that point, but the route to get there seemed very clear.\n\nContributing to Open Source, on the other hand, was not as easy. I several times to find projects to contribute to, but everytime I felt like my skill level was not yet there.\n\nIt got better when I stopped looking for things to contribute, and instead just used open source projects until I found bugs, and then tried fixing them, or at least opening issues.\n\n## My first PR\n\nMy first open source contributions were to FreeCodeCamp, while I was still a student myself. Throughout the API certification I was using Heroku to deploy and submit the lessons and projects. But for the first section of the Quality Assurance certification, the boilerplate failed to deploy to Heroku. The error message said something about the port, so I checked the server code and compared it to previous ones I had used, and found that unlike previous ones which had checked for an environment variable called `PORT`, this one just had `3000` hardcoded.\n\nThus, my first PR was created:\n\nhttps://github.com/freeCodeCamp/boilerplate-mochachai/pull/51\n\n```diff\n- app.listen(3000, function () {\n-   console.log(\"Listening on port \" + 3000);\n+ const port = process.env.PORT || 3000;\n+ app.listen(port, function () {\n+   console.log(\"Listening on port \" + port);\n```\n\n-2 lines, +3 lines. Not exactly grandiose. But it got merged, and I'm sure it will save someone else a bit of frustration in the future.\n\n## My smallest PR\n\nI'm giving some other examples, specifically to show how small a PR can be while still being useful. You don't need to save the world with your first contributions.\n\nTo make this point, here is my smallest PR, at 1 character changed.\n\nWhile working my way through the Node/Exress projects on FreeCodeCamp, my process was to explore the demo projects, and try to reproduce their functionality, including error handling. This meant sending the demo projects a bunch of bad requests to see how they would handle them.\n\nCommon junk values I would try to send for a value that can take an integer would include:\n\n- a string\n- a boolean\n- a decimal value\n- an object\n- nothing\n- zero, if it's not meant to accept that\n- a negative value, if it's not meant to accept that\n- if there is a defined upper bound, that number + 1\n- a very large value\n- etc.\n\nAs legitimate Sudoku values are 1-9, I tried sending 0 as an input, and the API sent back a different response than when inputting other incorrect numbers such as '-5', '2.5', or '999'. So I checked the code, and indeed the check for valid digits had a mistake in it. Thus, I created this change:\n\nhttps://github.com/freeCodeCamp/demo-projects/pull/152/commits/b2e33a331d07111963c55ac91cc455f458570f71\n\n```js\n- if(!Number.isInteger(value) || value \u003C 0 || value > 9) {\n+ if(!Number.isInteger(value) || value \u003C 1 || value > 9) {\n```\n\n## A bad PR\n\nAnother example from the FreeCodeCamp testable projects. This time while working on the project I managed to create a project that passed the test suite despite not functioning properly. So I thought I'd create a test that catches this bug for people submitting the same project in the future.\n\nBut my test had one issue: I fetched a misformed URL.\n\nhttps://github.com/freeCodeCamp/freeCodeCamp/pull/44862\n\n```diff\n  const filterDateBeforeLimitRes = await fetch(\n-   url + `/api/users/${_id}/logs/from=1990-01-02&to=1990-01-04&limit=1`\n+   url + `/api/users/${_id}/logs?from=1990-01-02&to=1990-01-04&limit=1`\n  )\n```\n\nI created a new test to improve the submission process, but I didn't properly test the test, and I had made a type so the test didn't actually test anything (it passes for all possible values). Oh dear!\n\n**How embarrassing!!!**\n\nOr so I thought, until I realized: of course it's good to want to avoid bugs, but there's no point in feeling guilty over them. And having someone else discover them before they cause any actual issues is the best thing that could possibly happen.\n\nWhen a PR you make, maybe even your first PR, gets rejected, the thing to keep in mind is: **this is the system working as intended**. It's nothing to be ashamed of if your PR doesn't get merged, and it happens to much more experienced programmers all the time.\n\n## Conclusion\n\nIf you use software, you'll sooner or later run into an issue that you can fix. So fix it. If your skills are not yet at a point where you can fix it, just move on. BUT: If you give it a try, you might be surprised by how much you can get done with some google searches and some trial and error.\n\nGive it a try, it feels great.\n\n## A freebie\n\nIf you follow this guide, you should easily be able to find projects that could use a bit of help. But if you're looking for advice on where to look, as of May 2022, here's a good place to start: **The tests for the API and Quality Control Projects on freeCodeCamp are missing a lot of edge cases.** I already added some, but there is a ton more to do. If you were able to complete the testing cert, and can read the existing tests to see how they should be written, you are ready to work on these.","src/content/content/contributing-to-oss.md","3d673f4eea92bd49",{"html":342,"metadata":343},"\u003Cp>TLDR:\u003C/p>\n\u003Col>\n\u003Cli>Use open source projects\u003C/li>\n\u003Cli>Find issues\u003C/li>\n\u003Cli>Fix them\u003C/li>\n\u003C/ol>\n\u003Cp>There's a bit more to it than that, but that's the basic idea.\u003C/p>\n\u003Ch2 id=\"background\">Background\u003C/h2>\n\u003Cp>When I started taking this programming thing seriously, I heard one thing over and over: \"The best way to learn is to build projects yourself, and to contribute to open source\".\u003C/p>\n\u003Cp>The first part didn't seem so difficult: Learn a new technology and build something with it. Then learn another new technology and build something that uses both of those technologies. Keep going, maybe swapping out some parts of your stack here and there, until you can build a real app that people use. Of course it took a lot of time and effort to get to that point, but the route to get there seemed very clear.\u003C/p>\n\u003Cp>Contributing to Open Source, on the other hand, was not as easy. I several times to find projects to contribute to, but everytime I felt like my skill level was not yet there.\u003C/p>\n\u003Cp>It got better when I stopped looking for things to contribute, and instead just used open source projects until I found bugs, and then tried fixing them, or at least opening issues.\u003C/p>\n\u003Ch2 id=\"my-first-pr\">My first PR\u003C/h2>\n\u003Cp>My first open source contributions were to FreeCodeCamp, while I was still a student myself. Throughout the API certification I was using Heroku to deploy and submit the lessons and projects. But for the first section of the Quality Assurance certification, the boilerplate failed to deploy to Heroku. The error message said something about the port, so I checked the server code and compared it to previous ones I had used, and found that unlike previous ones which had checked for an environment variable called \u003Ccode>PORT\u003C/code>, this one just had \u003Ccode>3000\u003C/code> hardcoded.\u003C/p>\n\u003Cp>Thus, my first PR was created:\u003C/p>\n\u003Cp>https://github.com/freeCodeCamp/boilerplate-mochachai/pull/51\u003C/p>\n\u003Cpre class=\"astro-code dark-plus\" style=\"background-color:#1E1E1E;color:#D4D4D4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"diff\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#CE9178\">\u003Cspan style=\"user-select: none;\">-\u003C/span> app.listen(3000, function () {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#CE9178\">\u003Cspan style=\"user-select: none;\">-\u003C/span>   console.log(\"Listening on port \" + 3000);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#B5CEA8\">\u003Cspan style=\"user-select: none;\">+\u003C/span> const port = process.env.PORT || 3000;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#B5CEA8\">\u003Cspan style=\"user-select: none;\">+\u003C/span> app.listen(port, function () {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#B5CEA8\">\u003Cspan style=\"user-select: none;\">+\u003C/span>   console.log(\"Listening on port \" + port);\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>-2 lines, +3 lines. Not exactly grandiose. But it got merged, and I'm sure it will save someone else a bit of frustration in the future.\u003C/p>\n\u003Ch2 id=\"my-smallest-pr\">My smallest PR\u003C/h2>\n\u003Cp>I'm giving some other examples, specifically to show how small a PR can be while still being useful. You don't need to save the world with your first contributions.\u003C/p>\n\u003Cp>To make this point, here is my smallest PR, at 1 character changed.\u003C/p>\n\u003Cp>While working my way through the Node/Exress projects on FreeCodeCamp, my process was to explore the demo projects, and try to reproduce their functionality, including error handling. This meant sending the demo projects a bunch of bad requests to see how they would handle them.\u003C/p>\n\u003Cp>Common junk values I would try to send for a value that can take an integer would include:\u003C/p>\n\u003Cul>\n\u003Cli>a string\u003C/li>\n\u003Cli>a boolean\u003C/li>\n\u003Cli>a decimal value\u003C/li>\n\u003Cli>an object\u003C/li>\n\u003Cli>nothing\u003C/li>\n\u003Cli>zero, if it's not meant to accept that\u003C/li>\n\u003Cli>a negative value, if it's not meant to accept that\u003C/li>\n\u003Cli>if there is a defined upper bound, that number + 1\u003C/li>\n\u003Cli>a very large value\u003C/li>\n\u003Cli>etc.\u003C/li>\n\u003C/ul>\n\u003Cp>As legitimate Sudoku values are 1-9, I tried sending 0 as an input, and the API sent back a different response than when inputting other incorrect numbers such as '-5', '2.5', or '999'. So I checked the code, and indeed the check for valid digits had a mistake in it. Thus, I created this change:\u003C/p>\n\u003Cp>https://github.com/freeCodeCamp/demo-projects/pull/152/commits/b2e33a331d07111963c55ac91cc455f458570f71\u003C/p>\n\u003Cpre class=\"astro-code dark-plus\" style=\"background-color:#1E1E1E;color:#D4D4D4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"js\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">- \u003C/span>\u003Cspan style=\"color:#C586C0\">if\u003C/span>\u003Cspan style=\"color:#D4D4D4\">(!\u003C/span>\u003Cspan style=\"color:#9CDCFE\">Number\u003C/span>\u003Cspan style=\"color:#D4D4D4\">.\u003C/span>\u003Cspan style=\"color:#DCDCAA\">isInteger\u003C/span>\u003Cspan style=\"color:#D4D4D4\">(\u003C/span>\u003Cspan style=\"color:#9CDCFE\">value\u003C/span>\u003Cspan style=\"color:#D4D4D4\">) || \u003C/span>\u003Cspan style=\"color:#9CDCFE\">value\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> &#x3C; \u003C/span>\u003Cspan style=\"color:#B5CEA8\">0\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> || \u003C/span>\u003Cspan style=\"color:#9CDCFE\">value\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> > \u003C/span>\u003Cspan style=\"color:#B5CEA8\">9\u003C/span>\u003Cspan style=\"color:#D4D4D4\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">+ \u003C/span>\u003Cspan style=\"color:#C586C0\">if\u003C/span>\u003Cspan style=\"color:#D4D4D4\">(!\u003C/span>\u003Cspan style=\"color:#9CDCFE\">Number\u003C/span>\u003Cspan style=\"color:#D4D4D4\">.\u003C/span>\u003Cspan style=\"color:#DCDCAA\">isInteger\u003C/span>\u003Cspan style=\"color:#D4D4D4\">(\u003C/span>\u003Cspan style=\"color:#9CDCFE\">value\u003C/span>\u003Cspan style=\"color:#D4D4D4\">) || \u003C/span>\u003Cspan style=\"color:#9CDCFE\">value\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> &#x3C; \u003C/span>\u003Cspan style=\"color:#B5CEA8\">1\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> || \u003C/span>\u003Cspan style=\"color:#9CDCFE\">value\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> > \u003C/span>\u003Cspan style=\"color:#B5CEA8\">9\u003C/span>\u003Cspan style=\"color:#D4D4D4\">) {\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Ch2 id=\"a-bad-pr\">A bad PR\u003C/h2>\n\u003Cp>Another example from the FreeCodeCamp testable projects. This time while working on the project I managed to create a project that passed the test suite despite not functioning properly. So I thought I'd create a test that catches this bug for people submitting the same project in the future.\u003C/p>\n\u003Cp>But my test had one issue: I fetched a misformed URL.\u003C/p>\n\u003Cp>https://github.com/freeCodeCamp/freeCodeCamp/pull/44862\u003C/p>\n\u003Cpre class=\"astro-code dark-plus\" style=\"background-color:#1E1E1E;color:#D4D4D4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"diff\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">  const filterDateBeforeLimitRes = await fetch(\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#CE9178\">\u003Cspan style=\"user-select: none;\">-\u003C/span>   url + `/api/users/${_id}/logs/from=1990-01-02&#x26;to=1990-01-04&#x26;limit=1`\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#B5CEA8\">\u003Cspan style=\"user-select: none;\">+\u003C/span>   url + `/api/users/${_id}/logs?from=1990-01-02&#x26;to=1990-01-04&#x26;limit=1`\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">  )\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>I created a new test to improve the submission process, but I didn't properly test the test, and I had made a type so the test didn't actually test anything (it passes for all possible values). Oh dear!\u003C/p>\n\u003Cp>\u003Cstrong>How embarrassing!!!\u003C/strong>\u003C/p>\n\u003Cp>Or so I thought, until I realized: of course it's good to want to avoid bugs, but there's no point in feeling guilty over them. And having someone else discover them before they cause any actual issues is the best thing that could possibly happen.\u003C/p>\n\u003Cp>When a PR you make, maybe even your first PR, gets rejected, the thing to keep in mind is: \u003Cstrong>this is the system working as intended\u003C/strong>. It's nothing to be ashamed of if your PR doesn't get merged, and it happens to much more experienced programmers all the time.\u003C/p>\n\u003Ch2 id=\"conclusion\">Conclusion\u003C/h2>\n\u003Cp>If you use software, you'll sooner or later run into an issue that you can fix. So fix it. If your skills are not yet at a point where you can fix it, just move on. BUT: If you give it a try, you might be surprised by how much you can get done with some google searches and some trial and error.\u003C/p>\n\u003Cp>Give it a try, it feels great.\u003C/p>\n\u003Ch2 id=\"a-freebie\">A freebie\u003C/h2>\n\u003Cp>If you follow this guide, you should easily be able to find projects that could use a bit of help. But if you're looking for advice on where to look, as of May 2022, here's a good place to start: \u003Cstrong>The tests for the API and Quality Control Projects on freeCodeCamp are missing a lot of edge cases.\u003C/strong> I already added some, but there is a ton more to do. If you were able to complete the testing cert, and can read the existing tests to see how they should be written, you are ready to work on these.\u003C/p>",{"headings":344,"localImagePaths":363,"remoteImagePaths":364,"frontmatter":365,"imagePaths":369},[345,348,351,354,357,360],{"depth":99,"slug":346,"text":347},"background","Background",{"depth":99,"slug":349,"text":350},"my-first-pr","My first PR",{"depth":99,"slug":352,"text":353},"my-smallest-pr","My smallest PR",{"depth":99,"slug":355,"text":356},"a-bad-pr","A bad PR",{"depth":99,"slug":358,"text":359},"conclusion","Conclusion",{"depth":99,"slug":361,"text":362},"a-freebie","A freebie",[],[],{"title":331,"type":85,"description":332,"published":366,"updated":367,"tags":368},"2022/05/25","2022/06/20",[336,337,291],[],"typescript",{"id":370,"data":372,"body":379,"filePath":380,"digest":381,"rendered":382},{"title":373,"type":85,"description":374,"published":375,"updated":376,"tags":377},"The case for teaching in TypeScript","Thinking back on my AgentConf appearance",["Date","2023-02-28T15:00:00.000Z"],["Date","2023-02-28T15:00:00.000Z"],[378],"TypeScript","I recently had the immense privilege of taking part in a panel about TypeScript together with [Tejas Kumar](https://twitter.com/TejasKumar_), [Sara Vieira](https://twitter.com/NikkitaFTW), and [Kent C Dodds](https://twitter.com/kentcdodds/) at [AgentConf](https://www.alpine-conferences.com/agent-conf-2023/). The entire conference was wonderful and deserves an article of its own, but I wanted to start with an article about this panel.\n\n![Look mom, I'm on stage!](/img/content/typescript/panel.jpg)\n\n\u003Cp class=\"caption\">Look mom, I'm on stage!\u003C/p>\n\nThere wasn't much of a debate on how applications should be written: they should be written in TypeScript. This is the overall consensus at this point, and not having to talk about this anymore meant that we were able to focus on more interesting topics, like education. The starting point for me was this Tweet from Kent:\n\n\u003Cblockquote class=\"twitter-tweet\">\u003Cp lang=\"en\" dir=\"ltr\">Unless I&#39;m teaching you JavaScript fundamentals, everything I teach will be taught with TypeScript going forward.\u003Cbr>\u003Cbr>TypeScript has won, and it&#39;s only a matter of time you&#39;re using it whether you like it or not.\u003C/p>&mdash; Kent C. Dodds ðŸŒŒ (@kentcdodds) \u003Ca href=\"https://twitter.com/kentcdodds/status/1624595023659667456?ref_src=twsrc%5Etfw\">February 12, 2023\u003C/a>\u003C/blockquote> \u003Cscript async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\">\u003C/script>\n\nEven as a TypeScript maximalist, I was not sure how to feel about this opinion initially. But after the panel, and having thought about it more, I think Kent is right.\n\n## On gatekeeping\n\nA common argument against teaching in TypeScript is that it's gatekeeping. JavaScript is easier, and therefore we should teach in JavaScript. As a self-taught developer who learned online because I didn't have the money for a boot camp, this hits close to home. I don't like gatekeeping, and I certainly don't want to engage in it.\n\nBut I don't think the gatekeeping argument holds up.\n\nTypeScript is table stakes for modern applications. Every year the percentage of vanilla JavaScript codebases gets smaller, and it is likely to hit an asymptote of basically zero in the not too distant future.\n\nNobody in their right mind would argue that teaching React or another framework is gatekeeping, and that we should just teach `document.querySelector()` instead because it is more accessible. That's because nobody writes frontends like that anymore, and no company would hire a frontend developer who doesn't know a framework.\n\nThe same is increasingly true for TypeScript.\n\nTeaching in TypeScript isn't gatekeeping, it's empowering people to make it through a gate that they will inevitably be confronted with.\n\n## On mental overhead\n\nAnother common argument TypeScript requires additional mental overhead compared to JavaScript. This is somewhat true in the most literal sense, but it also misses the point entirely. The mental overhead of learning and using TypeScript is lower than that of learning and using JavaScript.\n\nThe truth is that **using JavaScript doesn't mean you don't have to think about types**.\n\nIt only changes _when_ you have to. TypeScript developers think about types before things go wrong. JavaScript developers think about types after things go wrong.\n\nIn many cases, TypeScript allows you to spend _less_ time thinking about types. Think about this component:\n\n```js\nfunction SomeComponent(props) {\n  // 200 lines of stuff\n}\n```\n\nWhat props should you pass to this component, and what types should they be? In JavaScript, you will need to read the component to find out, and hope you don't make any false assumptions. In TypeScript, you can read the type definition or even just let autocomplete tell you.\n\nWhat requires more overhead: a language [with endless illogical edge cases](https://www.youtube.com/watch?v=et8xNAc2ic8), or one that uses types to mitigate most of these?\n\nI have taught TypeScript to several JavaScript developers on my team. They are productive in it within an hour or two, and it doesn't take long until they work significantly faster than they did in JavaScript.\n\n## Learning TypeScript keeps getting easier\n\nBut what about all of the weird esoteric stuff that TypeScript has? Generics, Mapped Types, and whatever else [Matt Pocock](https://twitter.com/mattpocockuk/) is teaching these days? Those are quite difficult, and they don't exist in JavaScript, right?\n\n**These things are not necessary for a Junior Developer writing modern web application code.**\n\nIf you know all of the primitives and can type objects and functions, you're ready to jump into a modern TypeScript codebase. Look at this example of a route handler and a page that calls it, implemented using tRPC.\n\n```ts\n// src/server/api/routers/example.ts\nexport const exampleRouter = createTRPCRouter({\n  hello: publicProcedure\n    .input(z.object({ text: z.string() }))\n    .query(({ input }) => {\n      return {\n        greeting: `Hello ${input.text}`,\n      };\n    }),\n});\n\n// src/pages/index.tsx\nfunction HomePage() {\n  const hello = api.post.byId.useQuery({ id: \"1\" });\n\n  return (\n    \u003Cdiv>\n      \u003Ch1>Welcome to this page\u003C/h1>\n      \u003Cpre>{JSON.stringify(hello.data, null, 2)}\u003C/pre>\n    \u003C/div>\n  );\n}\n```\n\nDo you notice anything about this code snippet? **There is not a single explicit type to be found**! And yet it gives end-to-end typesafety and autocomplete. It looks identical to how it would look in JavaScript, but you get all of the tooling benefits that TypeScript provides.\n\nLibrary authors work hard to provide this level of developer experience, and it makes working in a modern TypeScript project a blast!\n\nAlso the resources for learning TypeScript keep getting bettter. Two free resources I would recommend are:\n\n- Matt Pocock's [Beginner's TypeScript](https://www.totaltypescript.com/tutorials/beginners-typescript)\n- Jack Herrington's [No BS TS playlist](https://www.youtube.com/watch?v=LKVHFHJsiO0&list=PLNqp92_EXZBJYFrpEzdO2EapvU0GOJ09n)\n- But most importantly, just starting to use TypeScript in projects.\n\n## There are still growing pains\n\nThere are still moments where TypeScript frustrates me and makes me feel like a hypocrite for recommending it. These fall into two categories: bad library types, and the TypeScript server going crazy.\n\nUnfortunately some libraries still have issues with their built-in types. One offender here is Next.js. Take this example:\n\n```ts\nexport default function GsspPage(\n  props: InferGetServerSidePropsType\u003Ctypeof getServerSideProps>,\n  // ^? (parameter) props: { [key: string]: any; }\n) {\n  const { data: session } = useSession();\n  return \u003Cpre>{JSON.stringify(props, null, 2)}\u003C/pre>;\n}\n\nexport const getServerSideProps: GetServerSideProps = async (ctx) => {\n  return {\n    props: {\n      session: await getServerAuthSession(ctx),\n      foo: \"bar\",\n    },\n  };\n};\n```\n\nWe are using the `GetServerSideProps` and `InferGetServerSidePropsType` types, so it seems resonable to believe that our props would be typed correctly, right? **Wrong**. The props are typed as any. The solution? Don't use the `GetServerSideProps` type, and instead type `ctx` as `GetServerSidePropsContext`. _Obviously_.\n\n```ts\nexport const getServerSideProps = async (ctx: GetServerSidePropsContext) => {\n  return {\n    props: {\n      session: await getServerAuthSession(ctx),\n      foo: \"bar\",\n    },\n  };\n};\n```\n\n\u003Cp class=\"caption\">Duh.\u003C/p>\n\nSnark aside, things like this still occur much more often than they should.\n\nThings are rapidly improving in this regard though. On the backend, [Fastify](https://www.fastify.io/) and [Nitro](https://nitro.unjs.io/) are typed much better than Express was, and [tRPC](https://trpc.io/) sets a new standard for typesafety over the wire. The same is true for the frontend, for example [MapleLeaf](https://twitter.com/heyImMapleLeaf) has been doing a lot for the type safety in [Remix](http://remix.run/)\n\nThe other issue is the TypeScript server. Occasionally, and especially in projects that use a lot of inference through libraries like Zod, it will slow down to a crawl or even incorrectly report type errors where there aren't any.\n\nThe solution is simple: hit CMD + Shift + P, and restart the TypeScript server. But beginners might not know about this, and either way it doesn't detract from the main point: **The TypeScript server should not show false positives under any circumstances**.\n\n## How we teach things determines how people will use them\n\nThe patterns you show in your documentation are the patterns that people using your library will implement. A large part of programming is pattern recognition, and the first pattern people see is often the one they will remember and keep using.\n\nIf you want people to use your library with TypeScript, you should teach it with TypeScript. Writing the documentation in JavaScript leads to bad documentation for TypeScript users, who are the overwhelming majority at this point.\n\nWriting docs in both TypeScript and JavaScript is of course an option, but most projects are already perpetually behind with their docs, without having to write each code snippet twice.\n\n## The goal is to help people build stuff\n\nLet's not forget why we are educating developers in first place: to help them build stuff. The simple truth is that TypeScript has become the language of full-stack web development, and teaching anything other than JavaScript fundamentals in JavaScript feels dishonest at this point. Not many new projects are being started in JavaScript, and rightfully so, so why are we still insisting on using it for docs and courses? By teaching TypeScript early, you are empowering new developers to move faster, be less frustrated, and build better things.\n\nThat being said, **this entire post is big time bikeshedding**. I learned JavaScript first and only learned TypeScript much later. I ended up ok. And the number one resource I recommend to people who want to learn programming is [freeCodeCamp](https://www.freecodecamp.org/), which still teaches entirely in JavaScript.\n\nSo why do I recommend it even though it's in JavaScript? Based on my experience as a teacher and university lecturer, I believe that the most important things a course can have are:\n\n- **Project-based** - Students should be spending most of their time self-directed building projects, running into problems, and figuring out how to fix them. Not following a video of someone explaining something.\n- **Has a community of people supporting each other** - I believe in the power of self-directed learning, but it can be hard to stay motivated sometimes when you're alone. Being around other motivated people is infectious. Another nice thing about freeCodeCamp in this regard is that the more experienced learners often stick around and help the newbies who are following in their footsteps.\n- **Nonlinear** - A big factor of being motivated is interest. A nonlinear program allows learners to pursue the things that they are interested in.\n\nWhile I strongly believe that teaching TypeScript-first is better, It's not even in the top 3 factors that I use to evaluate material for beginners.\n\n## Wrapping up\n\nSo what's the conclusion then?\n\n1. If you are creating educational materials, make them TypeScript first.\n2. If you are a learner, TypeScript-first materials are better but it's not the most important factor.\n\n## Thanks for reading!\n\nWhat do you think? Please feel free to [contact me](/contact) and share your thoughts on this topic.","src/content/content/typescript.md","4cdef49d1770908d",{"html":383,"metadata":384},"\u003Cp>I recently had the immense privilege of taking part in a panel about TypeScript together with \u003Ca href=\"https://twitter.com/TejasKumar_\">Tejas Kumar\u003C/a>, \u003Ca href=\"https://twitter.com/NikkitaFTW\">Sara Vieira\u003C/a>, and \u003Ca href=\"https://twitter.com/kentcdodds/\">Kent C Dodds\u003C/a> at \u003Ca href=\"https://www.alpine-conferences.com/agent-conf-2023/\">AgentConf\u003C/a>. The entire conference was wonderful and deserves an article of its own, but I wanted to start with an article about this panel.\u003C/p>\n\u003Cp>\u003Cimg src=\"/img/content/typescript/panel.jpg\" alt=\"Look mom, I&#x27;m on stage!\">\u003C/p>\n\u003Cp class=\"caption\">Look mom, I'm on stage!\u003C/p>\n\u003Cp>There wasn't much of a debate on how applications should be written: they should be written in TypeScript. This is the overall consensus at this point, and not having to talk about this anymore meant that we were able to focus on more interesting topics, like education. The starting point for me was this Tweet from Kent:\u003C/p>\n\u003Cblockquote class=\"twitter-tweet\">\u003Cp lang=\"en\" dir=\"ltr\">Unless I'm teaching you JavaScript fundamentals, everything I teach will be taught with TypeScript going forward.\u003Cbr>\u003Cbr>TypeScript has won, and it's only a matter of time you're using it whether you like it or not.\u003C/p>â€” Kent C. Dodds ðŸŒŒ (@kentcdodds) \u003Ca href=\"https://twitter.com/kentcdodds/status/1624595023659667456?ref_src=twsrc%5Etfw\">February 12, 2023\u003C/a>\u003C/blockquote> \u003Cscript async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\">\u003C/script>\n\u003Cp>Even as a TypeScript maximalist, I was not sure how to feel about this opinion initially. But after the panel, and having thought about it more, I think Kent is right.\u003C/p>\n\u003Ch2 id=\"on-gatekeeping\">On gatekeeping\u003C/h2>\n\u003Cp>A common argument against teaching in TypeScript is that it's gatekeeping. JavaScript is easier, and therefore we should teach in JavaScript. As a self-taught developer who learned online because I didn't have the money for a boot camp, this hits close to home. I don't like gatekeeping, and I certainly don't want to engage in it.\u003C/p>\n\u003Cp>But I don't think the gatekeeping argument holds up.\u003C/p>\n\u003Cp>TypeScript is table stakes for modern applications. Every year the percentage of vanilla JavaScript codebases gets smaller, and it is likely to hit an asymptote of basically zero in the not too distant future.\u003C/p>\n\u003Cp>Nobody in their right mind would argue that teaching React or another framework is gatekeeping, and that we should just teach \u003Ccode>document.querySelector()\u003C/code> instead because it is more accessible. That's because nobody writes frontends like that anymore, and no company would hire a frontend developer who doesn't know a framework.\u003C/p>\n\u003Cp>The same is increasingly true for TypeScript.\u003C/p>\n\u003Cp>Teaching in TypeScript isn't gatekeeping, it's empowering people to make it through a gate that they will inevitably be confronted with.\u003C/p>\n\u003Ch2 id=\"on-mental-overhead\">On mental overhead\u003C/h2>\n\u003Cp>Another common argument TypeScript requires additional mental overhead compared to JavaScript. This is somewhat true in the most literal sense, but it also misses the point entirely. The mental overhead of learning and using TypeScript is lower than that of learning and using JavaScript.\u003C/p>\n\u003Cp>The truth is that \u003Cstrong>using JavaScript doesn't mean you don't have to think about types\u003C/strong>.\u003C/p>\n\u003Cp>It only changes \u003Cem>when\u003C/em> you have to. TypeScript developers think about types before things go wrong. JavaScript developers think about types after things go wrong.\u003C/p>\n\u003Cp>In many cases, TypeScript allows you to spend \u003Cem>less\u003C/em> time thinking about types. Think about this component:\u003C/p>\n\u003Cpre class=\"astro-code dark-plus\" style=\"background-color:#1E1E1E;color:#D4D4D4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"js\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#569CD6\">function\u003C/span>\u003Cspan style=\"color:#DCDCAA\"> SomeComponent\u003C/span>\u003Cspan style=\"color:#D4D4D4\">(\u003C/span>\u003Cspan style=\"color:#9CDCFE\">props\u003C/span>\u003Cspan style=\"color:#D4D4D4\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A9955\">  // 200 lines of stuff\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>What props should you pass to this component, and what types should they be? In JavaScript, you will need to read the component to find out, and hope you don't make any false assumptions. In TypeScript, you can read the type definition or even just let autocomplete tell you.\u003C/p>\n\u003Cp>What requires more overhead: a language \u003Ca href=\"https://www.youtube.com/watch?v=et8xNAc2ic8\">with endless illogical edge cases\u003C/a>, or one that uses types to mitigate most of these?\u003C/p>\n\u003Cp>I have taught TypeScript to several JavaScript developers on my team. They are productive in it within an hour or two, and it doesn't take long until they work significantly faster than they did in JavaScript.\u003C/p>\n\u003Ch2 id=\"learning-typescript-keeps-getting-easier\">Learning TypeScript keeps getting easier\u003C/h2>\n\u003Cp>But what about all of the weird esoteric stuff that TypeScript has? Generics, Mapped Types, and whatever else \u003Ca href=\"https://twitter.com/mattpocockuk/\">Matt Pocock\u003C/a> is teaching these days? Those are quite difficult, and they don't exist in JavaScript, right?\u003C/p>\n\u003Cp>\u003Cstrong>These things are not necessary for a Junior Developer writing modern web application code.\u003C/strong>\u003C/p>\n\u003Cp>If you know all of the primitives and can type objects and functions, you're ready to jump into a modern TypeScript codebase. Look at this example of a route handler and a page that calls it, implemented using tRPC.\u003C/p>\n\u003Cpre class=\"astro-code dark-plus\" style=\"background-color:#1E1E1E;color:#D4D4D4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"ts\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A9955\">// src/server/api/routers/example.ts\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C586C0\">export\u003C/span>\u003Cspan style=\"color:#569CD6\"> const\u003C/span>\u003Cspan style=\"color:#4FC1FF\"> exampleRouter\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> = \u003C/span>\u003Cspan style=\"color:#DCDCAA\">createTRPCRouter\u003C/span>\u003Cspan style=\"color:#D4D4D4\">({\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#9CDCFE\">  hello:\u003C/span>\u003Cspan style=\"color:#9CDCFE\"> publicProcedure\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">    .\u003C/span>\u003Cspan style=\"color:#DCDCAA\">input\u003C/span>\u003Cspan style=\"color:#D4D4D4\">(\u003C/span>\u003Cspan style=\"color:#9CDCFE\">z\u003C/span>\u003Cspan style=\"color:#D4D4D4\">.\u003C/span>\u003Cspan style=\"color:#DCDCAA\">object\u003C/span>\u003Cspan style=\"color:#D4D4D4\">({ \u003C/span>\u003Cspan style=\"color:#9CDCFE\">text:\u003C/span>\u003Cspan style=\"color:#9CDCFE\"> z\u003C/span>\u003Cspan style=\"color:#D4D4D4\">.\u003C/span>\u003Cspan style=\"color:#DCDCAA\">string\u003C/span>\u003Cspan style=\"color:#D4D4D4\">() }))\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">    .\u003C/span>\u003Cspan style=\"color:#DCDCAA\">query\u003C/span>\u003Cspan style=\"color:#D4D4D4\">(({ \u003C/span>\u003Cspan style=\"color:#9CDCFE\">input\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> }) \u003C/span>\u003Cspan style=\"color:#569CD6\">=>\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C586C0\">      return\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#9CDCFE\">        greeting:\u003C/span>\u003Cspan style=\"color:#CE9178\"> `Hello \u003C/span>\u003Cspan style=\"color:#569CD6\">${\u003C/span>\u003Cspan style=\"color:#9CDCFE\">input\u003C/span>\u003Cspan style=\"color:#D4D4D4\">.\u003C/span>\u003Cspan style=\"color:#9CDCFE\">text\u003C/span>\u003Cspan style=\"color:#569CD6\">}\u003C/span>\u003Cspan style=\"color:#CE9178\">`\u003C/span>\u003Cspan style=\"color:#D4D4D4\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">      };\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">    }),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">});\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A9955\">// src/pages/index.tsx\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#569CD6\">function\u003C/span>\u003Cspan style=\"color:#DCDCAA\"> HomePage\u003C/span>\u003Cspan style=\"color:#D4D4D4\">() {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#569CD6\">  const\u003C/span>\u003Cspan style=\"color:#4FC1FF\"> hello\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> = \u003C/span>\u003Cspan style=\"color:#9CDCFE\">api\u003C/span>\u003Cspan style=\"color:#D4D4D4\">.\u003C/span>\u003Cspan style=\"color:#9CDCFE\">post\u003C/span>\u003Cspan style=\"color:#D4D4D4\">.\u003C/span>\u003Cspan style=\"color:#9CDCFE\">byId\u003C/span>\u003Cspan style=\"color:#D4D4D4\">.\u003C/span>\u003Cspan style=\"color:#DCDCAA\">useQuery\u003C/span>\u003Cspan style=\"color:#D4D4D4\">({ \u003C/span>\u003Cspan style=\"color:#9CDCFE\">id:\u003C/span>\u003Cspan style=\"color:#CE9178\"> \"1\"\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> });\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C586C0\">  return\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> (\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">    &#x3C;\u003C/span>\u003Cspan style=\"color:#4EC9B0\">div\u003C/span>\u003Cspan style=\"color:#D4D4D4\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">      &#x3C;\u003C/span>\u003Cspan style=\"color:#4EC9B0\">h1\u003C/span>\u003Cspan style=\"color:#D4D4D4\">>\u003C/span>\u003Cspan style=\"color:#9CDCFE\">Welcome\u003C/span>\u003Cspan style=\"color:#9CDCFE\"> to\u003C/span>\u003Cspan style=\"color:#569CD6\"> this\u003C/span>\u003Cspan style=\"color:#9CDCFE\"> page\u003C/span>\u003Cspan style=\"color:#D4D4D4\">&#x3C;/\u003C/span>\u003Cspan style=\"color:#9CDCFE\">h1\u003C/span>\u003Cspan style=\"color:#D4D4D4\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">      &#x3C;\u003C/span>\u003Cspan style=\"color:#4EC9B0\">pre\u003C/span>\u003Cspan style=\"color:#D4D4D4\">>{JSON.stringify(hello.\u003C/span>\u003Cspan style=\"color:#9CDCFE\">data\u003C/span>\u003Cspan style=\"color:#D4D4D4\">, \u003C/span>\u003Cspan style=\"color:#9CDCFE\">null\u003C/span>\u003Cspan style=\"color:#D4D4D4\">, \u003C/span>\u003Cspan style=\"color:#B5CEA8\">2\u003C/span>\u003Cspan style=\"color:#9CDCFE\">)\u003C/span>\u003Cspan style=\"color:#D4D4D4\">}&#x3C;/\u003C/span>\u003Cspan style=\"color:#9CDCFE\">pre\u003C/span>\u003Cspan style=\"color:#D4D4D4\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">    &#x3C;/\u003C/span>\u003Cspan style=\"color:#9CDCFE\">div\u003C/span>\u003Cspan style=\"color:#D4D4D4\">>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">  );\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">}\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Do you notice anything about this code snippet? \u003Cstrong>There is not a single explicit type to be found\u003C/strong>! And yet it gives end-to-end typesafety and autocomplete. It looks identical to how it would look in JavaScript, but you get all of the tooling benefits that TypeScript provides.\u003C/p>\n\u003Cp>Library authors work hard to provide this level of developer experience, and it makes working in a modern TypeScript project a blast!\u003C/p>\n\u003Cp>Also the resources for learning TypeScript keep getting bettter. Two free resources I would recommend are:\u003C/p>\n\u003Cul>\n\u003Cli>Matt Pocock's \u003Ca href=\"https://www.totaltypescript.com/tutorials/beginners-typescript\">Beginner's TypeScript\u003C/a>\u003C/li>\n\u003Cli>Jack Herrington's \u003Ca href=\"https://www.youtube.com/watch?v=LKVHFHJsiO0&#x26;list=PLNqp92_EXZBJYFrpEzdO2EapvU0GOJ09n\">No BS TS playlist\u003C/a>\u003C/li>\n\u003Cli>But most importantly, just starting to use TypeScript in projects.\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"there-are-still-growing-pains\">There are still growing pains\u003C/h2>\n\u003Cp>There are still moments where TypeScript frustrates me and makes me feel like a hypocrite for recommending it. These fall into two categories: bad library types, and the TypeScript server going crazy.\u003C/p>\n\u003Cp>Unfortunately some libraries still have issues with their built-in types. One offender here is Next.js. Take this example:\u003C/p>\n\u003Cpre class=\"astro-code dark-plus\" style=\"background-color:#1E1E1E;color:#D4D4D4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"ts\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#C586C0\">export\u003C/span>\u003Cspan style=\"color:#C586C0\"> default\u003C/span>\u003Cspan style=\"color:#569CD6\"> function\u003C/span>\u003Cspan style=\"color:#DCDCAA\"> GsspPage\u003C/span>\u003Cspan style=\"color:#D4D4D4\">(\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#9CDCFE\">  props\u003C/span>\u003Cspan style=\"color:#D4D4D4\">: \u003C/span>\u003Cspan style=\"color:#4EC9B0\">InferGetServerSidePropsType\u003C/span>\u003Cspan style=\"color:#D4D4D4\">&#x3C;\u003C/span>\u003Cspan style=\"color:#569CD6\">typeof\u003C/span>\u003Cspan style=\"color:#9CDCFE\"> getServerSideProps\u003C/span>\u003Cspan style=\"color:#D4D4D4\">>,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A9955\">  // ^? (parameter) props: { [key: string]: any; }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#569CD6\">  const\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> { \u003C/span>\u003Cspan style=\"color:#9CDCFE\">data\u003C/span>\u003Cspan style=\"color:#D4D4D4\">: \u003C/span>\u003Cspan style=\"color:#4FC1FF\">session\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> } = \u003C/span>\u003Cspan style=\"color:#DCDCAA\">useSession\u003C/span>\u003Cspan style=\"color:#D4D4D4\">();\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C586C0\">  return\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> &#x3C;\u003C/span>\u003Cspan style=\"color:#4EC9B0\">pre\u003C/span>\u003Cspan style=\"color:#D4D4D4\">>{JSON.stringify(\u003C/span>\u003Cspan style=\"color:#9CDCFE\">props\u003C/span>\u003Cspan style=\"color:#D4D4D4\">, \u003C/span>\u003Cspan style=\"color:#9CDCFE\">null\u003C/span>\u003Cspan style=\"color:#D4D4D4\">, \u003C/span>\u003Cspan style=\"color:#B5CEA8\">2\u003C/span>\u003Cspan style=\"color:#9CDCFE\">)\u003C/span>\u003Cspan style=\"color:#D4D4D4\">}&#x3C;/\u003C/span>\u003Cspan style=\"color:#9CDCFE\">pre\u003C/span>\u003Cspan style=\"color:#D4D4D4\">>;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C586C0\">export\u003C/span>\u003Cspan style=\"color:#569CD6\"> const\u003C/span>\u003Cspan style=\"color:#DCDCAA\"> getServerSideProps\u003C/span>\u003Cspan style=\"color:#D4D4D4\">: \u003C/span>\u003Cspan style=\"color:#4EC9B0\">GetServerSideProps\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> = \u003C/span>\u003Cspan style=\"color:#569CD6\">async\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> (\u003C/span>\u003Cspan style=\"color:#9CDCFE\">ctx\u003C/span>\u003Cspan style=\"color:#D4D4D4\">) \u003C/span>\u003Cspan style=\"color:#569CD6\">=>\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C586C0\">  return\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#9CDCFE\">    props:\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#9CDCFE\">      session:\u003C/span>\u003Cspan style=\"color:#C586C0\"> await\u003C/span>\u003Cspan style=\"color:#DCDCAA\"> getServerAuthSession\u003C/span>\u003Cspan style=\"color:#D4D4D4\">(\u003C/span>\u003Cspan style=\"color:#9CDCFE\">ctx\u003C/span>\u003Cspan style=\"color:#D4D4D4\">),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#9CDCFE\">      foo:\u003C/span>\u003Cspan style=\"color:#CE9178\"> \"bar\"\u003C/span>\u003Cspan style=\"color:#D4D4D4\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">    },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">  };\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">};\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>We are using the \u003Ccode>GetServerSideProps\u003C/code> and \u003Ccode>InferGetServerSidePropsType\u003C/code> types, so it seems resonable to believe that our props would be typed correctly, right? \u003Cstrong>Wrong\u003C/strong>. The props are typed as any. The solution? Don't use the \u003Ccode>GetServerSideProps\u003C/code> type, and instead type \u003Ccode>ctx\u003C/code> as \u003Ccode>GetServerSidePropsContext\u003C/code>. \u003Cem>Obviously\u003C/em>.\u003C/p>\n\u003Cpre class=\"astro-code dark-plus\" style=\"background-color:#1E1E1E;color:#D4D4D4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"ts\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#C586C0\">export\u003C/span>\u003Cspan style=\"color:#569CD6\"> const\u003C/span>\u003Cspan style=\"color:#DCDCAA\"> getServerSideProps\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> = \u003C/span>\u003Cspan style=\"color:#569CD6\">async\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> (\u003C/span>\u003Cspan style=\"color:#9CDCFE\">ctx\u003C/span>\u003Cspan style=\"color:#D4D4D4\">: \u003C/span>\u003Cspan style=\"color:#4EC9B0\">GetServerSidePropsContext\u003C/span>\u003Cspan style=\"color:#D4D4D4\">) \u003C/span>\u003Cspan style=\"color:#569CD6\">=>\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C586C0\">  return\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#9CDCFE\">    props:\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#9CDCFE\">      session:\u003C/span>\u003Cspan style=\"color:#C586C0\"> await\u003C/span>\u003Cspan style=\"color:#DCDCAA\"> getServerAuthSession\u003C/span>\u003Cspan style=\"color:#D4D4D4\">(\u003C/span>\u003Cspan style=\"color:#9CDCFE\">ctx\u003C/span>\u003Cspan style=\"color:#D4D4D4\">),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#9CDCFE\">      foo:\u003C/span>\u003Cspan style=\"color:#CE9178\"> \"bar\"\u003C/span>\u003Cspan style=\"color:#D4D4D4\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">    },\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">  };\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">};\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp class=\"caption\">Duh.\u003C/p>\n\u003Cp>Snark aside, things like this still occur much more often than they should.\u003C/p>\n\u003Cp>Things are rapidly improving in this regard though. On the backend, \u003Ca href=\"https://www.fastify.io/\">Fastify\u003C/a> and \u003Ca href=\"https://nitro.unjs.io/\">Nitro\u003C/a> are typed much better than Express was, and \u003Ca href=\"https://trpc.io/\">tRPC\u003C/a> sets a new standard for typesafety over the wire. The same is true for the frontend, for example \u003Ca href=\"https://twitter.com/heyImMapleLeaf\">MapleLeaf\u003C/a> has been doing a lot for the type safety in \u003Ca href=\"http://remix.run/\">Remix\u003C/a>\u003C/p>\n\u003Cp>The other issue is the TypeScript server. Occasionally, and especially in projects that use a lot of inference through libraries like Zod, it will slow down to a crawl or even incorrectly report type errors where there aren't any.\u003C/p>\n\u003Cp>The solution is simple: hit CMD + Shift + P, and restart the TypeScript server. But beginners might not know about this, and either way it doesn't detract from the main point: \u003Cstrong>The TypeScript server should not show false positives under any circumstances\u003C/strong>.\u003C/p>\n\u003Ch2 id=\"how-we-teach-things-determines-how-people-will-use-them\">How we teach things determines how people will use them\u003C/h2>\n\u003Cp>The patterns you show in your documentation are the patterns that people using your library will implement. A large part of programming is pattern recognition, and the first pattern people see is often the one they will remember and keep using.\u003C/p>\n\u003Cp>If you want people to use your library with TypeScript, you should teach it with TypeScript. Writing the documentation in JavaScript leads to bad documentation for TypeScript users, who are the overwhelming majority at this point.\u003C/p>\n\u003Cp>Writing docs in both TypeScript and JavaScript is of course an option, but most projects are already perpetually behind with their docs, without having to write each code snippet twice.\u003C/p>\n\u003Ch2 id=\"the-goal-is-to-help-people-build-stuff\">The goal is to help people build stuff\u003C/h2>\n\u003Cp>Let's not forget why we are educating developers in first place: to help them build stuff. The simple truth is that TypeScript has become the language of full-stack web development, and teaching anything other than JavaScript fundamentals in JavaScript feels dishonest at this point. Not many new projects are being started in JavaScript, and rightfully so, so why are we still insisting on using it for docs and courses? By teaching TypeScript early, you are empowering new developers to move faster, be less frustrated, and build better things.\u003C/p>\n\u003Cp>That being said, \u003Cstrong>this entire post is big time bikeshedding\u003C/strong>. I learned JavaScript first and only learned TypeScript much later. I ended up ok. And the number one resource I recommend to people who want to learn programming is \u003Ca href=\"https://www.freecodecamp.org/\">freeCodeCamp\u003C/a>, which still teaches entirely in JavaScript.\u003C/p>\n\u003Cp>So why do I recommend it even though it's in JavaScript? Based on my experience as a teacher and university lecturer, I believe that the most important things a course can have are:\u003C/p>\n\u003Cul>\n\u003Cli>\u003Cstrong>Project-based\u003C/strong> - Students should be spending most of their time self-directed building projects, running into problems, and figuring out how to fix them. Not following a video of someone explaining something.\u003C/li>\n\u003Cli>\u003Cstrong>Has a community of people supporting each other\u003C/strong> - I believe in the power of self-directed learning, but it can be hard to stay motivated sometimes when you're alone. Being around other motivated people is infectious. Another nice thing about freeCodeCamp in this regard is that the more experienced learners often stick around and help the newbies who are following in their footsteps.\u003C/li>\n\u003Cli>\u003Cstrong>Nonlinear\u003C/strong> - A big factor of being motivated is interest. A nonlinear program allows learners to pursue the things that they are interested in.\u003C/li>\n\u003C/ul>\n\u003Cp>While I strongly believe that teaching TypeScript-first is better, It's not even in the top 3 factors that I use to evaluate material for beginners.\u003C/p>\n\u003Ch2 id=\"wrapping-up\">Wrapping up\u003C/h2>\n\u003Cp>So what's the conclusion then?\u003C/p>\n\u003Col>\n\u003Cli>If you are creating educational materials, make them TypeScript first.\u003C/li>\n\u003Cli>If you are a learner, TypeScript-first materials are better but it's not the most important factor.\u003C/li>\n\u003C/ol>\n\u003Ch2 id=\"thanks-for-reading\">Thanks for reading!\u003C/h2>\n\u003Cp>What do you think? Please feel free to \u003Ca href=\"/contact\">contact me\u003C/a> and share your thoughts on this topic.\u003C/p>",{"headings":385,"localImagePaths":410,"remoteImagePaths":411,"frontmatter":412,"imagePaths":415},[386,389,392,395,398,401,404,407],{"depth":99,"slug":387,"text":388},"on-gatekeeping","On gatekeeping",{"depth":99,"slug":390,"text":391},"on-mental-overhead","On mental overhead",{"depth":99,"slug":393,"text":394},"learning-typescript-keeps-getting-easier","Learning TypeScript keeps getting easier",{"depth":99,"slug":396,"text":397},"there-are-still-growing-pains","There are still growing pains",{"depth":99,"slug":399,"text":400},"how-we-teach-things-determines-how-people-will-use-them","How we teach things determines how people will use them",{"depth":99,"slug":402,"text":403},"the-goal-is-to-help-people-build-stuff","The goal is to help people build stuff",{"depth":99,"slug":405,"text":406},"wrapping-up","Wrapping up",{"depth":99,"slug":408,"text":409},"thanks-for-reading","Thanks for reading!",[],[],{"title":373,"type":85,"description":374,"published":413,"updated":413,"tags":414},"2023/03/01",[378],[],"next-hydration-error",{"id":416,"data":418,"body":425,"filePath":426,"digest":427,"rendered":428},{"title":419,"type":85,"description":420,"published":421,"tags":422},"LocalStorage and Hydration errors in Next.js","Solving a common frustration",["Date","2022-03-19T15:00:00.000Z"],[216,423,424],"LocalStorage","Debugging","## What is a Hydration Error\n\nFront-End development goes in cycles. First started with static HTML pages, then we added JavaScript and AJAX to get more front-end interactivity. After this focus returned back to the server with Jinja templates and similar, which allowed us to render almost the entire website on the server, only including some small pieces of JavaScript for interactivity that can only exist in the frontend. Then the pendulum swung all the way in the opposite direction with Single Page Apps, where we just send the client a mostly empty HTML page and some JavaScript that then populates this page.\n\nSPAs give unprecedented interactivity and developer experience, but until the browser is done figuring out to do with all that JavaScript, the user can't do anything. That's not a great experience!\n\nFor example if we want to view a page that shows some data from an API, assuming the data is not cached locally, we have to:\n\n1. Client request the page\n2. Server sends the page\n3. Client renders the page, without the data\n4. Client a request for the data in useEffect() or similar\n5. Server makes DB request for the data\n6. Server sends back data\n7. Client inserts the data into the page\n\nIn a Server Side Rendered App, we can instead do:\n\n1. Client requests the page\n2. Server makes a DB request for the data\n3. Server renders the page, including the data\n4. Server sends back the rendered page\n\nServer Side Rendering lets us save an entire round trip.\n\nWhat's even better is, many pages or components of pages don't actually need to be re-rendered everytime they're requested. Instead we can render them once, at compile time, so it's just as fast as a site made from plain HTML.\n\nBut if Server Side Rendering is just Jinja Templates but written in JSX, doesn't that mean we lose some interactivity? Well that is where Hydration comes in. When you use SSR, the server sends a static page to the client. But of course your site still needs to have interactivity, so the client takes over the static page, and turns it into a dynamic page that can react to data changes. This is called Hydration.\n\nHowever, Server Side Rendering also brings with it some new challenges. One challenge that is quite common, but fortunately also easily solvable, is Hydration Errors.\n\nA Hydration Error is when while turning the static page into a dynamic page there is an unexpected difference between the two, and the process doesn't know how to deal with it.\n\n## My bug\n\nI was using this wrapper function around localStorage that returns a default if the user does not have the required item in their localStorage.\n\n```typescript\nexport const getLocalStorageOrDefault = \u003CT>(\n  key: string,\n  defaultObject: T,\n): T => {\n  try {\n    return JSON.parse(window.localStorage.getItem(key) || \"\") as T;\n  } catch (e) {\n    return defaultObject;\n  }\n};\n```\n\nIn my Zustand store I was using the following reducer to get the current theme:\n\n```typescript\nconst useStore = create\u003CAppState>((set) => ({\n  theme: getLocalStorageOrDefault\u003CTheme>(\"theme\", Theme.light),\n  // other reducers such as toggleTheme\n}));\n```\n\nFinally in my ThemeToggle component I was\n\n```tsx\nconst ThemeToggle = () => {\n  const { theme, toggleTheme } = useStore();\n\n  return (\n    \u003C>\n      {theme === Theme.light ? (\n        \u003CStyledDayModeButton\n          onClick={toggleTheme}\n          color={lightTheme.text}\n          title=\"Toggle Light Mode\"\n          height=\"36px\"\n          width=\"36px\"\n        />\n      ) : (\n        \u003CStyledNightModeButton\n          onClick={toggleTheme}\n          color={darkTheme.text}\n          title=\"Toggle Dark Mode\"\n          height=\"36px\"\n          width=\"36px\"\n        />\n      )}\n    \u003C/>\n  );\n};\n```\n\nThe idea was to check if the user has set a theme in localStorage, and if not then use the default light theme.\n\n## The solution\n\nSo we want to wait until the client has the site until we check localStorage. How can we do that?\n\nThe solution is fairly simple:\n\n```tsx\nconst ThemeToggle = () => {\n  const { theme, toggleTheme } = useStore();\n\n  const [hasMounted, setHasMounted] = useState\u003Cboolean>(false);\n  useEffect(() => {\n    setHasMounted(true);\n  }, []);\n\n  if (!hasMounted) {\n    return null;\n  }\n\n  // Otherwise, render the same component as before\n};\n```\n\n`useEffect` only runs once the site renders on the client, so we wait until that happens. This simple pattern is the solution to a large percentage of Next.js Hydration errors.\n\nI hope this will be useful for someone. Thanks for reading :)","src/content/content/next-hydration-error.md","cce35d25dd62384a",{"html":429,"metadata":430},"\u003Ch2 id=\"what-is-a-hydration-error\">What is a Hydration Error\u003C/h2>\n\u003Cp>Front-End development goes in cycles. First started with static HTML pages, then we added JavaScript and AJAX to get more front-end interactivity. After this focus returned back to the server with Jinja templates and similar, which allowed us to render almost the entire website on the server, only including some small pieces of JavaScript for interactivity that can only exist in the frontend. Then the pendulum swung all the way in the opposite direction with Single Page Apps, where we just send the client a mostly empty HTML page and some JavaScript that then populates this page.\u003C/p>\n\u003Cp>SPAs give unprecedented interactivity and developer experience, but until the browser is done figuring out to do with all that JavaScript, the user can't do anything. That's not a great experience!\u003C/p>\n\u003Cp>For example if we want to view a page that shows some data from an API, assuming the data is not cached locally, we have to:\u003C/p>\n\u003Col>\n\u003Cli>Client request the page\u003C/li>\n\u003Cli>Server sends the page\u003C/li>\n\u003Cli>Client renders the page, without the data\u003C/li>\n\u003Cli>Client a request for the data in useEffect() or similar\u003C/li>\n\u003Cli>Server makes DB request for the data\u003C/li>\n\u003Cli>Server sends back data\u003C/li>\n\u003Cli>Client inserts the data into the page\u003C/li>\n\u003C/ol>\n\u003Cp>In a Server Side Rendered App, we can instead do:\u003C/p>\n\u003Col>\n\u003Cli>Client requests the page\u003C/li>\n\u003Cli>Server makes a DB request for the data\u003C/li>\n\u003Cli>Server renders the page, including the data\u003C/li>\n\u003Cli>Server sends back the rendered page\u003C/li>\n\u003C/ol>\n\u003Cp>Server Side Rendering lets us save an entire round trip.\u003C/p>\n\u003Cp>What's even better is, many pages or components of pages don't actually need to be re-rendered everytime they're requested. Instead we can render them once, at compile time, so it's just as fast as a site made from plain HTML.\u003C/p>\n\u003Cp>But if Server Side Rendering is just Jinja Templates but written in JSX, doesn't that mean we lose some interactivity? Well that is where Hydration comes in. When you use SSR, the server sends a static page to the client. But of course your site still needs to have interactivity, so the client takes over the static page, and turns it into a dynamic page that can react to data changes. This is called Hydration.\u003C/p>\n\u003Cp>However, Server Side Rendering also brings with it some new challenges. One challenge that is quite common, but fortunately also easily solvable, is Hydration Errors.\u003C/p>\n\u003Cp>A Hydration Error is when while turning the static page into a dynamic page there is an unexpected difference between the two, and the process doesn't know how to deal with it.\u003C/p>\n\u003Ch2 id=\"my-bug\">My bug\u003C/h2>\n\u003Cp>I was using this wrapper function around localStorage that returns a default if the user does not have the required item in their localStorage.\u003C/p>\n\u003Cpre class=\"astro-code dark-plus\" style=\"background-color:#1E1E1E;color:#D4D4D4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"typescript\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#C586C0\">export\u003C/span>\u003Cspan style=\"color:#569CD6\"> const\u003C/span>\u003Cspan style=\"color:#DCDCAA\"> getLocalStorageOrDefault\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> = &#x3C;\u003C/span>\u003Cspan style=\"color:#4EC9B0\">T\u003C/span>\u003Cspan style=\"color:#D4D4D4\">>(\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#9CDCFE\">  key\u003C/span>\u003Cspan style=\"color:#D4D4D4\">: \u003C/span>\u003Cspan style=\"color:#4EC9B0\">string\u003C/span>\u003Cspan style=\"color:#D4D4D4\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#9CDCFE\">  defaultObject\u003C/span>\u003Cspan style=\"color:#D4D4D4\">: \u003C/span>\u003Cspan style=\"color:#4EC9B0\">T\u003C/span>\u003Cspan style=\"color:#D4D4D4\">,\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">): \u003C/span>\u003Cspan style=\"color:#4EC9B0\">T\u003C/span>\u003Cspan style=\"color:#569CD6\"> =>\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C586C0\">  try\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C586C0\">    return\u003C/span>\u003Cspan style=\"color:#4FC1FF\"> JSON\u003C/span>\u003Cspan style=\"color:#D4D4D4\">.\u003C/span>\u003Cspan style=\"color:#DCDCAA\">parse\u003C/span>\u003Cspan style=\"color:#D4D4D4\">(\u003C/span>\u003Cspan style=\"color:#9CDCFE\">window\u003C/span>\u003Cspan style=\"color:#D4D4D4\">.\u003C/span>\u003Cspan style=\"color:#9CDCFE\">localStorage\u003C/span>\u003Cspan style=\"color:#D4D4D4\">.\u003C/span>\u003Cspan style=\"color:#DCDCAA\">getItem\u003C/span>\u003Cspan style=\"color:#D4D4D4\">(\u003C/span>\u003Cspan style=\"color:#9CDCFE\">key\u003C/span>\u003Cspan style=\"color:#D4D4D4\">) || \u003C/span>\u003Cspan style=\"color:#CE9178\">\"\"\u003C/span>\u003Cspan style=\"color:#D4D4D4\">) \u003C/span>\u003Cspan style=\"color:#C586C0\">as\u003C/span>\u003Cspan style=\"color:#4EC9B0\"> T\u003C/span>\u003Cspan style=\"color:#D4D4D4\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">  } \u003C/span>\u003Cspan style=\"color:#C586C0\">catch\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> (\u003C/span>\u003Cspan style=\"color:#9CDCFE\">e\u003C/span>\u003Cspan style=\"color:#D4D4D4\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C586C0\">    return\u003C/span>\u003Cspan style=\"color:#9CDCFE\"> defaultObject\u003C/span>\u003Cspan style=\"color:#D4D4D4\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">};\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>In my Zustand store I was using the following reducer to get the current theme:\u003C/p>\n\u003Cpre class=\"astro-code dark-plus\" style=\"background-color:#1E1E1E;color:#D4D4D4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"typescript\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#569CD6\">const\u003C/span>\u003Cspan style=\"color:#4FC1FF\"> useStore\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> = \u003C/span>\u003Cspan style=\"color:#DCDCAA\">create\u003C/span>\u003Cspan style=\"color:#D4D4D4\">&#x3C;\u003C/span>\u003Cspan style=\"color:#4EC9B0\">AppState\u003C/span>\u003Cspan style=\"color:#D4D4D4\">>((\u003C/span>\u003Cspan style=\"color:#9CDCFE\">set\u003C/span>\u003Cspan style=\"color:#D4D4D4\">) \u003C/span>\u003Cspan style=\"color:#569CD6\">=>\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> ({\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#9CDCFE\">  theme:\u003C/span>\u003Cspan style=\"color:#DCDCAA\"> getLocalStorageOrDefault\u003C/span>\u003Cspan style=\"color:#D4D4D4\">&#x3C;\u003C/span>\u003Cspan style=\"color:#4EC9B0\">Theme\u003C/span>\u003Cspan style=\"color:#D4D4D4\">>(\u003C/span>\u003Cspan style=\"color:#CE9178\">\"theme\"\u003C/span>\u003Cspan style=\"color:#D4D4D4\">, \u003C/span>\u003Cspan style=\"color:#9CDCFE\">Theme\u003C/span>\u003Cspan style=\"color:#D4D4D4\">.\u003C/span>\u003Cspan style=\"color:#9CDCFE\">light\u003C/span>\u003Cspan style=\"color:#D4D4D4\">),\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A9955\">  // other reducers such as toggleTheme\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">}));\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>Finally in my ThemeToggle component I was\u003C/p>\n\u003Cpre class=\"astro-code dark-plus\" style=\"background-color:#1E1E1E;color:#D4D4D4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"tsx\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#569CD6\">const\u003C/span>\u003Cspan style=\"color:#DCDCAA\"> ThemeToggle\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> = () \u003C/span>\u003Cspan style=\"color:#569CD6\">=>\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#569CD6\">  const\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> { \u003C/span>\u003Cspan style=\"color:#4FC1FF\">theme\u003C/span>\u003Cspan style=\"color:#D4D4D4\">, \u003C/span>\u003Cspan style=\"color:#4FC1FF\">toggleTheme\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> } = \u003C/span>\u003Cspan style=\"color:#DCDCAA\">useStore\u003C/span>\u003Cspan style=\"color:#D4D4D4\">();\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C586C0\">  return\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> (\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#808080\">    &#x3C;>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#569CD6\">      {\u003C/span>\u003Cspan style=\"color:#9CDCFE\">theme\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> === \u003C/span>\u003Cspan style=\"color:#9CDCFE\">Theme\u003C/span>\u003Cspan style=\"color:#D4D4D4\">.\u003C/span>\u003Cspan style=\"color:#9CDCFE\">light\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> ? (\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#808080\">        &#x3C;\u003C/span>\u003Cspan style=\"color:#4EC9B0\">StyledDayModeButton\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#9CDCFE\">          onClick\u003C/span>\u003Cspan style=\"color:#D4D4D4\">=\u003C/span>\u003Cspan style=\"color:#569CD6\">{\u003C/span>\u003Cspan style=\"color:#9CDCFE\">toggleTheme\u003C/span>\u003Cspan style=\"color:#569CD6\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#9CDCFE\">          color\u003C/span>\u003Cspan style=\"color:#D4D4D4\">=\u003C/span>\u003Cspan style=\"color:#569CD6\">{\u003C/span>\u003Cspan style=\"color:#9CDCFE\">lightTheme\u003C/span>\u003Cspan style=\"color:#D4D4D4\">.\u003C/span>\u003Cspan style=\"color:#9CDCFE\">text\u003C/span>\u003Cspan style=\"color:#569CD6\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#9CDCFE\">          title\u003C/span>\u003Cspan style=\"color:#D4D4D4\">=\u003C/span>\u003Cspan style=\"color:#CE9178\">\"Toggle Light Mode\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#9CDCFE\">          height\u003C/span>\u003Cspan style=\"color:#D4D4D4\">=\u003C/span>\u003Cspan style=\"color:#CE9178\">\"36px\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#9CDCFE\">          width\u003C/span>\u003Cspan style=\"color:#D4D4D4\">=\u003C/span>\u003Cspan style=\"color:#CE9178\">\"36px\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#808080\">        />\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">      ) : (\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#808080\">        &#x3C;\u003C/span>\u003Cspan style=\"color:#4EC9B0\">StyledNightModeButton\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#9CDCFE\">          onClick\u003C/span>\u003Cspan style=\"color:#D4D4D4\">=\u003C/span>\u003Cspan style=\"color:#569CD6\">{\u003C/span>\u003Cspan style=\"color:#9CDCFE\">toggleTheme\u003C/span>\u003Cspan style=\"color:#569CD6\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#9CDCFE\">          color\u003C/span>\u003Cspan style=\"color:#D4D4D4\">=\u003C/span>\u003Cspan style=\"color:#569CD6\">{\u003C/span>\u003Cspan style=\"color:#9CDCFE\">darkTheme\u003C/span>\u003Cspan style=\"color:#D4D4D4\">.\u003C/span>\u003Cspan style=\"color:#9CDCFE\">text\u003C/span>\u003Cspan style=\"color:#569CD6\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#9CDCFE\">          title\u003C/span>\u003Cspan style=\"color:#D4D4D4\">=\u003C/span>\u003Cspan style=\"color:#CE9178\">\"Toggle Dark Mode\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#9CDCFE\">          height\u003C/span>\u003Cspan style=\"color:#D4D4D4\">=\u003C/span>\u003Cspan style=\"color:#CE9178\">\"36px\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#9CDCFE\">          width\u003C/span>\u003Cspan style=\"color:#D4D4D4\">=\u003C/span>\u003Cspan style=\"color:#CE9178\">\"36px\"\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#808080\">        />\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">      )\u003C/span>\u003Cspan style=\"color:#569CD6\">}\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#808080\">    &#x3C;/>\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">  );\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">};\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>The idea was to check if the user has set a theme in localStorage, and if not then use the default light theme.\u003C/p>\n\u003Ch2 id=\"the-solution\">The solution\u003C/h2>\n\u003Cp>So we want to wait until the client has the site until we check localStorage. How can we do that?\u003C/p>\n\u003Cp>The solution is fairly simple:\u003C/p>\n\u003Cpre class=\"astro-code dark-plus\" style=\"background-color:#1E1E1E;color:#D4D4D4; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;\" tabindex=\"0\" data-language=\"tsx\">\u003Ccode>\u003Cspan class=\"line\">\u003Cspan style=\"color:#569CD6\">const\u003C/span>\u003Cspan style=\"color:#DCDCAA\"> ThemeToggle\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> = () \u003C/span>\u003Cspan style=\"color:#569CD6\">=>\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#569CD6\">  const\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> { \u003C/span>\u003Cspan style=\"color:#4FC1FF\">theme\u003C/span>\u003Cspan style=\"color:#D4D4D4\">, \u003C/span>\u003Cspan style=\"color:#4FC1FF\">toggleTheme\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> } = \u003C/span>\u003Cspan style=\"color:#DCDCAA\">useStore\u003C/span>\u003Cspan style=\"color:#D4D4D4\">();\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#569CD6\">  const\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> [\u003C/span>\u003Cspan style=\"color:#4FC1FF\">hasMounted\u003C/span>\u003Cspan style=\"color:#D4D4D4\">, \u003C/span>\u003Cspan style=\"color:#4FC1FF\">setHasMounted\u003C/span>\u003Cspan style=\"color:#D4D4D4\">] = \u003C/span>\u003Cspan style=\"color:#DCDCAA\">useState\u003C/span>\u003Cspan style=\"color:#D4D4D4\">&#x3C;\u003C/span>\u003Cspan style=\"color:#4EC9B0\">boolean\u003C/span>\u003Cspan style=\"color:#D4D4D4\">>(\u003C/span>\u003Cspan style=\"color:#569CD6\">false\u003C/span>\u003Cspan style=\"color:#D4D4D4\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#DCDCAA\">  useEffect\u003C/span>\u003Cspan style=\"color:#D4D4D4\">(() \u003C/span>\u003Cspan style=\"color:#569CD6\">=>\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#DCDCAA\">    setHasMounted\u003C/span>\u003Cspan style=\"color:#D4D4D4\">(\u003C/span>\u003Cspan style=\"color:#569CD6\">true\u003C/span>\u003Cspan style=\"color:#D4D4D4\">);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">  }, []);\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C586C0\">  if\u003C/span>\u003Cspan style=\"color:#D4D4D4\"> (!\u003C/span>\u003Cspan style=\"color:#9CDCFE\">hasMounted\u003C/span>\u003Cspan style=\"color:#D4D4D4\">) {\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#C586C0\">    return\u003C/span>\u003Cspan style=\"color:#569CD6\"> null\u003C/span>\u003Cspan style=\"color:#D4D4D4\">;\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">  }\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#6A9955\">  // Otherwise, render the same component as before\u003C/span>\u003C/span>\n\u003Cspan class=\"line\">\u003Cspan style=\"color:#D4D4D4\">};\u003C/span>\u003C/span>\u003C/code>\u003C/pre>\n\u003Cp>\u003Ccode>useEffect\u003C/code> only runs once the site renders on the client, so we wait until that happens. This simple pattern is the solution to a large percentage of Next.js Hydration errors.\u003C/p>\n\u003Cp>I hope this will be useful for someone. Thanks for reading :)\u003C/p>",{"headings":431,"localImagePaths":441,"remoteImagePaths":442,"frontmatter":443,"imagePaths":446},[432,435,438],{"depth":99,"slug":433,"text":434},"what-is-a-hydration-error","What is a Hydration Error",{"depth":99,"slug":436,"text":437},"my-bug","My bug",{"depth":99,"slug":439,"text":440},"the-solution","The solution",[],[],{"title":419,"type":85,"description":420,"published":444,"tags":445},"2022/03/20",[216,423,424],[],"projects",["Map",449,450,477,478,500,501,523,524],"anket",{"id":449,"data":451,"filePath":465,"digest":466,"rendered":467},{"title":452,"description":453,"published":454,"tags":455,"image":462,"github":463,"deployed":464},"Anket","Easily create surveys, take surveys with an intuitive UI, see informative statistics on your survey responses. Anket is a survey tool for those who value simplicity and user friendliness. Key features include end-to-end type safety, extensive form validation, and preserving unfinished surveys and responses in server state in real-time.",["Date","2022-05-17T15:00:00.000Z"],[456,216,290,457,458,459,460,461],"Typescript","Node.js","PostgreSQL","Prisma","Zod","Mantine UI","/img/projects/anket/anket-screenshot.png","https://github.com/c-ehrlich/anket","https://anket-surveys.vercel.app","src/content/projects/Anket.md","9a3926dc969c678d",{"html":468,"metadata":469},"",{"headings":470,"localImagePaths":471,"remoteImagePaths":472,"frontmatter":473,"imagePaths":476},[],[],[],{"title":452,"description":453,"published":474,"tags":475,"image":462,"github":463,"deployed":464},"2022/05/18",[456,216,290,457,458,459,460,461],[],"createt3app",{"id":477,"data":479,"filePath":489,"digest":490,"rendered":491},{"title":215,"description":480,"published":481,"tags":482,"image":486,"github":487,"deployed":488},"The best way to start a full-stack, typesafe Next.js app. As a member of the core team I have contributed features all across the stack, as well as reviewing PRs and profiling bugs. Additionally I am leading the initiative to translate the docs, which thanks to amazing contributors are now available in 8 languages and counting.",["Date","2022-12-31T15:00:00.000Z"],[456,216,290,160,483,484,485],"TailwindCSS","NextAuth.js","Astro","/img/projects/ct3a/ct3a-screenshot.jpg","https://github.com/t3-oss/create-t3-app","https://create.t3.gg","src/content/projects/CreateT3App.md","ac0540e3999729ee",{"html":468,"metadata":492},{"headings":493,"localImagePaths":494,"remoteImagePaths":495,"frontmatter":496,"imagePaths":499},[],[],[],{"title":215,"description":480,"published":497,"tags":498,"image":486,"github":487,"deployed":488},"2023/01/01",[456,216,290,160,483,484,485],[],"ui",{"id":500,"data":502,"filePath":512,"digest":513,"rendered":514},{"title":503,"description":504,"published":505,"tags":506,"image":509,"github":510,"deployed":511},"UI Components","Back to basics, just HTML and CSS. While learning clothesmaking I found that the best way to improve was to find great clothes and create replicas of them, in order to learn about the patterns and design systems that went into them. Now I am tuning my UI/UX skills by recreating my own versions of components that I like in other apps.",["Date","2022-05-15T15:00:00.000Z"],[507,508,290],"HTML","CSS","/img/projects/ui/ui-screenshot.jpg","https://github.com/c-ehrlich/nice-ui-components","https://c-ehrlich.github.io/nice-ui-components/","src/content/projects/UI.md","40f130abc6cd37a2",{"html":468,"metadata":515},{"headings":516,"localImagePaths":517,"remoteImagePaths":518,"frontmatter":519,"imagePaths":522},[],[],[],{"title":503,"description":504,"published":520,"tags":521,"image":509,"github":510,"deployed":511},"2022/05/16",[507,508,290],[],"vocab",{"id":523,"data":525,"filePath":535,"digest":536,"rendered":537},{"title":526,"description":527,"published":528,"tags":529,"image":532,"github":533,"deployed":534},"Vocab Learn Order","A web app for Japanese learners that uses over 200,000 dictionary entries and several frequency lists to give learners the optimal learn order for words that they encounter in their reading and listening. 20-50 daily users.",["Date","2022-02-14T15:00:00.000Z"],[378,216,160,530,531],"MongoDB","Material UI","/img/projects/vocab/vocab-screenshot.jpg","https://github.com/c-ehrlich/vocab-learn-order-t3","https://vocab.c-ehrlich.dev","src/content/projects/Vocab.md","6011459ecec257e1",{"html":468,"metadata":538},{"headings":539,"localImagePaths":540,"remoteImagePaths":541,"frontmatter":542,"imagePaths":545},[],[],[],{"title":526,"description":527,"published":543,"tags":544,"image":532,"github":533,"deployed":534},"2022/02/15",[378,216,160,530,531],[],"bookNotes",["Map",548,549,607,608,635,636,670,671],"confessions-of-a-public-speaker",{"id":548,"data":550,"body":553,"filePath":554,"digest":555,"rendered":556},{"title":551,"published":552},"Confessiosn of a Public Speaker - Scott Berkun",["Date","2023-10-25T15:00:00.000Z"],"## I can't see you naked\n* The secret to coping with these events is to realize everyone forgets about them after they happen--except for one person: me. No one else really cares that much.\n* Even the best speakers make tons of mistakes\n* Never plan to use the full time given\n* It's the mistakes you make before you even say a word that matter more. These include the mistakes of not having an interesting opinion, of not thinking clearly about your points, and of not planning ways to make those points relevant to your audience. Those are the ones that make the difference.\n\n## The attack of the butterflies\n* the only difference between the pros and the novices is that the pros have trained the butterflies to fly in formation\n* the body's reaction to fear and excitement is the same...so it becomes a mental decision: am I afraid or am I excited?\n* My intent is simply to know my material so well that I'm very comfortable iwth it\n* I'm not a better public speaker than anyone else--I'm just better at catching and fixing problems.\n* I repeat (rehearsing) until I can get through the entire talk without making makor mistakes.\n* Pay close attention the next time you're listening to a good public speaker. The speaker is probably natural and comfortable, making you feel as though he's talking to a small group, despite how many people are actually in the audience.\n\n## How to work a touch room\n* the only trick is to start, as fear comes from what you imagine what might happen instead of what actually is happening, and the longer you wait the worse it gets.\n* Ask people to move to the front of the room if it's a small audience\n  * \"Who has exercised this morning... all right I'll help you. I need everyone to stand up, and move to the closest possible seat in the front of the room\"\n* own your turf - ask if the crowd is warm or cold, ask organizer to fix it\n* pick up on points and jokes from the previous talk\n* You have to embody what you want the audience to be. If you want them to have fun, you need to have fun.\n* Show some integrity by speaking the truth to the very thing that angers the audience, or even acknowledging it in a heartfelt way, and you will score points.\n* Find strongest opponents, talk to them beforehand, during talk\" here are the top complaints I heard from talking to X, Y, Z\"\n\n## Do not eat the microphone\n* All good public speaking is based on good private thinking - refine rough ideas into clear ones\n* People come to talks for different reasons\n  1. Want to learn something\n  2. Wish to be inspired\n  3. Hope to be entertained\n  4. Have a need they hope you will satisfy\n  5. Desire to meet other people interested in the subject\n  6. Seek a positive experience they can share with others\n  7. Are forced to be there by bosses, parents, etc\n  => A great talk nails the first six and ends early\n* How to get there\n  * Think a lot beforehand\n  * Have a strong position (in the title)\n  * Think carefully about your specific audience\n  * Make your specific points as concise as possible (one sentence)\n  * Know the likely counterarguments from an intelligent audience\n* \"If you only had one single point, what would it be? That's what your title should communicate\"\n* ðŸš¨ Good lectures are never comprehensive\n* Good title: \"How to be creative in doing boring work\"\n  * \"The top five problems you have with \u003Cthing> and how to solve them\n  * Why \u003Cthing> sucks and what we can do about it\n  * Mistakes I made in \u003Cdoing thing> and what I learned\n  * Smart shortcuts and clever tricks only experts know about \u003Cthing>\n* Make a list of points (20+), show to people, figure out what's important\n\n## Photos you don't expect to see\n* \"Travel, however, is excellend for finding new questions to ask, so I write often while on trips.\"\n* \"sit in the cheap seats before your talk to remind yourself of how much energy you need to project so that you don't look like a zombie on stage\"\n\n## The science of not boring people\n* Never spend more than 10 minutes on a single point, and make sure each point is interesting\n* \"Once you have everyone's attention, briefly outline how (the talk) will work\"\n* \"Start with a beat. Think of your opening minute as a movie preview: fill it with drama, excitement, and highlights for why people should keep listening.\"\n\n## How to give a good talk\n* Tell stories!\n  * An audience that is hooked on a story will follow you anywhere\n  * \"Influence is a function of grabbing someone's attention, connecting to what they already feel is important, and linking that feeling to whatever you want them to see, do, or feel\"\n* Charisma\n  * ðŸš¨ \"be bigger than you are. Speak louder, take stronger positions, and behave more aggressively than you would in an ordinary conversation. These are the rules of performing\"\n  * \"be a passionate, interested, fully present version of you\"\n  * the bigger the audience, the bigger you need to be\n* Get the audience involved\n  * show of hands\n  * give them a problem to solve\n* Determine the pace\n* End early\n\n## lessons from my 15 minutes of fame\n* The secret to speaking on camera is to pretend you're speaking to a small group of friends\n\n## The things people say\n* It's hard to get good feedback on talks!\n* Appearing credible is a learned skill\n  * Not necessarily about substance\n  * Host can help give a speaker credibility\n  * Superficials (appearance, posture, etc) matter\n  * A good comedian who knows nothing about a subject matter would probably be more liked than many professors\n  * Enthusiasm matters - always give significant energy!\n* ðŸš¨ Feedback you should ask for\n  * How did my presentation compare to others?\n  * What one change would have most improved my presentation?\n  * What questions did you expect me to answer that went unanswered?\n  * What annoyances did I let get in the way of giving you what you need?\n* Turn \"great job!\" into \"thanks, how can I make it even better?\"\n* Ask the host, \"what effect do you want me to have on this audience?\"\n* ðŸš¨ More good questions\n  * Was this a good use of your time?\n  * Would you recommend this lecture to others?\n  * Are you considering doing anything different as a result of this talk?\n  * Do you know what to do next to continue learning?\n  * Were you inspired or motivated?\n  * How likeable did you find the speaker?\n  * How substantive did you find the speaker's material?\n* ðŸš¨ RECORD YOURSELF - \"If you're too scared ot watch yourself speak, how can you expect your audience to watch you?\"\n\n## The clutch is your friend\n* One-on-one is best\n* You can't teach 5000 people equally\n* Make it active and interesting, start with insights that interest the students, keep adapting to get better at 1 and 2\n\n## Confessions\n* \"Sometimes people at my talks know much of what I know. In these cases, my value is to remind them of an old idea or put it into a new context\"\n* ðŸš¨ PRACTICE!!!\n* \"If I see a good speaker, I usually prefer to go and read his blog or buy his book than sit and listen to his entire talk. I'd prefer to buy him coffee or exchange email, where the communication is two ways. If I can't do that, I'd rather go out into the hallway and have a conversation with someone else.\"\n* ðŸš¨ \"If I have any secret to being entertaining, it's that I studied improv theater. There I learned how to see and how to listen. Humor and insight come from paying attention, not from special talents.\"\n* The feedback most speakers need is \"be more honest\".\n\n## The little things pros do\n* Give stuff away to fill the front row\n* Treat your cameramen well, and ask them for advice\n\n## How to make a point\n* Don't speak in monotone! Place emphasis on certain words!\n* Don't be afraid of silence! It's better than ummm sooo\n\n## When things go wrong\n* You have more power than any heckler!\n* The audience hates people who love to hear themselves talk! Shut them down early!\n* Learn to say \"I don't know\"\n  * Offer those questions to the audience\n* If you need filler material during tech problems, ask people more questions\n* Have a printout of your slides with you. In the worst case, they're your notes.\n* Plan to save 20-30% of your time slot for Q&A\n* If your audience is for 5 people, don't pretend they're 100 people. Instead scrap most of the talk, get them in a circle, and chat.","src/content/bookNotes/confessions-of-a-public-speaker.md","d5d0eb1714a1b2da",{"html":557,"metadata":558},"\u003Ch2 id=\"i-cant-see-you-naked\">I can't see you naked\u003C/h2>\n\u003Cul>\n\u003Cli>The secret to coping with these events is to realize everyone forgets about them after they happen--except for one person: me. No one else really cares that much.\u003C/li>\n\u003Cli>Even the best speakers make tons of mistakes\u003C/li>\n\u003Cli>Never plan to use the full time given\u003C/li>\n\u003Cli>It's the mistakes you make before you even say a word that matter more. These include the mistakes of not having an interesting opinion, of not thinking clearly about your points, and of not planning ways to make those points relevant to your audience. Those are the ones that make the difference.\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"the-attack-of-the-butterflies\">The attack of the butterflies\u003C/h2>\n\u003Cul>\n\u003Cli>the only difference between the pros and the novices is that the pros have trained the butterflies to fly in formation\u003C/li>\n\u003Cli>the body's reaction to fear and excitement is the same...so it becomes a mental decision: am I afraid or am I excited?\u003C/li>\n\u003Cli>My intent is simply to know my material so well that I'm very comfortable iwth it\u003C/li>\n\u003Cli>I'm not a better public speaker than anyone else--I'm just better at catching and fixing problems.\u003C/li>\n\u003Cli>I repeat (rehearsing) until I can get through the entire talk without making makor mistakes.\u003C/li>\n\u003Cli>Pay close attention the next time you're listening to a good public speaker. The speaker is probably natural and comfortable, making you feel as though he's talking to a small group, despite how many people are actually in the audience.\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"how-to-work-a-touch-room\">How to work a touch room\u003C/h2>\n\u003Cul>\n\u003Cli>the only trick is to start, as fear comes from what you imagine what might happen instead of what actually is happening, and the longer you wait the worse it gets.\u003C/li>\n\u003Cli>Ask people to move to the front of the room if it's a small audience\n\u003Cul>\n\u003Cli>\"Who has exercised this morning... all right I'll help you. I need everyone to stand up, and move to the closest possible seat in the front of the room\"\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>own your turf - ask if the crowd is warm or cold, ask organizer to fix it\u003C/li>\n\u003Cli>pick up on points and jokes from the previous talk\u003C/li>\n\u003Cli>You have to embody what you want the audience to be. If you want them to have fun, you need to have fun.\u003C/li>\n\u003Cli>Show some integrity by speaking the truth to the very thing that angers the audience, or even acknowledging it in a heartfelt way, and you will score points.\u003C/li>\n\u003Cli>Find strongest opponents, talk to them beforehand, during talk\" here are the top complaints I heard from talking to X, Y, Z\"\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"do-not-eat-the-microphone\">Do not eat the microphone\u003C/h2>\n\u003Cul>\n\u003Cli>All good public speaking is based on good private thinking - refine rough ideas into clear ones\u003C/li>\n\u003Cli>People come to talks for different reasons\n\u003Col>\n\u003Cli>Want to learn something\u003C/li>\n\u003Cli>Wish to be inspired\u003C/li>\n\u003Cli>Hope to be entertained\u003C/li>\n\u003Cli>Have a need they hope you will satisfy\u003C/li>\n\u003Cli>Desire to meet other people interested in the subject\u003C/li>\n\u003Cli>Seek a positive experience they can share with others\u003C/li>\n\u003Cli>Are forced to be there by bosses, parents, etc\n=> A great talk nails the first six and ends early\u003C/li>\n\u003C/ol>\n\u003C/li>\n\u003Cli>How to get there\n\u003Cul>\n\u003Cli>Think a lot beforehand\u003C/li>\n\u003Cli>Have a strong position (in the title)\u003C/li>\n\u003Cli>Think carefully about your specific audience\u003C/li>\n\u003Cli>Make your specific points as concise as possible (one sentence)\u003C/li>\n\u003Cli>Know the likely counterarguments from an intelligent audience\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>\"If you only had one single point, what would it be? That's what your title should communicate\"\u003C/li>\n\u003Cli>ðŸš¨ Good lectures are never comprehensive\u003C/li>\n\u003Cli>Good title: \"How to be creative in doing boring work\"\n\u003Cul>\n\u003Cli>\"The top five problems you have with \u003Cthing> and how to solve them\u003C/thing>\u003C/li>\n\u003Cli>Why \u003Cthing> sucks and what we can do about it\u003C/thing>\u003C/li>\n\u003Cli>Mistakes I made in \u003Cdoing thing=\"\"> and what I learned\u003C/doing>\u003C/li>\n\u003Cli>Smart shortcuts and clever tricks only experts know about \u003Cthing>\u003C/thing>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>Make a list of points (20+), show to people, figure out what's important\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"photos-you-dont-expect-to-see\">Photos you don't expect to see\u003C/h2>\n\u003Cul>\n\u003Cli>\"Travel, however, is excellend for finding new questions to ask, so I write often while on trips.\"\u003C/li>\n\u003Cli>\"sit in the cheap seats before your talk to remind yourself of how much energy you need to project so that you don't look like a zombie on stage\"\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"the-science-of-not-boring-people\">The science of not boring people\u003C/h2>\n\u003Cul>\n\u003Cli>Never spend more than 10 minutes on a single point, and make sure each point is interesting\u003C/li>\n\u003Cli>\"Once you have everyone's attention, briefly outline how (the talk) will work\"\u003C/li>\n\u003Cli>\"Start with a beat. Think of your opening minute as a movie preview: fill it with drama, excitement, and highlights for why people should keep listening.\"\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"how-to-give-a-good-talk\">How to give a good talk\u003C/h2>\n\u003Cul>\n\u003Cli>Tell stories!\n\u003Cul>\n\u003Cli>An audience that is hooked on a story will follow you anywhere\u003C/li>\n\u003Cli>\"Influence is a function of grabbing someone's attention, connecting to what they already feel is important, and linking that feeling to whatever you want them to see, do, or feel\"\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>Charisma\n\u003Cul>\n\u003Cli>ðŸš¨ \"be bigger than you are. Speak louder, take stronger positions, and behave more aggressively than you would in an ordinary conversation. These are the rules of performing\"\u003C/li>\n\u003Cli>\"be a passionate, interested, fully present version of you\"\u003C/li>\n\u003Cli>the bigger the audience, the bigger you need to be\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>Get the audience involved\n\u003Cul>\n\u003Cli>show of hands\u003C/li>\n\u003Cli>give them a problem to solve\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>Determine the pace\u003C/li>\n\u003Cli>End early\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"lessons-from-my-15-minutes-of-fame\">lessons from my 15 minutes of fame\u003C/h2>\n\u003Cul>\n\u003Cli>The secret to speaking on camera is to pretend you're speaking to a small group of friends\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"the-things-people-say\">The things people say\u003C/h2>\n\u003Cul>\n\u003Cli>It's hard to get good feedback on talks!\u003C/li>\n\u003Cli>Appearing credible is a learned skill\n\u003Cul>\n\u003Cli>Not necessarily about substance\u003C/li>\n\u003Cli>Host can help give a speaker credibility\u003C/li>\n\u003Cli>Superficials (appearance, posture, etc) matter\u003C/li>\n\u003Cli>A good comedian who knows nothing about a subject matter would probably be more liked than many professors\u003C/li>\n\u003Cli>Enthusiasm matters - always give significant energy!\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>ðŸš¨ Feedback you should ask for\n\u003Cul>\n\u003Cli>How did my presentation compare to others?\u003C/li>\n\u003Cli>What one change would have most improved my presentation?\u003C/li>\n\u003Cli>What questions did you expect me to answer that went unanswered?\u003C/li>\n\u003Cli>What annoyances did I let get in the way of giving you what you need?\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>Turn \"great job!\" into \"thanks, how can I make it even better?\"\u003C/li>\n\u003Cli>Ask the host, \"what effect do you want me to have on this audience?\"\u003C/li>\n\u003Cli>ðŸš¨ More good questions\n\u003Cul>\n\u003Cli>Was this a good use of your time?\u003C/li>\n\u003Cli>Would you recommend this lecture to others?\u003C/li>\n\u003Cli>Are you considering doing anything different as a result of this talk?\u003C/li>\n\u003Cli>Do you know what to do next to continue learning?\u003C/li>\n\u003Cli>Were you inspired or motivated?\u003C/li>\n\u003Cli>How likeable did you find the speaker?\u003C/li>\n\u003Cli>How substantive did you find the speaker's material?\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>ðŸš¨ RECORD YOURSELF - \"If you're too scared ot watch yourself speak, how can you expect your audience to watch you?\"\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"the-clutch-is-your-friend\">The clutch is your friend\u003C/h2>\n\u003Cul>\n\u003Cli>One-on-one is best\u003C/li>\n\u003Cli>You can't teach 5000 people equally\u003C/li>\n\u003Cli>Make it active and interesting, start with insights that interest the students, keep adapting to get better at 1 and 2\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"confessions\">Confessions\u003C/h2>\n\u003Cul>\n\u003Cli>\"Sometimes people at my talks know much of what I know. In these cases, my value is to remind them of an old idea or put it into a new context\"\u003C/li>\n\u003Cli>ðŸš¨ PRACTICE!!!\u003C/li>\n\u003Cli>\"If I see a good speaker, I usually prefer to go and read his blog or buy his book than sit and listen to his entire talk. I'd prefer to buy him coffee or exchange email, where the communication is two ways. If I can't do that, I'd rather go out into the hallway and have a conversation with someone else.\"\u003C/li>\n\u003Cli>ðŸš¨ \"If I have any secret to being entertaining, it's that I studied improv theater. There I learned how to see and how to listen. Humor and insight come from paying attention, not from special talents.\"\u003C/li>\n\u003Cli>The feedback most speakers need is \"be more honest\".\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"the-little-things-pros-do\">The little things pros do\u003C/h2>\n\u003Cul>\n\u003Cli>Give stuff away to fill the front row\u003C/li>\n\u003Cli>Treat your cameramen well, and ask them for advice\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"how-to-make-a-point\">How to make a point\u003C/h2>\n\u003Cul>\n\u003Cli>Don't speak in monotone! Place emphasis on certain words!\u003C/li>\n\u003Cli>Don't be afraid of silence! It's better than ummm sooo\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"when-things-go-wrong\">When things go wrong\u003C/h2>\n\u003Cul>\n\u003Cli>You have more power than any heckler!\u003C/li>\n\u003Cli>The audience hates people who love to hear themselves talk! Shut them down early!\u003C/li>\n\u003Cli>Learn to say \"I don't know\"\n\u003Cul>\n\u003Cli>Offer those questions to the audience\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>If you need filler material during tech problems, ask people more questions\u003C/li>\n\u003Cli>Have a printout of your slides with you. In the worst case, they're your notes.\u003C/li>\n\u003Cli>Plan to save 20-30% of your time slot for Q&#x26;A\u003C/li>\n\u003Cli>If your audience is for 5 people, don't pretend they're 100 people. Instead scrap most of the talk, get them in a circle, and chat.\u003C/li>\n\u003C/ul>",{"headings":559,"localImagePaths":602,"remoteImagePaths":603,"frontmatter":604,"imagePaths":606},[560,563,566,569,572,575,578,581,584,587,590,593,596,599],{"depth":99,"slug":561,"text":562},"i-cant-see-you-naked","I can't see you naked",{"depth":99,"slug":564,"text":565},"the-attack-of-the-butterflies","The attack of the butterflies",{"depth":99,"slug":567,"text":568},"how-to-work-a-touch-room","How to work a touch room",{"depth":99,"slug":570,"text":571},"do-not-eat-the-microphone","Do not eat the microphone",{"depth":99,"slug":573,"text":574},"photos-you-dont-expect-to-see","Photos you don't expect to see",{"depth":99,"slug":576,"text":577},"the-science-of-not-boring-people","The science of not boring people",{"depth":99,"slug":579,"text":580},"how-to-give-a-good-talk","How to give a good talk",{"depth":99,"slug":582,"text":583},"lessons-from-my-15-minutes-of-fame","lessons from my 15 minutes of fame",{"depth":99,"slug":585,"text":586},"the-things-people-say","The things people say",{"depth":99,"slug":588,"text":589},"the-clutch-is-your-friend","The clutch is your friend",{"depth":99,"slug":591,"text":592},"confessions","Confessions",{"depth":99,"slug":594,"text":595},"the-little-things-pros-do","The little things pros do",{"depth":99,"slug":597,"text":598},"how-to-make-a-point","How to make a point",{"depth":99,"slug":600,"text":601},"when-things-go-wrong","When things go wrong",[],[],{"title":551,"published":605},"2023/10/26",[],"how-to-write-and-deliver-talks",{"id":607,"data":609,"body":611,"filePath":612,"digest":613,"rendered":614},{"title":551,"published":610},["Date","2023-10-23T15:00:00.000Z"],"## Preparing A Talk\n- Good talks: empathy, motivation, fun (or super deep technical stuff)\n- Bad talks: sales pitch\n- Server your listeners\n  - \"Make sure you make it clear -- near the start -- how your listeners are going to benefit\"\n  - Example: \"Looking at it this way makes me enjoy my job more, level up as a developer, etc.\"\n- Make it about your personal experience (most of the time)\n- Learn as much as possible beforehand, only talk about the first 20%\n- \"Start with paper, not slides\" - ideas, topics, structures... thinking of one individual impactful slide is ok\n- Choose a suitable structure\n  - Question (pose it explicitly) - answer\n  - Thesis - supported/proven/explained\n  - Problem - solution\n  - Need or desire - fulfilment (best for sales pitch)\n  - Story - lesson or conclusion (can be a subsection of a larger talk)\n  - Statement/description - examples\n    - Similar to thesis, but for \"self-evident\" things\n- ðŸš¨ Rehearse out loud!!!\n  - but remember that the buzz in the room will give you more energy than at home\n    - remember my Edge joke... get people on your side\n- It's virtually impossible for an audience to read and listen at the same time\n- Prepare light and dark mode slides, and choose in the moment\n- ðŸš¨ Practice with a stopwatch so that you know where in the talk you should be at ten-minute checkpoints. And write the checkpoints into your notes\n- Talks generally take a bit shorter than practice runs because of nervousness\n- Props... cs50 phone book\n- Signposting feels corny but works really well! \"That's it for the first section. Now I'd like to move on to the second section, which is ...\"\n- Be relatable\n  - Assume that there are people in the audience who could give your talk just as well as you can, and also people who may never have heard or thought about the ideas I'm presenting\n- Repeat key ideas!\n- Keep your pace slow and clear without being monotone\n- Vary pitch, tone, and pace in a way that emphasizes your point\n- Be enthusiastic!\n\n## Delivering a talk\n- Cut out two-thirds of your introduction\n- Hook, then intro\n- Some of the best openings are last-minute ad-libs about something that happened\n- Audience participation is cool! Make people talk to each other\n- Performance personality\n  - expert\n  - cheerleader\n  - facilitator\n  - storyteller\n  - coordinator\n  - inventor\n  - each person is some % of these, but also vary it by talk\n- Talking from memory is better than a teleprompter\n  - but writing down a few key bits is ok\n- Treat all questions as though they are sincere (but keep control)\n- Being a bit nervous is ok. Everyone loves Jenny from Stately\n- Strike \"power poses\" before going out\n- Breathe!\n- If things are truly falling apart, the audience will give you time to collect yourslef - they're on your side!\n\n## Improving your game\n- Present as often as possible - meetups\n- Don't be thrown off if you make a mistake. Just correct it. \"Sorry, I think a stumbled a bit earlier. Just to be clear, XYZ\"\n- Consider getting some training (voice coach etc - expense it)\n\n## Checklist\n- The audience is clearly defined\n- The talk appropriately balances the practical and the academic\n- I've taken responsibility for how commercial the talk is\n- The visuals support the talk, and don't include too much test\n- I've developed an appropriate presenter style that I'm reasonably comfortable with\n- I've rehearsed the talk multiple times, in front of a camera\n- The talk includes something for the audience to take away, e.g. a Monday morning activity (explicit!)","src/content/bookNotes/how-to-write-and-deliver-talks.md","de1eac39615ebb2d",{"html":615,"metadata":616},"\u003Ch2 id=\"preparing-a-talk\">Preparing A Talk\u003C/h2>\n\u003Cul>\n\u003Cli>Good talks: empathy, motivation, fun (or super deep technical stuff)\u003C/li>\n\u003Cli>Bad talks: sales pitch\u003C/li>\n\u003Cli>Server your listeners\n\u003Cul>\n\u003Cli>\"Make sure you make it clear -- near the start -- how your listeners are going to benefit\"\u003C/li>\n\u003Cli>Example: \"Looking at it this way makes me enjoy my job more, level up as a developer, etc.\"\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>Make it about your personal experience (most of the time)\u003C/li>\n\u003Cli>Learn as much as possible beforehand, only talk about the first 20%\u003C/li>\n\u003Cli>\"Start with paper, not slides\" - ideas, topics, structures... thinking of one individual impactful slide is ok\u003C/li>\n\u003Cli>Choose a suitable structure\n\u003Cul>\n\u003Cli>Question (pose it explicitly) - answer\u003C/li>\n\u003Cli>Thesis - supported/proven/explained\u003C/li>\n\u003Cli>Problem - solution\u003C/li>\n\u003Cli>Need or desire - fulfilment (best for sales pitch)\u003C/li>\n\u003Cli>Story - lesson or conclusion (can be a subsection of a larger talk)\u003C/li>\n\u003Cli>Statement/description - examples\n\u003Cul>\n\u003Cli>Similar to thesis, but for \"self-evident\" things\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>ðŸš¨ Rehearse out loud!!!\n\u003Cul>\n\u003Cli>but remember that the buzz in the room will give you more energy than at home\n\u003Cul>\n\u003Cli>remember my Edge joke... get people on your side\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>It's virtually impossible for an audience to read and listen at the same time\u003C/li>\n\u003Cli>Prepare light and dark mode slides, and choose in the moment\u003C/li>\n\u003Cli>ðŸš¨ Practice with a stopwatch so that you know where in the talk you should be at ten-minute checkpoints. And write the checkpoints into your notes\u003C/li>\n\u003Cli>Talks generally take a bit shorter than practice runs because of nervousness\u003C/li>\n\u003Cli>Props... cs50 phone book\u003C/li>\n\u003Cli>Signposting feels corny but works really well! \"That's it for the first section. Now I'd like to move on to the second section, which is ...\"\u003C/li>\n\u003Cli>Be relatable\n\u003Cul>\n\u003Cli>Assume that there are people in the audience who could give your talk just as well as you can, and also people who may never have heard or thought about the ideas I'm presenting\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>Repeat key ideas!\u003C/li>\n\u003Cli>Keep your pace slow and clear without being monotone\u003C/li>\n\u003Cli>Vary pitch, tone, and pace in a way that emphasizes your point\u003C/li>\n\u003Cli>Be enthusiastic!\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"delivering-a-talk\">Delivering a talk\u003C/h2>\n\u003Cul>\n\u003Cli>Cut out two-thirds of your introduction\u003C/li>\n\u003Cli>Hook, then intro\u003C/li>\n\u003Cli>Some of the best openings are last-minute ad-libs about something that happened\u003C/li>\n\u003Cli>Audience participation is cool! Make people talk to each other\u003C/li>\n\u003Cli>Performance personality\n\u003Cul>\n\u003Cli>expert\u003C/li>\n\u003Cli>cheerleader\u003C/li>\n\u003Cli>facilitator\u003C/li>\n\u003Cli>storyteller\u003C/li>\n\u003Cli>coordinator\u003C/li>\n\u003Cli>inventor\u003C/li>\n\u003Cli>each person is some % of these, but also vary it by talk\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>Talking from memory is better than a teleprompter\n\u003Cul>\n\u003Cli>but writing down a few key bits is ok\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>Treat all questions as though they are sincere (but keep control)\u003C/li>\n\u003Cli>Being a bit nervous is ok. Everyone loves Jenny from Stately\u003C/li>\n\u003Cli>Strike \"power poses\" before going out\u003C/li>\n\u003Cli>Breathe!\u003C/li>\n\u003Cli>If things are truly falling apart, the audience will give you time to collect yourslef - they're on your side!\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"improving-your-game\">Improving your game\u003C/h2>\n\u003Cul>\n\u003Cli>Present as often as possible - meetups\u003C/li>\n\u003Cli>Don't be thrown off if you make a mistake. Just correct it. \"Sorry, I think a stumbled a bit earlier. Just to be clear, XYZ\"\u003C/li>\n\u003Cli>Consider getting some training (voice coach etc - expense it)\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"checklist\">Checklist\u003C/h2>\n\u003Cul>\n\u003Cli>The audience is clearly defined\u003C/li>\n\u003Cli>The talk appropriately balances the practical and the academic\u003C/li>\n\u003Cli>I've taken responsibility for how commercial the talk is\u003C/li>\n\u003Cli>The visuals support the talk, and don't include too much test\u003C/li>\n\u003Cli>I've developed an appropriate presenter style that I'm reasonably comfortable with\u003C/li>\n\u003Cli>I've rehearsed the talk multiple times, in front of a camera\u003C/li>\n\u003Cli>The talk includes something for the audience to take away, e.g. a Monday morning activity (explicit!)\u003C/li>\n\u003C/ul>",{"headings":617,"localImagePaths":630,"remoteImagePaths":631,"frontmatter":632,"imagePaths":634},[618,621,624,627],{"depth":99,"slug":619,"text":620},"preparing-a-talk","Preparing A Talk",{"depth":99,"slug":622,"text":623},"delivering-a-talk","Delivering a talk",{"depth":99,"slug":625,"text":626},"improving-your-game","Improving your game",{"depth":99,"slug":628,"text":629},"checklist","Checklist",[],[],{"title":551,"published":633},"2023/10/24",[],"thinking-in-bets",{"id":635,"data":637,"body":640,"filePath":641,"digest":642,"rendered":643},{"title":638,"published":639},"Thinking in Bets - Annie Duke",["Date","2023-10-09T15:00:00.000Z"],"## Life is Poker, not Chess\n* Winning and losing are only loose signals of decision quality\n* \"The implications of treating decisions as bets made it possible for me to find learning opportunities in uncertain environments.\"\n* We are bad at estimating what ratio of \"skill\" and \"luck\" an outcome is based on\n* \"Trouble occurs when we treat real life decisions as if they were chess decisions. Chess contains no hidden information and very little luck.\"\n* \"getting comfortable with \"I'm not sure\" is a vital step to being a better decision-maker. We have to make peace with _not knowing_.\"\n* \"A great decision is the result of a good process, and that process must include an attempt to accurately represent our own state of knowledge.\"\n* If we stop feeling good about winning, we can stop feeling bad about losing. This is a good trade-off. Don't fall for measuring yourself by outcomes!\n* Protect \"prefrontal cortex cycles\" (decision making). You only have so much capacity each day.\n\n## Wanna bet?\n* \"When you are betting, you have to back up your belief by putting a price on it.\" => try this execise for things that people don't usually bet on!\n* Become aware when irrationality is keeping us from acting in our best interest.\n* Everything is a bet - even stuff like parenting choices.\n* Nice side-effect of treating decisions as bets: less lingering regret\n* We bet based on what we believe about the world, so improving our model of the world is a high value activity - always calibrate your beliefs!\n* \"For survival-essential skills, type I errors (false positives) were more costly than type II errors (false negatives). In other words, better safe than sorry\" => Find places where people make this mistake and gain an edge!\n* Sometimes everyone is wrong about something for 25 years, for example low-fat diets\n* We rarely challenge the validity of evidence that supports our case!\n* \"Wanna bet?\" beings the risk out in the open, making explicit what is already implicit (and frequently overlooked)\n* Train yourself to view the world through the lens of \"Wanna bet?\"\n* For everything you say you believe, rank your confidence 0-10\n* \"Expressing our level of confidence also invites people to be our collaborators\"\n\n## Bet to Learn: Fielding the Unfolding Future\n* Experiences can be a great teacher, but you have to let them (and figure out how luck/skill based something was)\n* Learning to improve our model of the world makes us happier, richer, etc\n* Identify self-serving bias! (a bit of impostor syndrome is healthy)\n* \"There are more than seven billion other people on the planet who do stuff all the time\" - learn from them\n* We like attributing our own victories to skill and those of others to luck\n* Look for your mistakes when you're winning!\n* \"Instead of feeling bad when we have to admit a mistake, what if the bad feeling came from the thought that we might be missing a learning opportunity just to avoid blame?\"\n* \"Always\" and \"never\" are forbidden words\n* ðŸš¨ Activity: \"Why is \u003Cperson x> successful? What are they doing that gets them there?\n\n## The Buddy System\n* Are you categorizing losses as a series of things \"happening to you\"?\n* Form a bet-making / truth-seeking group, others can spot your errors easier!\n* \"Two to disagree, and one to referee\"\n* Encourage people to disagree politely, and try to steelman each others viewpoints\n* \"Calibration requires an open-minded consideration of diverse points of view and alternative hypotheses\"\n* \"I don't want to hear it. I'm not trying to hurt your feelings, but if you have a question about a hand, you can ask me about strategy all day long. I just don't think there's much purpose in a poker story if the point is about something you had no control over, like bad luck.\"\n* People care STRONGLY about audience approval in almost all situations\n* View evidence that contradicts your view as helpful, not hurtful\n* Red team your own views\n\n## Dissent to win\n* \"As a rule of thumb, if we have an urge to leave out a detail because it makes us uncomfortable or requires even more clarification to explain away, those are exactly the details we must share\"\n* We tend to overvalue the messenger and undervalue the message - how would you feel about this if you heard it from a different source?\n* Omit the outcome when asking for advice on a play (in poker, but also elsewhere)\n* Examine the level of confidence in your opinions\n* We don't usually examine critically evidence that supports our view\n* ðŸš¨ Ask for an agreement to engage in truth-seeking. Sometimes people just want to vent - \"Do you want to just let it all out, or are you thinking about what to do next?\"\n* \"How might you get rid of all these things that are happening to you (pretend it's luck) in the future?\"\n* Always focus on the future when doing this with people who aren't in on truth-seeking\n\n## Adventures in mental time travel\n* To kids: \"It must be hard to have a teacher like that. Do you think there's anything you can do to improve your grade in the future?\"\n* Think about the future version of you that has to live with a decision!\n* ðŸš¨ What are the consequences of each of my options in ten minutes? In ten months? In ten years?\n* We tend to overvalue our current emotion (flat tire feels like the end of the world)\n* Like looking at a 5 minute window in a stock ticker... tells us NOTHING about long term\n* \"It's all just one long poker game\"\n* We can't ever know the EV of an action, but it's worth thinking about nonetheless\n* ðŸš¨ Activity: assign EV to every bet. Like actually do it. Will take you away from doing 0%/100%\n* What is the EV of my freelance gigs, moonshot projects, CFPs, etc?\n* Backcasting: working backwards from a positive future\n* Premortems: working backwards from a negative future\n* ðŸš¨ Activity: do Backcasting and Premortems for life, work, love, etc\n  * a situation where Satsuki and I are happily married...\n  * \"Okay, we failed. Why did we fail?\"","src/content/bookNotes/thinking-in-bets.md","aaa7415eb8283107",{"html":644,"metadata":645},"\u003Ch2 id=\"life-is-poker-not-chess\">Life is Poker, not Chess\u003C/h2>\n\u003Cul>\n\u003Cli>Winning and losing are only loose signals of decision quality\u003C/li>\n\u003Cli>\"The implications of treating decisions as bets made it possible for me to find learning opportunities in uncertain environments.\"\u003C/li>\n\u003Cli>We are bad at estimating what ratio of \"skill\" and \"luck\" an outcome is based on\u003C/li>\n\u003Cli>\"Trouble occurs when we treat real life decisions as if they were chess decisions. Chess contains no hidden information and very little luck.\"\u003C/li>\n\u003Cli>\"getting comfortable with \"I'm not sure\" is a vital step to being a better decision-maker. We have to make peace with \u003Cem>not knowing\u003C/em>.\"\u003C/li>\n\u003Cli>\"A great decision is the result of a good process, and that process must include an attempt to accurately represent our own state of knowledge.\"\u003C/li>\n\u003Cli>If we stop feeling good about winning, we can stop feeling bad about losing. This is a good trade-off. Don't fall for measuring yourself by outcomes!\u003C/li>\n\u003Cli>Protect \"prefrontal cortex cycles\" (decision making). You only have so much capacity each day.\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"wanna-bet\">Wanna bet?\u003C/h2>\n\u003Cul>\n\u003Cli>\"When you are betting, you have to back up your belief by putting a price on it.\" => try this execise for things that people don't usually bet on!\u003C/li>\n\u003Cli>Become aware when irrationality is keeping us from acting in our best interest.\u003C/li>\n\u003Cli>Everything is a bet - even stuff like parenting choices.\u003C/li>\n\u003Cli>Nice side-effect of treating decisions as bets: less lingering regret\u003C/li>\n\u003Cli>We bet based on what we believe about the world, so improving our model of the world is a high value activity - always calibrate your beliefs!\u003C/li>\n\u003Cli>\"For survival-essential skills, type I errors (false positives) were more costly than type II errors (false negatives). In other words, better safe than sorry\" => Find places where people make this mistake and gain an edge!\u003C/li>\n\u003Cli>Sometimes everyone is wrong about something for 25 years, for example low-fat diets\u003C/li>\n\u003Cli>We rarely challenge the validity of evidence that supports our case!\u003C/li>\n\u003Cli>\"Wanna bet?\" beings the risk out in the open, making explicit what is already implicit (and frequently overlooked)\u003C/li>\n\u003Cli>Train yourself to view the world through the lens of \"Wanna bet?\"\u003C/li>\n\u003Cli>For everything you say you believe, rank your confidence 0-10\u003C/li>\n\u003Cli>\"Expressing our level of confidence also invites people to be our collaborators\"\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"bet-to-learn-fielding-the-unfolding-future\">Bet to Learn: Fielding the Unfolding Future\u003C/h2>\n\u003Cul>\n\u003Cli>Experiences can be a great teacher, but you have to let them (and figure out how luck/skill based something was)\u003C/li>\n\u003Cli>Learning to improve our model of the world makes us happier, richer, etc\u003C/li>\n\u003Cli>Identify self-serving bias! (a bit of impostor syndrome is healthy)\u003C/li>\n\u003Cli>\"There are more than seven billion other people on the planet who do stuff all the time\" - learn from them\u003C/li>\n\u003Cli>We like attributing our own victories to skill and those of others to luck\u003C/li>\n\u003Cli>Look for your mistakes when you're winning!\u003C/li>\n\u003Cli>\"Instead of feeling bad when we have to admit a mistake, what if the bad feeling came from the thought that we might be missing a learning opportunity just to avoid blame?\"\u003C/li>\n\u003Cli>\"Always\" and \"never\" are forbidden words\u003C/li>\n\u003Cli>ðŸš¨ Activity: \"Why is \u003Cperson x=\"\"> successful? What are they doing that gets them there?\u003C/person>\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"the-buddy-system\">The Buddy System\u003C/h2>\n\u003Cul>\n\u003Cli>Are you categorizing losses as a series of things \"happening to you\"?\u003C/li>\n\u003Cli>Form a bet-making / truth-seeking group, others can spot your errors easier!\u003C/li>\n\u003Cli>\"Two to disagree, and one to referee\"\u003C/li>\n\u003Cli>Encourage people to disagree politely, and try to steelman each others viewpoints\u003C/li>\n\u003Cli>\"Calibration requires an open-minded consideration of diverse points of view and alternative hypotheses\"\u003C/li>\n\u003Cli>\"I don't want to hear it. I'm not trying to hurt your feelings, but if you have a question about a hand, you can ask me about strategy all day long. I just don't think there's much purpose in a poker story if the point is about something you had no control over, like bad luck.\"\u003C/li>\n\u003Cli>People care STRONGLY about audience approval in almost all situations\u003C/li>\n\u003Cli>View evidence that contradicts your view as helpful, not hurtful\u003C/li>\n\u003Cli>Red team your own views\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"dissent-to-win\">Dissent to win\u003C/h2>\n\u003Cul>\n\u003Cli>\"As a rule of thumb, if we have an urge to leave out a detail because it makes us uncomfortable or requires even more clarification to explain away, those are exactly the details we must share\"\u003C/li>\n\u003Cli>We tend to overvalue the messenger and undervalue the message - how would you feel about this if you heard it from a different source?\u003C/li>\n\u003Cli>Omit the outcome when asking for advice on a play (in poker, but also elsewhere)\u003C/li>\n\u003Cli>Examine the level of confidence in your opinions\u003C/li>\n\u003Cli>We don't usually examine critically evidence that supports our view\u003C/li>\n\u003Cli>ðŸš¨ Ask for an agreement to engage in truth-seeking. Sometimes people just want to vent - \"Do you want to just let it all out, or are you thinking about what to do next?\"\u003C/li>\n\u003Cli>\"How might you get rid of all these things that are happening to you (pretend it's luck) in the future?\"\u003C/li>\n\u003Cli>Always focus on the future when doing this with people who aren't in on truth-seeking\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"adventures-in-mental-time-travel\">Adventures in mental time travel\u003C/h2>\n\u003Cul>\n\u003Cli>To kids: \"It must be hard to have a teacher like that. Do you think there's anything you can do to improve your grade in the future?\"\u003C/li>\n\u003Cli>Think about the future version of you that has to live with a decision!\u003C/li>\n\u003Cli>ðŸš¨ What are the consequences of each of my options in ten minutes? In ten months? In ten years?\u003C/li>\n\u003Cli>We tend to overvalue our current emotion (flat tire feels like the end of the world)\u003C/li>\n\u003Cli>Like looking at a 5 minute window in a stock ticker... tells us NOTHING about long term\u003C/li>\n\u003Cli>\"It's all just one long poker game\"\u003C/li>\n\u003Cli>We can't ever know the EV of an action, but it's worth thinking about nonetheless\u003C/li>\n\u003Cli>ðŸš¨ Activity: assign EV to every bet. Like actually do it. Will take you away from doing 0%/100%\u003C/li>\n\u003Cli>What is the EV of my freelance gigs, moonshot projects, CFPs, etc?\u003C/li>\n\u003Cli>Backcasting: working backwards from a positive future\u003C/li>\n\u003Cli>Premortems: working backwards from a negative future\u003C/li>\n\u003Cli>ðŸš¨ Activity: do Backcasting and Premortems for life, work, love, etc\n\u003Cul>\n\u003Cli>a situation where Satsuki and I are happily married...\u003C/li>\n\u003Cli>\"Okay, we failed. Why did we fail?\"\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003C/ul>",{"headings":646,"localImagePaths":665,"remoteImagePaths":666,"frontmatter":667,"imagePaths":669},[647,650,653,656,659,662],{"depth":99,"slug":648,"text":649},"life-is-poker-not-chess","Life is Poker, not Chess",{"depth":99,"slug":651,"text":652},"wanna-bet","Wanna bet?",{"depth":99,"slug":654,"text":655},"bet-to-learn-fielding-the-unfolding-future","Bet to Learn: Fielding the Unfolding Future",{"depth":99,"slug":657,"text":658},"the-buddy-system","The Buddy System",{"depth":99,"slug":660,"text":661},"dissent-to-win","Dissent to win",{"depth":99,"slug":663,"text":664},"adventures-in-mental-time-travel","Adventures in mental time travel",[],[],{"title":638,"published":668},"2023/10/10",[],"äººã¯èžãæ–¹ãŒï¼™å‰²",{"id":670,"data":672,"body":674,"filePath":675,"digest":676,"rendered":677},{"title":670,"published":673},["Date","2023-03-31T15:00:00.000Z"],"- ã¯ã˜ã‚ã«è©±ãªã‚“ã‹è‹¦æ‰‹ãƒžãƒžã§ã„ã„\n- å¤šãã®äººãŒã€Œè©±ã™ã€ã¨ã„ã†ã“ã¨ã°ã‹ã‚Šã«ã¨ã‚‰ã‚ã‚Œã¦ã—ã¾ã„ã€ã‚‚ã†ç‰‡æ–¹ã®ã€Œèžãã€ã¨ã„ã†ã“ã¨ã®é‡è¦æ€§ã‚’å¿˜ã‚Œã¦ã„ã‚‹ã®ã§ã™ã€‚\n- äººã¯æœ¬æ¥è©±ã—ãŸã„ç”Ÿãç‰©ã§ã‚ã‚‹ã€‚\n- ã€Œè©±ã•ã›ä¸Šæ‰‹ãªäººã€ã‚’æ±‚ã‚ã¦ã„ã‚‹ã®ã§ã™ã€‚\n- æ°—æŒã¡ã‚’ç†è§£ã—ã¦ãã‚Œã‚‹ã€ãŸã ãã‚Œã ã‘ã§äººã¯æ•‘ã‚ã‚Œã¾ã™ã€‚\n- äººã®è©±ã‚’èžãã¨ãã¯ã€è‡ªåˆ†ã®æ„Ÿæƒ…ã‚’è¡¨ç¾ã—ãªãŒã‚‰èžãã€‚\n- ï¼‘ã¤ç›®ã‹æ„Ÿå˜†ã€ï¼’ã¤ç›®ãŒåå¾©ã€ï¼“ã¤ç›®ãŒå…±æ„Ÿã€ï¼”ã¤ç›®ãŒè³žè³›ã€ãã—ã¦æœ€å¾ŒãŒè³ªå•ã€‚\n- ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¯è‡ªåˆ†ã®ä¸­ã§ã€Œã¡ã‚‡ã£ã¨ã‚ªãƒ¼ãƒãƒ¼ã‹ãªã€ã¨æ€ã†ãã‚‰ã„ã§ã‚„ã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚\n- ã€Œã‚ãªãŸã¯ã©ã†ãªã£ãŸã‚‰å¬‰ã—ã„ï¼Ÿã€\n- ã€Œã©ã†ãªã£ãŸã‚‰å¬‰ã—ã„ï¼Ÿã€ã¯æ„Ÿæƒ…ã§ã€ã€Œã©ã†ã—ãŸã„ã€ã¯å¸Œæœ›ã§ã™ã€‚\n- å†…å®¹ã‚ˆã‚Šã‚‚ã€ã€Œæ„Ÿæƒ…ã€ã‚’èžã“ã†ã€‚\n- ã€Œãã†ã ã£ãŸã‚“ã ã€‚å¤§å¤‰ã ã£ãŸã­ã€‚ã€\n- ç›¸æ‰‹ã®å¿ƒã®æ‰‰ã‚’å¾ã€…ã«é–‹ã„ã¦ã„ãè¨€è‘‰ã€ãã‚Œã¯ã€Œãã†ã ã‚ˆã­ã€ã‚ã‹ã‚‹ã‚ˆã€ã¨ã„ã†å…±æ„Ÿãªã®ã§ã™ã€‚\n- ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ä¼šè­°ã§ã¯ã€å¤§ããªãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãŒã„ã„ã€‚\n- å‘¨ã‚Šã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¯å‘½ç¶±ã®ã‚ˆã†ãªã‚‚ã®ã€‚\n- ãã†è€ƒãˆã‚‹ã¨ã€ãƒŽãƒ¼ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¯ã€è©±ã™äººã«ã¨ã£ã¦ã¯ãƒ¡ãƒ³ã‚¿ãƒ«çš„ã«ã¨ã¦ã‚‚æ„åœ°æ‚ªãªã‚‚ã®ã¨ã‚‚æ‰ãˆã‚‰ã‚Œã¾ã™ã€‚\n- å¦å®šç¦æ­¢ã€‚é­”æ³•ã®å‚¾è´ã€‚ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ä¸‰å€ã€‚\n- å¾Œè¼©ã«ã‚ã‹ã‚‰ãªã„ã“ã¨ã‚’è³ªå•ã§ãã‚‹å…ˆè¼©ã¯å¥½ã‹ã‚Œã‚‹ã€‚\n- ã¾ãšã¯ã€Œèº«è¿‘ãªäººã€ã€Œå¤§åˆ‡ãªäººã€ã®è©±ã‚’èžãã“ã¨ã‹ã‚‰å§‹ã‚ã‚ˆã†ã€‚\n- è‡ªåˆ†ã®æ™‚é–“ã‚’å¤§åˆ‡ãªäººã®ãŸã‚ã«ä½¿ã†ã€‚\n- äººã¯å­¤ç‹¬ã«ãªã‚‹ã¨ã€åˆ¤æ–­ã‚’èª¤ã‚‹ã€‚","src/content/bookNotes/äººã¯èžãæ–¹ãŒï¼™å‰².md","5a692820a6278f21",{"html":678,"metadata":679},"\u003Cul>\n\u003Cli>ã¯ã˜ã‚ã«è©±ãªã‚“ã‹è‹¦æ‰‹ãƒžãƒžã§ã„ã„\u003C/li>\n\u003Cli>å¤šãã®äººãŒã€Œè©±ã™ã€ã¨ã„ã†ã“ã¨ã°ã‹ã‚Šã«ã¨ã‚‰ã‚ã‚Œã¦ã—ã¾ã„ã€ã‚‚ã†ç‰‡æ–¹ã®ã€Œèžãã€ã¨ã„ã†ã“ã¨ã®é‡è¦æ€§ã‚’å¿˜ã‚Œã¦ã„ã‚‹ã®ã§ã™ã€‚\u003C/li>\n\u003Cli>äººã¯æœ¬æ¥è©±ã—ãŸã„ç”Ÿãç‰©ã§ã‚ã‚‹ã€‚\u003C/li>\n\u003Cli>ã€Œè©±ã•ã›ä¸Šæ‰‹ãªäººã€ã‚’æ±‚ã‚ã¦ã„ã‚‹ã®ã§ã™ã€‚\u003C/li>\n\u003Cli>æ°—æŒã¡ã‚’ç†è§£ã—ã¦ãã‚Œã‚‹ã€ãŸã ãã‚Œã ã‘ã§äººã¯æ•‘ã‚ã‚Œã¾ã™ã€‚\u003C/li>\n\u003Cli>äººã®è©±ã‚’èžãã¨ãã¯ã€è‡ªåˆ†ã®æ„Ÿæƒ…ã‚’è¡¨ç¾ã—ãªãŒã‚‰èžãã€‚\u003C/li>\n\u003Cli>ï¼‘ã¤ç›®ã‹æ„Ÿå˜†ã€ï¼’ã¤ç›®ãŒåå¾©ã€ï¼“ã¤ç›®ãŒå…±æ„Ÿã€ï¼”ã¤ç›®ãŒè³žè³›ã€ãã—ã¦æœ€å¾ŒãŒè³ªå•ã€‚\u003C/li>\n\u003Cli>ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¯è‡ªåˆ†ã®ä¸­ã§ã€Œã¡ã‚‡ã£ã¨ã‚ªãƒ¼ãƒãƒ¼ã‹ãªã€ã¨æ€ã†ãã‚‰ã„ã§ã‚„ã£ã¦ã¿ã¾ã—ã‚‡ã†ã€‚\u003C/li>\n\u003Cli>ã€Œã‚ãªãŸã¯ã©ã†ãªã£ãŸã‚‰å¬‰ã—ã„ï¼Ÿã€\u003C/li>\n\u003Cli>ã€Œã©ã†ãªã£ãŸã‚‰å¬‰ã—ã„ï¼Ÿã€ã¯æ„Ÿæƒ…ã§ã€ã€Œã©ã†ã—ãŸã„ã€ã¯å¸Œæœ›ã§ã™ã€‚\u003C/li>\n\u003Cli>å†…å®¹ã‚ˆã‚Šã‚‚ã€ã€Œæ„Ÿæƒ…ã€ã‚’èžã“ã†ã€‚\u003C/li>\n\u003Cli>ã€Œãã†ã ã£ãŸã‚“ã ã€‚å¤§å¤‰ã ã£ãŸã­ã€‚ã€\u003C/li>\n\u003Cli>ç›¸æ‰‹ã®å¿ƒã®æ‰‰ã‚’å¾ã€…ã«é–‹ã„ã¦ã„ãè¨€è‘‰ã€ãã‚Œã¯ã€Œãã†ã ã‚ˆã­ã€ã‚ã‹ã‚‹ã‚ˆã€ã¨ã„ã†å…±æ„Ÿãªã®ã§ã™ã€‚\u003C/li>\n\u003Cli>ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ä¼šè­°ã§ã¯ã€å¤§ããªãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãŒã„ã„ã€‚\u003C/li>\n\u003Cli>å‘¨ã‚Šã®ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¯å‘½ç¶±ã®ã‚ˆã†ãªã‚‚ã®ã€‚\u003C/li>\n\u003Cli>ãã†è€ƒãˆã‚‹ã¨ã€ãƒŽãƒ¼ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¯ã€è©±ã™äººã«ã¨ã£ã¦ã¯ãƒ¡ãƒ³ã‚¿ãƒ«çš„ã«ã¨ã¦ã‚‚æ„åœ°æ‚ªãªã‚‚ã®ã¨ã‚‚æ‰ãˆã‚‰ã‚Œã¾ã™ã€‚\u003C/li>\n\u003Cli>å¦å®šç¦æ­¢ã€‚é­”æ³•ã®å‚¾è´ã€‚ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ä¸‰å€ã€‚\u003C/li>\n\u003Cli>å¾Œè¼©ã«ã‚ã‹ã‚‰ãªã„ã“ã¨ã‚’è³ªå•ã§ãã‚‹å…ˆè¼©ã¯å¥½ã‹ã‚Œã‚‹ã€‚\u003C/li>\n\u003Cli>ã¾ãšã¯ã€Œèº«è¿‘ãªäººã€ã€Œå¤§åˆ‡ãªäººã€ã®è©±ã‚’èžãã“ã¨ã‹ã‚‰å§‹ã‚ã‚ˆã†ã€‚\u003C/li>\n\u003Cli>è‡ªåˆ†ã®æ™‚é–“ã‚’å¤§åˆ‡ãªäººã®ãŸã‚ã«ä½¿ã†ã€‚\u003C/li>\n\u003Cli>äººã¯å­¤ç‹¬ã«ãªã‚‹ã¨ã€åˆ¤æ–­ã‚’èª¤ã‚‹ã€‚\u003C/li>\n\u003C/ul>",{"headings":680,"localImagePaths":681,"remoteImagePaths":682,"frontmatter":683,"imagePaths":685},[],[],[],{"title":670,"published":684},"2023/04/01",[],"misc",["Map",688,689,725,726,801,802],"javascript-toys",{"id":688,"data":690,"body":692,"filePath":693,"digest":694,"rendered":695},{"title":691},"The new toys JavaScript MIGHT get - Resources","## Slides\n- [pdf](/slides/Christopher%20Ehrlich%20-%20New%20Toys.pdf)\n\n## Proposals discussed\n\n### Pattern Matching\n\n- [Proposal](https://github.com/tc39/proposal-pattern-matching)\n- [Specification Draft](https://tc39.es/proposal-pattern-matching/)\n\n### Pipe\n- [Proposal](https://github.com/tc39/proposal-pipeline-operator)\n- [Specification Draft](https://tc39.es/proposal-pipeline-operator/)\n- [Syntax Bikeshedding](https://github.com/tc39/proposal-pipeline-operator/issues/91)\n\n### `throws` clause\n- [Ryan Cavanaugh - Why TypeScript isn't getting a `throws` clause](https://github.com/microsoft/TypeScript/issues/13219#issuecomment-1515037604)\n\n## Other notes\n\n- [How TC39 works](https://www.youtube.com/live/K4lp1sirkJg?si=M375sXeNXUyeXL5J&t=243)\n- [TC39 meeting notes](https://github.com/tc39/notes/tree/4e98ee2fcda6614084b92a63b0aeea024c61ad26/meetings)\n\n## My stuff\n\n- [Twitter](https://twitter.com/ccccjjjjeeee)\n- [GitHub](https://github.com/c-ehrlich)\n- [YouTube](https://youtube.com/@ccccjjjjeee)","src/content/misc/javascript-toys.md","613a107205fe6580",{"html":696,"metadata":697},"\u003Ch2 id=\"slides\">Slides\u003C/h2>\n\u003Cul>\n\u003Cli>\u003Ca href=\"/slides/Christopher%20Ehrlich%20-%20New%20Toys.pdf\">pdf\u003C/a>\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"proposals-discussed\">Proposals discussed\u003C/h2>\n\u003Ch3 id=\"pattern-matching\">Pattern Matching\u003C/h3>\n\u003Cul>\n\u003Cli>\u003Ca href=\"https://github.com/tc39/proposal-pattern-matching\">Proposal\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://tc39.es/proposal-pattern-matching/\">Specification Draft\u003C/a>\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"pipe\">Pipe\u003C/h3>\n\u003Cul>\n\u003Cli>\u003Ca href=\"https://github.com/tc39/proposal-pipeline-operator\">Proposal\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://tc39.es/proposal-pipeline-operator/\">Specification Draft\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://github.com/tc39/proposal-pipeline-operator/issues/91\">Syntax Bikeshedding\u003C/a>\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"throws-clause\">\u003Ccode>throws\u003C/code> clause\u003C/h3>\n\u003Cul>\n\u003Cli>\u003Ca href=\"https://github.com/microsoft/TypeScript/issues/13219#issuecomment-1515037604\">Ryan Cavanaugh - Why TypeScript isn't getting a \u003Ccode>throws\u003C/code> clause\u003C/a>\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"other-notes\">Other notes\u003C/h2>\n\u003Cul>\n\u003Cli>\u003Ca href=\"https://www.youtube.com/live/K4lp1sirkJg?si=M375sXeNXUyeXL5J&#x26;t=243\">How TC39 works\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://github.com/tc39/notes/tree/4e98ee2fcda6614084b92a63b0aeea024c61ad26/meetings\">TC39 meeting notes\u003C/a>\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"my-stuff\">My stuff\u003C/h2>\n\u003Cul>\n\u003Cli>\u003Ca href=\"https://twitter.com/ccccjjjjeeee\">Twitter\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://github.com/c-ehrlich\">GitHub\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://youtube.com/@ccccjjjjeee\">YouTube\u003C/a>\u003C/li>\n\u003C/ul>",{"headings":698,"localImagePaths":721,"remoteImagePaths":722,"frontmatter":723,"imagePaths":724},[699,702,705,709,712,715,718],{"depth":99,"slug":700,"text":701},"slides","Slides",{"depth":99,"slug":703,"text":704},"proposals-discussed","Proposals discussed",{"depth":706,"slug":707,"text":708},3,"pattern-matching","Pattern Matching",{"depth":706,"slug":710,"text":711},"pipe","Pipe",{"depth":706,"slug":713,"text":714},"throws-clause","throws clause",{"depth":99,"slug":716,"text":717},"other-notes","Other notes",{"depth":99,"slug":719,"text":720},"my-stuff","My stuff",[],[],{"title":691},[],"edge",{"id":725,"data":727,"body":729,"filePath":730,"digest":731,"rendered":732},{"title":728},"Deploying to the edge","## How did we get here?\n\n### Servers\n- simple mental model\n- downsides: scaling (EVERY service is bursty), need to do devops\n\n### CDNs\n- Akamai, Fastly, AWS CloudFront, Cloudflare\n- Fastly had an outage in 2021, it broke Twitter, npm, GitHub, Stack Overflow, etc for \n- Locations - Fastly: 79 cities, Cloudflare ~300 cities, Akamai: 150 countries, CloudFront: 500+ locations in 100+ cities\n- CloudFront mostly in tier 1/2 telecom carrier data centers, a few of their own. Akamai & Cloudflare primarily use their own datacenters, but still colocate. Fastly is entirely own infra. \n- Edge caching for requests ... eg CloudFront has ~20 edge cache regions\n\n### Lambda\n- can sometime be in a few more regions (but Vercel defaults to 1... TKTK check if you can get more)\n\n### ...what else could we use these data centers for?\n- instead of picking a region, put your compute everywhere\n  - sometimes you still want to be in one reason bc db roundtrips\n- but it's not good for main application logic because you want to be closer to your db, right?\n\n### ...but it's still amazing if you're using just one region or a few \n- cf worker cold starts are about the same as lambda warm starts\n\n### Worker vs Lambda - https://www.youtube.com/watch?v=vzWiSF0y4Wo\n- Lambda\n    - designed for single-region (Lambda@Edge exists, but kinda slow and hilariously expensive)\n    - Isolated as Firecracker VMs (LOOK UP WHAT THIS IS / HOW IT WORKS)\n      - it's brilliant, but it's VMs in a hypervisor\n    - Long running - up to 15min\n    - Big - 10,240 MB memory, up to six vCPUs, up to 10GB code with container image packaging format\n\n## What is it?\n- 250+ regions!\n- no cold starts thanks to edge storage\n- you can write JS/TS and WASM\n- functions... essentially fetch handlers\n- CF also offers KV, storage, R2 (interfaced through workers), durable objects (long lived, globally consistent, javascript objects - partykit!), durable object alarms - basically cron,\n- \"limited, but good\"\n\n- if you've ever deployed a next.js app with middleware to vercel, you've used it\n- that's why for example next-auth doesn't work in middleware\n- same with routing... imagine if we had cold starts for redirecting to a different URL\n\n- similar to service worker ... go \"inbetween\" a request, \n\n## V8 Isolates\n- containers need to pull in language runtime\n- lambda keeps running / charging you money while you hit the db\n- V8... The JS engine of Chromium\n- Vercel: $2 / 1M units, ~20 regions => but still a great choice because of how easy it is\n- Cloudflare: $0.50 / 1M units, ~300 regions\n\n## WinterCG - https://www.youtube.com/watch?v=fih5Yt3UiNg\n- A w3c community group (that's what CG means)\n- Cloudflare, Netlify, Fastly, Deno, Shopify, Vercel, ByteDance, Alibaba, etc\n- The goal is interoperability\n  - landing `fetch` in Node was super difficult re interoperability etc. And before you had to use `request`, `axios`, `node-fetch` works different from browser, various polyfills, etc\n- across ALL JavaScript environments\n  - deno, cloudflare workerd, vercel/netlify serverless functions, etc\n  - there's no \"Node standard\", there's just Node\n  - WinterCG: no new APIs, instead merge gaps between runtimes\n  - we want to be compatible with the browser APIs\n- Node on Lambda, WinterCG is portable\n- It's not a runtime, it's a standard that others implement in their own runtime\n  - also test suites for testing that a runtime conforms to wintercg\n  - but also give back to the ecosystem\n- Propose improvements to existing specifications => example: fetch is defined by whatwg rather than w3g\n  - don't \"make a new fetch\", instead contribute to the existing fetch\n  - \"everyone should use fetch, but let's also improve it\"\n- bit less permanent than ecma (can undo things)\n- \"Minimum common API\"\n  - a collection of other web platform APIs ... readable streams, web crypto, fetch, etc... every WinterCG compatible runtime should implement these\n    - \"common key\" - like ES2020 etc... you can know that your runtime has at least x ... `engines: { wintercg: \">=2023\" }`\n- Why is this different than last time? Undici implements whatwg etc... => because of who's behind it\n- WinterCG also works with TC39\n\n## Why now?\n- It's getting easier\n  - lib compatibility\n  - vercel\n  - one line in next.js\n  - similar in nuxt\n  - new libraries\n    - lucia for auth\n    - kysely and drizzle for ORMs\n  - new services to get around ephemerality & runtime limitations\n    - \"Serverless problems require serverless solutions\"\n    - use Durable Objects as a message broker (or hosted kafka, rabbitmq, etc)\n    - Vercel/Cloudflare KV, Neon, PlanetScale, Turso, Upstash, MongoDB Atlas, DynamoDB\n    - Clerk, Auth0, or roll your own with Lucia/NextAuth\n    - sentry with toucan-js\n    - axiom-js works everywhere\n\n## BFF Pattern - Workers a great fit - https://youtu.be/1tM_d3CH0N0?si=8Uo6o3bAQIdg49qB\n- Empower FE devs with lightning fast edge functions to call your deeper BE services (own or external)\n  - Who here has had a BFF that's just a wrapper around some API keys?\n- Have a Fargate box for long running tasks, but handle user interaction fast\n- Axiom uses Servers, Lambda, and Edge. Exploring WASM on workers for ingest pipeline.\n\n## Using CF Workers as your only backend - https://www.youtube.com/watch?v=1tM_d3CH0N0\n- you'll probably need services\n\n## Limitations\n\n### Library compatibility\n- ...but we're reaching a point where there's solutions for every task\n\n#### PlanetScale + CF Workers\n\n## Cool stuff\n\n### CF Workers local dev\n- `wrangler dev`\n- deploys dev changes into edge network, you're developing on edge with HRM. really slick\n- hit `d` to get a debugger in chrome - browser debugger, see logs, etc\n- can also run the whole thing locally (cicd, offline dev, etc)\n\n## Shortcomings\n- You probably can't use JUST workers for everything\n- Not Node (maybe this is good?) - but can get some node builtins back via workerd\n- Documentation/Examples/Education still lacking\n\n## Final Word\n- CF Workers (and edge in general) are great\n- Performance!\n- Dev is fast\n- Limitations can be frustrating\n- DBs are getting there\n- It's excellent for BFF","src/content/misc/edge.md","6f15b645c081af15",{"html":733,"metadata":734},"\u003Ch2 id=\"how-did-we-get-here\">How did we get here?\u003C/h2>\n\u003Ch3 id=\"servers\">Servers\u003C/h3>\n\u003Cul>\n\u003Cli>simple mental model\u003C/li>\n\u003Cli>downsides: scaling (EVERY service is bursty), need to do devops\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"cdns\">CDNs\u003C/h3>\n\u003Cul>\n\u003Cli>Akamai, Fastly, AWS CloudFront, Cloudflare\u003C/li>\n\u003Cli>Fastly had an outage in 2021, it broke Twitter, npm, GitHub, Stack Overflow, etc for\u003C/li>\n\u003Cli>Locations - Fastly: 79 cities, Cloudflare ~300 cities, Akamai: 150 countries, CloudFront: 500+ locations in 100+ cities\u003C/li>\n\u003Cli>CloudFront mostly in tier 1/2 telecom carrier data centers, a few of their own. Akamai &#x26; Cloudflare primarily use their own datacenters, but still colocate. Fastly is entirely own infra.\u003C/li>\n\u003Cli>Edge caching for requests ... eg CloudFront has ~20 edge cache regions\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"lambda\">Lambda\u003C/h3>\n\u003Cul>\n\u003Cli>can sometime be in a few more regions (but Vercel defaults to 1... TKTK check if you can get more)\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"what-else-could-we-use-these-data-centers-for\">...what else could we use these data centers for?\u003C/h3>\n\u003Cul>\n\u003Cli>instead of picking a region, put your compute everywhere\n\u003Cul>\n\u003Cli>sometimes you still want to be in one reason bc db roundtrips\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>but it's not good for main application logic because you want to be closer to your db, right?\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"but-its-still-amazing-if-youre-using-just-one-region-or-a-few\">...but it's still amazing if you're using just one region or a few\u003C/h3>\n\u003Cul>\n\u003Cli>cf worker cold starts are about the same as lambda warm starts\u003C/li>\n\u003C/ul>\n\u003Ch3 id=\"worker-vs-lambda---httpswwwyoutubecomwatchvvzwisf0y4wo\">Worker vs Lambda - https://www.youtube.com/watch?v=vzWiSF0y4Wo\u003C/h3>\n\u003Cul>\n\u003Cli>Lambda\n\u003Cul>\n\u003Cli>designed for single-region (Lambda@Edge exists, but kinda slow and hilariously expensive)\u003C/li>\n\u003Cli>Isolated as Firecracker VMs (LOOK UP WHAT THIS IS / HOW IT WORKS)\n\u003Cul>\n\u003Cli>it's brilliant, but it's VMs in a hypervisor\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>Long running - up to 15min\u003C/li>\n\u003Cli>Big - 10,240 MB memory, up to six vCPUs, up to 10GB code with container image packaging format\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"what-is-it\">What is it?\u003C/h2>\n\u003Cul>\n\u003Cli>\n\u003Cp>250+ regions!\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>no cold starts thanks to edge storage\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>you can write JS/TS and WASM\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>functions... essentially fetch handlers\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>CF also offers KV, storage, R2 (interfaced through workers), durable objects (long lived, globally consistent, javascript objects - partykit!), durable object alarms - basically cron,\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>\"limited, but good\"\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>if you've ever deployed a next.js app with middleware to vercel, you've used it\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>that's why for example next-auth doesn't work in middleware\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>same with routing... imagine if we had cold starts for redirecting to a different URL\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>similar to service worker ... go \"inbetween\" a request,\u003C/p>\n\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"v8-isolates\">V8 Isolates\u003C/h2>\n\u003Cul>\n\u003Cli>containers need to pull in language runtime\u003C/li>\n\u003Cli>lambda keeps running / charging you money while you hit the db\u003C/li>\n\u003Cli>V8... The JS engine of Chromium\u003C/li>\n\u003Cli>Vercel: $2 / 1M units, ~20 regions => but still a great choice because of how easy it is\u003C/li>\n\u003Cli>Cloudflare: $0.50 / 1M units, ~300 regions\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"wintercg---httpswwwyoutubecomwatchvfih5yt3uing\">WinterCG - https://www.youtube.com/watch?v=fih5Yt3UiNg\u003C/h2>\n\u003Cul>\n\u003Cli>A w3c community group (that's what CG means)\u003C/li>\n\u003Cli>Cloudflare, Netlify, Fastly, Deno, Shopify, Vercel, ByteDance, Alibaba, etc\u003C/li>\n\u003Cli>The goal is interoperability\n\u003Cul>\n\u003Cli>landing \u003Ccode>fetch\u003C/code> in Node was super difficult re interoperability etc. And before you had to use \u003Ccode>request\u003C/code>, \u003Ccode>axios\u003C/code>, \u003Ccode>node-fetch\u003C/code> works different from browser, various polyfills, etc\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>across ALL JavaScript environments\n\u003Cul>\n\u003Cli>deno, cloudflare workerd, vercel/netlify serverless functions, etc\u003C/li>\n\u003Cli>there's no \"Node standard\", there's just Node\u003C/li>\n\u003Cli>WinterCG: no new APIs, instead merge gaps between runtimes\u003C/li>\n\u003Cli>we want to be compatible with the browser APIs\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>Node on Lambda, WinterCG is portable\u003C/li>\n\u003Cli>It's not a runtime, it's a standard that others implement in their own runtime\n\u003Cul>\n\u003Cli>also test suites for testing that a runtime conforms to wintercg\u003C/li>\n\u003Cli>but also give back to the ecosystem\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>Propose improvements to existing specifications => example: fetch is defined by whatwg rather than w3g\n\u003Cul>\n\u003Cli>don't \"make a new fetch\", instead contribute to the existing fetch\u003C/li>\n\u003Cli>\"everyone should use fetch, but let's also improve it\"\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>bit less permanent than ecma (can undo things)\u003C/li>\n\u003Cli>\"Minimum common API\"\n\u003Cul>\n\u003Cli>a collection of other web platform APIs ... readable streams, web crypto, fetch, etc... every WinterCG compatible runtime should implement these\n\u003Cul>\n\u003Cli>\"common key\" - like ES2020 etc... you can know that your runtime has at least x ... \u003Ccode>engines: { wintercg: \">=2023\" }\u003C/code>\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>Why is this different than last time? Undici implements whatwg etc... => because of who's behind it\u003C/li>\n\u003Cli>WinterCG also works with TC39\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"why-now\">Why now?\u003C/h2>\n\u003Cul>\n\u003Cli>It's getting easier\n\u003Cul>\n\u003Cli>lib compatibility\u003C/li>\n\u003Cli>vercel\u003C/li>\n\u003Cli>one line in next.js\u003C/li>\n\u003Cli>similar in nuxt\u003C/li>\n\u003Cli>new libraries\n\u003Cul>\n\u003Cli>lucia for auth\u003C/li>\n\u003Cli>kysely and drizzle for ORMs\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>new services to get around ephemerality &#x26; runtime limitations\n\u003Cul>\n\u003Cli>\"Serverless problems require serverless solutions\"\u003C/li>\n\u003Cli>use Durable Objects as a message broker (or hosted kafka, rabbitmq, etc)\u003C/li>\n\u003Cli>Vercel/Cloudflare KV, Neon, PlanetScale, Turso, Upstash, MongoDB Atlas, DynamoDB\u003C/li>\n\u003Cli>Clerk, Auth0, or roll your own with Lucia/NextAuth\u003C/li>\n\u003Cli>sentry with toucan-js\u003C/li>\n\u003Cli>axiom-js works everywhere\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"bff-pattern---workers-a-great-fit---httpsyoutube1tm_d3ch0n0si8uo6o3baqidg49qb\">BFF Pattern - Workers a great fit - https://youtu.be/1tM_d3CH0N0?si=8Uo6o3bAQIdg49qB\u003C/h2>\n\u003Cul>\n\u003Cli>Empower FE devs with lightning fast edge functions to call your deeper BE services (own or external)\n\u003Cul>\n\u003Cli>Who here has had a BFF that's just a wrapper around some API keys?\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>Have a Fargate box for long running tasks, but handle user interaction fast\u003C/li>\n\u003Cli>Axiom uses Servers, Lambda, and Edge. Exploring WASM on workers for ingest pipeline.\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"using-cf-workers-as-your-only-backend---httpswwwyoutubecomwatchv1tm_d3ch0n0\">Using CF Workers as your only backend - https://www.youtube.com/watch?v=1tM_d3CH0N0\u003C/h2>\n\u003Cul>\n\u003Cli>you'll probably need services\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"limitations\">Limitations\u003C/h2>\n\u003Ch3 id=\"library-compatibility\">Library compatibility\u003C/h3>\n\u003Cul>\n\u003Cli>...but we're reaching a point where there's solutions for every task\u003C/li>\n\u003C/ul>\n\u003Ch4 id=\"planetscale--cf-workers\">PlanetScale + CF Workers\u003C/h4>\n\u003Ch2 id=\"cool-stuff\">Cool stuff\u003C/h2>\n\u003Ch3 id=\"cf-workers-local-dev\">CF Workers local dev\u003C/h3>\n\u003Cul>\n\u003Cli>\u003Ccode>wrangler dev\u003C/code>\u003C/li>\n\u003Cli>deploys dev changes into edge network, you're developing on edge with HRM. really slick\u003C/li>\n\u003Cli>hit \u003Ccode>d\u003C/code> to get a debugger in chrome - browser debugger, see logs, etc\u003C/li>\n\u003Cli>can also run the whole thing locally (cicd, offline dev, etc)\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"shortcomings\">Shortcomings\u003C/h2>\n\u003Cul>\n\u003Cli>You probably can't use JUST workers for everything\u003C/li>\n\u003Cli>Not Node (maybe this is good?) - but can get some node builtins back via workerd\u003C/li>\n\u003Cli>Documentation/Examples/Education still lacking\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"final-word\">Final Word\u003C/h2>\n\u003Cul>\n\u003Cli>CF Workers (and edge in general) are great\u003C/li>\n\u003Cli>Performance!\u003C/li>\n\u003Cli>Dev is fast\u003C/li>\n\u003Cli>Limitations can be frustrating\u003C/li>\n\u003Cli>DBs are getting there\u003C/li>\n\u003Cli>It's excellent for BFF\u003C/li>\n\u003C/ul>",{"headings":735,"localImagePaths":797,"remoteImagePaths":798,"frontmatter":799,"imagePaths":800},[736,739,742,745,748,751,754,757,760,763,766,769,772,775,778,781,785,788,791,794],{"depth":99,"slug":737,"text":738},"how-did-we-get-here","How did we get here?",{"depth":706,"slug":740,"text":741},"servers","Servers",{"depth":706,"slug":743,"text":744},"cdns","CDNs",{"depth":706,"slug":746,"text":747},"lambda","Lambda",{"depth":706,"slug":749,"text":750},"what-else-could-we-use-these-data-centers-for","...what else could we use these data centers for?",{"depth":706,"slug":752,"text":753},"but-its-still-amazing-if-youre-using-just-one-region-or-a-few","...but it's still amazing if you're using just one region or a few",{"depth":706,"slug":755,"text":756},"worker-vs-lambda---httpswwwyoutubecomwatchvvzwisf0y4wo","Worker vs Lambda - https://www.youtube.com/watch?v=vzWiSF0y4Wo",{"depth":99,"slug":758,"text":759},"what-is-it","What is it?",{"depth":99,"slug":761,"text":762},"v8-isolates","V8 Isolates",{"depth":99,"slug":764,"text":765},"wintercg---httpswwwyoutubecomwatchvfih5yt3uing","WinterCG - https://www.youtube.com/watch?v=fih5Yt3UiNg",{"depth":99,"slug":767,"text":768},"why-now","Why now?",{"depth":99,"slug":770,"text":771},"bff-pattern---workers-a-great-fit---httpsyoutube1tm_d3ch0n0si8uo6o3baqidg49qb","BFF Pattern - Workers a great fit - https://youtu.be/1tM_d3CH0N0?si=8Uo6o3bAQIdg49qB",{"depth":99,"slug":773,"text":774},"using-cf-workers-as-your-only-backend---httpswwwyoutubecomwatchv1tm_d3ch0n0","Using CF Workers as your only backend - https://www.youtube.com/watch?v=1tM_d3CH0N0",{"depth":99,"slug":776,"text":777},"limitations","Limitations",{"depth":706,"slug":779,"text":780},"library-compatibility","Library compatibility",{"depth":782,"slug":783,"text":784},4,"planetscale--cf-workers","PlanetScale + CF Workers",{"depth":99,"slug":786,"text":787},"cool-stuff","Cool stuff",{"depth":706,"slug":789,"text":790},"cf-workers-local-dev","CF Workers local dev",{"depth":99,"slug":792,"text":793},"shortcomings","Shortcomings",{"depth":99,"slug":795,"text":796},"final-word","Final Word",[],[],{"title":728},[],"trpc-viennajs",{"id":801,"data":803,"body":805,"filePath":806,"digest":807,"rendered":808},{"title":804},"tRPC talk at Vienna JS - Resources","- [Talk Slides](https://github.com/c-ehrlich/trpc-viennajs-talk/blob/main/slides-export.pdf)\n\n## tRPC\n\n- [tRPC.io](https://trpc.io/)\n\n## Videos\n\n- [Chris Bautista: Making typesafe APIs easy with tRPC](https://www.youtube.com/watch?v=2LYM8gf184U)\n- [Discussing tRPC & GraphQL with Theo Browne & Max Stoiber](https://www.youtube.com/watch?v=2-407yO8nEU)\n- [How tRPC really works](https://www.youtube.com/watch?v=x4mu-jOiA0Q)\n- [Advanced tRPC - Callers, functions, and gSSP](https://www.youtube.com/watch?v=G2ZzmgShHgQ)\n\n## Tools\n\n- [Create T3 App](https://create.t3.gg) - the best way to get started with tRPC in Next.js without having to deal with boilerplate\n- [Create T3 Turbo](https://github.com/t3-oss/create-t3-turbo) - Monorepo with tRPC, Next.js, and React Native\n- [tRPC Panel](https://github.com/iway1/trpc-panel) - Testing UI and documentation for your tRPC endpoints\n- [tRPC-OpenAPI](https://github.com/jlalmes/trpc-openapi) - Create OpenAPI endpoints from your tRPC codebase\n- [Kitchen Sink](https://kitchen-sink.trpc.io/react-hook-form) - Everything you need to make awesome forms with tRPC\n\n## Large OSS Codebases using tRPC\n\n- [Cal.com](https://github.com/calcom/cal.com)\n- [Badass Courses (total TypeScript, Kent C Dodds, etc)](https://github.com/skillrecordings/egghead-next)\n- [Answer Overflow](https://www.answeroverflow.com/)\n\n## Tutorials\n\n- [Theo - T3 Stack Tutorial - FROM 0 TO PROD FOR $0 (Next.js, tRPC, TypeScript, Tailwind, Prisma & More)](https://www.youtube.com/watch?v=YkOSUVzOAA4)\n- [Jack Herrington - T3: TRPC, Prisma and NextAuth Done Right](https://www.youtube.com/watch?v=J1gzN1SAhyM)\n\n## My stuff\n\n- [Twitter](https://twitter.com/ccccjjjjeeee)\n- [YouTube](https://youtube.com/@ccccjjjjeee)","src/content/misc/trpc-viennajs.md","e50df1f6c98a04dd",{"html":809,"metadata":810},"\u003Cul>\n\u003Cli>\u003Ca href=\"https://github.com/c-ehrlich/trpc-viennajs-talk/blob/main/slides-export.pdf\">Talk Slides\u003C/a>\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"trpc\">tRPC\u003C/h2>\n\u003Cul>\n\u003Cli>\u003Ca href=\"https://trpc.io/\">tRPC.io\u003C/a>\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"videos\">Videos\u003C/h2>\n\u003Cul>\n\u003Cli>\u003Ca href=\"https://www.youtube.com/watch?v=2LYM8gf184U\">Chris Bautista: Making typesafe APIs easy with tRPC\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://www.youtube.com/watch?v=2-407yO8nEU\">Discussing tRPC &#x26; GraphQL with Theo Browne &#x26; Max Stoiber\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://www.youtube.com/watch?v=x4mu-jOiA0Q\">How tRPC really works\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://www.youtube.com/watch?v=G2ZzmgShHgQ\">Advanced tRPC - Callers, functions, and gSSP\u003C/a>\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"tools\">Tools\u003C/h2>\n\u003Cul>\n\u003Cli>\u003Ca href=\"https://create.t3.gg\">Create T3 App\u003C/a> - the best way to get started with tRPC in Next.js without having to deal with boilerplate\u003C/li>\n\u003Cli>\u003Ca href=\"https://github.com/t3-oss/create-t3-turbo\">Create T3 Turbo\u003C/a> - Monorepo with tRPC, Next.js, and React Native\u003C/li>\n\u003Cli>\u003Ca href=\"https://github.com/iway1/trpc-panel\">tRPC Panel\u003C/a> - Testing UI and documentation for your tRPC endpoints\u003C/li>\n\u003Cli>\u003Ca href=\"https://github.com/jlalmes/trpc-openapi\">tRPC-OpenAPI\u003C/a> - Create OpenAPI endpoints from your tRPC codebase\u003C/li>\n\u003Cli>\u003Ca href=\"https://kitchen-sink.trpc.io/react-hook-form\">Kitchen Sink\u003C/a> - Everything you need to make awesome forms with tRPC\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"large-oss-codebases-using-trpc\">Large OSS Codebases using tRPC\u003C/h2>\n\u003Cul>\n\u003Cli>\u003Ca href=\"https://github.com/calcom/cal.com\">Cal.com\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://github.com/skillrecordings/egghead-next\">Badass Courses (total TypeScript, Kent C Dodds, etc)\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://www.answeroverflow.com/\">Answer Overflow\u003C/a>\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"tutorials\">Tutorials\u003C/h2>\n\u003Cul>\n\u003Cli>\u003Ca href=\"https://www.youtube.com/watch?v=YkOSUVzOAA4\">Theo - T3 Stack Tutorial - FROM 0 TO PROD FOR $0 (Next.js, tRPC, TypeScript, Tailwind, Prisma &#x26; More)\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://www.youtube.com/watch?v=J1gzN1SAhyM\">Jack Herrington - T3: TRPC, Prisma and NextAuth Done Right\u003C/a>\u003C/li>\n\u003C/ul>\n\u003Ch2 id=\"my-stuff\">My stuff\u003C/h2>\n\u003Cul>\n\u003Cli>\u003Ca href=\"https://twitter.com/ccccjjjjeeee\">Twitter\u003C/a>\u003C/li>\n\u003Cli>\u003Ca href=\"https://youtube.com/@ccccjjjjeee\">YouTube\u003C/a>\u003C/li>\n\u003C/ul>",{"headings":811,"localImagePaths":827,"remoteImagePaths":828,"frontmatter":829,"imagePaths":830},[812,814,817,820,823,826],{"depth":99,"slug":813,"text":160},"trpc",{"depth":99,"slug":815,"text":816},"videos","Videos",{"depth":99,"slug":818,"text":819},"tools","Tools",{"depth":99,"slug":821,"text":822},"large-oss-codebases-using-trpc","Large OSS Codebases using tRPC",{"depth":99,"slug":824,"text":825},"tutorials","Tutorials",{"depth":99,"slug":719,"text":720},[],[],{"title":804},[],"blog-draft",["Map",833,834],"rsc",{"id":833,"data":835,"body":836,"filePath":837,"digest":838,"rendered":839},{},"!!! this is my personal learning journey, so if you're expecting a fully formed well crafted simple explanation that clicks, then this will probably not be it. But I've done some deep dives in the last couple of weeks, so maybe there' something useful in here for you :)\n\nDAN TWEET ABOUT BLUE/GREEN\nhttps://twitter.com/dan_abramov/status/1633574036767662080/photo/1\nGSSP, Loaders, etc is one blue component with a bunch of green ones inside\nso if you SSR, you have to hydrate everything inside. with RSC you only have to hydrate the client bits\nconnect to red/blue functions https://journal.stuffwithstuff.com/2015/02/01/what-color-is-your-function/\n\nRyan Carniato said \"client components\" is a misnomer - there are now two types of components: \"server\" and \"isomorphic\"\n\nRSCs dont ship JS\n\n\"so each time you need to put something in database or validate, fetch on the backend, backed will need to render that thing and send it back to you?\"\n=> you don't make the isomorphic parts of your app RSCs\n\nstreaming in RSCs - how does this fit into \"RSCs ship html\"?\nhttps://twitter.com/t6adev/status/1632968577132417029\n\n---\n\n# Ryan Stream Notes\n\n\"back to the monolith\"\nrails=>spa=>ssr=>back to the roots kinda\nserver components are the island architecture... with routing, data loading, state preservation, etc\ntwo sides: dx, perf/ux\n\nrich harris talk https://www.youtube.com/watch?v=860d8usGC0o\n\n- no js: the experience of navigating and doing updates is... anchor tags (GET) and forms (POST and refresh)\n- SPAs... lots of benefits (fast nav, client side state, persistent elements, single codebase) but you lose that simplicity => lack of resilience, too much js, bad perf\n- MPAs are fast, resilient (no js), consistent/accessible, any tech stack BUT bad nav, just doesn't fit user expectations anymore\n- MPA with React components ... you're actually building two apps ... initial render php/rails, updates JS ... web is the only platform where writing a frontend in TWO languages was ever considered normal\n  - Hydration is a huge cost\n  - the only other option is making requests clientside => spinners and waterfalls\n- Server Components: \"like html over the wire, but vastly more sophisticated\"\n- other ideas: Marko-partial hydration, Qwik-aggressive lazy loading, Astro-island architecture, Svelte-compiler\n\n- SSR as we know it today in SPAs is still an SPA - first page is server rendered and hydrated, second page is client rendered\n\n- server components arent an optimization trick, they're an architecture => we'll get to understanding this later => need to understand the evolution first\n\nStages => data fetching IS the architecture\n\n1. Declarative app - fetch and set state\n2. Cache in a global store (use Redux)\n3. GraphQL (most optimal client side solution but dx for updating cache is rough)\n4. React Query (\"screw it, let's simplify the cache and just refetch aggressively - invalidate on mutation, done...\") => invalidating on mutation means TWO trips!! ... this is worse but nobody really cared\n5. Remix (invalidate whole route, ephemeral optimistic updates => dont need client side cache)\n   ---- up to now we've not made the JS payload smaller... you need all the code to hydrate the page\n   (tRPC is 4 with a bit of 6)\n6. Server functions + Server Components\n\n- when i go to twitter.com, i load the sidebar bundle, the tweets bundle, and the trending bar bundle. when i go to another page, which bundles do i need to get again? how do you split the js? what do you load initially, what do you load later?\n- people think RSC is a \"lakes\" mental model (opposite of islands)... can just make a request to the server and get html for some bits - BUT that would actually be a terrible idea\n- the \"how do we get new bits of the page\" problem is specific to declarative frameworks!\n\n  - marko (and wiz etc) solved this a decade ago... \"async fragments\"\n  - \"async fragments\" article... explains suspense 10 years ago https://tech.ebayinc.com/engineering/async-fragments-rediscovering-progressive-html-rendering-with-marko/\n\n- m rawlings \"maybe you don't need that spa\" https://medium.com/@mlrawlings/maybe-you-dont-need-that-spa-f2c659bc7fec\n\nRSC architecture ... it's islands (...but better?)\n\nRSC Rules:\n\n1. the root is on the server\n2. client components can't import server components\n3. Only Client Components can access Client Context\n\n- RSC has \"router\" component on the outside of the app, unlike Astro/Qwik\n\n- Client Components aren't actually Client Components... they run on both sides\n  - not rendering them on the server but leaving white, then rendering them in on the client would be BAD!\n\n\"lakes\" architecture comes from a client side mentality\n\n1. Client Root (false... sort of... all websites start on the server)\n2. Pass props to server proponent\n\nserver components at the leaves is not where the win is ... because of data serialization\nclient->server->client->server ... you don't know what possible data the client could send back to the server\n\n\"with RSC model, the only thing you need to serialize is props of client components\"\nbecause its all rendered on the server, you don't need to hydrate\n\nsharing state between two distant client components... you need context... connect all islands with the context api (providers can have SCs as children!)\nClient component props are the boundaries... the props need to be serializable\n\ndan server components diagram... the black is when they become html\nhttps://twitter.com/dan_abramov/status/1633574036767662080/\n\n1. turn the server components into html and keep the client components in place\n2. turn the client components into the remaining html ... either during ssr or later on the client\n\nWith islands: how do you find the anchor points to do replacement?\n=> rails had turbolinks\n\nthe solution to swapping out islands is \"nested routing\"... just leave the remainder of the page alone... ryan points out frameworks always come down to routing\nMPA: you don't want to render the whole new page on the server on each navigation... you're not gonna serialize all the client state back to the server to let it preserve that on the render (counter etc). so how do you do it?\nTHATS why you cant make new client components on the server... because the server doesn't know about context\nLoad vs Refresh ... these are different\n=> initially: render everything\n=> afterwards: only render server components\nhow do you share state on refetch?\n\nif you pass a promise from a SC to a CC, the SC will never know if the CC has a suspense boundary\n\nyou don't want to have to wait for the bundle before you can fetch! load data and code at the same time => this is why we hoisted it into loaders\nloaders get rid of waterfalls!\nbefore loaders pattern, ryan just made each route a hoc that fetches data and has the actual component as a lazy loaded child... this is kinda all a loader is\n\nserver components is similar (fetch all data at the top of the route) BUT \"what if we don't want the whole thing to be a client component?\"\n\n- fetch later: waterfall\n- await at top: block\n\nserver components basically replicate loader pattern\n\n- ryan's prediction: everyone will create server waterfalls for a year or two\n\npretty much all apps have in common that ideally you want to fetch the data as high up as possible\n\nQUESTION FOR RYAN: what if you don't want to fetch everything at once, but also you don't want to waterfall\n\n- example: twitter\n  - high priority: timeline\n  - low priority but still shouldn't waterfall: the user profile from the hover card\n\nthe problem with ryan's HOC lazy loading router: you're not rendering anything on the server. you're just getting props, serializing, and sending down the wire\n=> you've just created a json api. we've gone back to nested loaders\n\nhow will next do mutations?\n\n1. do the mutation\n   - REST or RPC (RPC wins)\n   - no correlation between url and action\n   - GraphQL made this obvious\n     - you design a tree on the query side... stuff is connected, nesting, you get what data you want => BUT on the mutations side it's just a bunch of flat mutations => GET is graph, POST is RPC\n   - React has added `use server`... separate fetching from mutation\n2. optimistic updates\n   - remix nailed it (but you don't need forms for this - forms make sense for the MPA mentality though)\n   - like solid start's actions\n   - push any mutation while in flight into ephemeral state\n   - How do you optimistic update the server part of the page? You can't... the answer:\n3. invalidation\n   - my theory:\n     - if the data only exists in client components, do key invalidation similar to r-q\n     - if the data also exists in server components: full page refresh\n   - 1. client sends mutation\n   - 2. Optimistic ephemeral state until response\n   - 3. Handle mutation + redirect/invalidate (on server)\n   - 4. Server render\n   - 5. Send the server rendered response back \"render this page\"\n\nIF YOU HAVE A LONG LIVED CACHE, YOU CAN SAVE MOST OF THE WORK OF RERENDERING THE PAGE\n\"oh, only this data changed, so we can use all this other stuff from last time\"\n\nSizes (ryan is making these up, to make a point)\nReact Preact\nLib Size 70kb 5kb\nCost of SCs 10kb 5kb\nIsland size 120kb 120kb\nTotal SC 200kb 130kb\nSPA Size 500kb 430kb\n\n- the less of your own code you ship (because SCs), the more of your bundle is the framework, so size difference in frameworks becomes more meaningful\n- BUT maybe RSCs is good enough so people won't care that other stuff is smaller\n\nan mpa with islands will still be a bit smaller than server components because of certain interactive points you dont care about in an mpa - because you know it will come back from the server\nBUT the difference is so much smaller than between MPA and \"SSR\"\n\nthis isn't just \"hey lets go back to forms that POST because we suddenly care about performance\"\nits everything we've learned about clientside caching, mutation, optimistic rendering, waterfall reduction, etc. is getting wrapped into the architecture itself to produce something thats a bit different - its not an SPA and not an MPA\n...and the routing is the foundational piece of defining what the architecture is - \"hybrid\"?\n\ncaching (my conjecture + ryans response)\n\n- no optimistic ui in RSCs\n- anything that can mutate just won't be an RSC\n- INP will be worse because its basically sending html as json that has to be diffed on the client\n- If each route transition has a budget of 200ms and you have to hit the server, render html as json, send it back to the client, then serialise it and diff the dom to insert it, it's not gonna go well.\n  => regardless of if its cached or not, the browser needs to do some work\n- if the cache ends up being server/cdn/etc then it might be a bit of work to ensure that there is no cache poisoning, leaking of data, etc\n  RYAN THINKS:\n- people are looking for edge caching\n- probably view level caching because we're basically looking to replace browser http cache\n- INP will be problem for client routing and for \"serving json and re-rendering the page, then diffing the vdom\"\n  => navigation is basically \"render (server) the part that changes, and innerHTML and hydrate the parts you need to\n\nthe years of fighting against js bundle size are over... you can still get yourself in trouble, but \"random guy builds blog site\" is good by default now, almost astro-like .. the base case is more performant and simpler\n\nthis is harder to adopt than hooks... because its an architecture change\n\nrsc is improving dx in cases where you're already optimizing for performance. and in other cases it doesn't matter\n\nthis model puts tanstack query and state libraries into question. their impact will drop.\n\nmutations again\n\n- it's basically the form reload mentality, but with caching\n- invalidation, optimistic update, server gives reload or redirect, client gets rendered html or jsx and diffs that\n- conceptually we're thinking in pages\n- ryan is thinking if server components should be .astro files because it makes even clearer what's going on\n\nlearning => a lot of the SPA concepts become stuff that you don't need to learn initially... state is chapter 5, not chapter 1\n\nthe adoption will be slow... it will take some public/blogged about wins until people realize the power - this also gives react team time to figure out the last couple of pieces\n\nMental model: Container componenents vs Presentation components => RSCs move container components to the server so you can pass server data as props to presentation components\n\nNew Chrome navigation APIs (page element moves on transition etc) will be a big part in making RSC even better","src/content/blog-draft/rsc.md","5d3260d9a9967a2e",{"html":840,"metadata":841},"\u003Cp>!!! this is my personal learning journey, so if you're expecting a fully formed well crafted simple explanation that clicks, then this will probably not be it. But I've done some deep dives in the last couple of weeks, so maybe there' something useful in here for you :)\u003C/p>\n\u003Cp>DAN TWEET ABOUT BLUE/GREEN\nhttps://twitter.com/dan_abramov/status/1633574036767662080/photo/1\nGSSP, Loaders, etc is one blue component with a bunch of green ones inside\nso if you SSR, you have to hydrate everything inside. with RSC you only have to hydrate the client bits\nconnect to red/blue functions https://journal.stuffwithstuff.com/2015/02/01/what-color-is-your-function/\u003C/p>\n\u003Cp>Ryan Carniato said \"client components\" is a misnomer - there are now two types of components: \"server\" and \"isomorphic\"\u003C/p>\n\u003Cp>RSCs dont ship JS\u003C/p>\n\u003Cp>\"so each time you need to put something in database or validate, fetch on the backend, backed will need to render that thing and send it back to you?\"\n=> you don't make the isomorphic parts of your app RSCs\u003C/p>\n\u003Cp>streaming in RSCs - how does this fit into \"RSCs ship html\"?\nhttps://twitter.com/t6adev/status/1632968577132417029\u003C/p>\n\u003Chr>\n\u003Ch1 id=\"ryan-stream-notes\">Ryan Stream Notes\u003C/h1>\n\u003Cp>\"back to the monolith\"\nrails=>spa=>ssr=>back to the roots kinda\nserver components are the island architecture... with routing, data loading, state preservation, etc\ntwo sides: dx, perf/ux\u003C/p>\n\u003Cp>rich harris talk https://www.youtube.com/watch?v=860d8usGC0o\u003C/p>\n\u003Cul>\n\u003Cli>\n\u003Cp>no js: the experience of navigating and doing updates is... anchor tags (GET) and forms (POST and refresh)\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>SPAs... lots of benefits (fast nav, client side state, persistent elements, single codebase) but you lose that simplicity => lack of resilience, too much js, bad perf\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>MPAs are fast, resilient (no js), consistent/accessible, any tech stack BUT bad nav, just doesn't fit user expectations anymore\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>MPA with React components ... you're actually building two apps ... initial render php/rails, updates JS ... web is the only platform where writing a frontend in TWO languages was ever considered normal\u003C/p>\n\u003Cul>\n\u003Cli>Hydration is a huge cost\u003C/li>\n\u003Cli>the only other option is making requests clientside => spinners and waterfalls\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>\n\u003Cp>Server Components: \"like html over the wire, but vastly more sophisticated\"\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>other ideas: Marko-partial hydration, Qwik-aggressive lazy loading, Astro-island architecture, Svelte-compiler\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>SSR as we know it today in SPAs is still an SPA - first page is server rendered and hydrated, second page is client rendered\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>server components arent an optimization trick, they're an architecture => we'll get to understanding this later => need to understand the evolution first\u003C/p>\n\u003C/li>\n\u003C/ul>\n\u003Cp>Stages => data fetching IS the architecture\u003C/p>\n\u003Col>\n\u003Cli>Declarative app - fetch and set state\u003C/li>\n\u003Cli>Cache in a global store (use Redux)\u003C/li>\n\u003Cli>GraphQL (most optimal client side solution but dx for updating cache is rough)\u003C/li>\n\u003Cli>React Query (\"screw it, let's simplify the cache and just refetch aggressively - invalidate on mutation, done...\") => invalidating on mutation means TWO trips!! ... this is worse but nobody really cared\u003C/li>\n\u003Cli>Remix (invalidate whole route, ephemeral optimistic updates => dont need client side cache)\n---- up to now we've not made the JS payload smaller... you need all the code to hydrate the page\n(tRPC is 4 with a bit of 6)\u003C/li>\n\u003Cli>Server functions + Server Components\u003C/li>\n\u003C/ol>\n\u003Cul>\n\u003Cli>\n\u003Cp>when i go to twitter.com, i load the sidebar bundle, the tweets bundle, and the trending bar bundle. when i go to another page, which bundles do i need to get again? how do you split the js? what do you load initially, what do you load later?\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>people think RSC is a \"lakes\" mental model (opposite of islands)... can just make a request to the server and get html for some bits - BUT that would actually be a terrible idea\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>the \"how do we get new bits of the page\" problem is specific to declarative frameworks!\u003C/p>\n\u003Cul>\n\u003Cli>marko (and wiz etc) solved this a decade ago... \"async fragments\"\u003C/li>\n\u003Cli>\"async fragments\" article... explains suspense 10 years ago https://tech.ebayinc.com/engineering/async-fragments-rediscovering-progressive-html-rendering-with-marko/\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>\n\u003Cp>m rawlings \"maybe you don't need that spa\" https://medium.com/@mlrawlings/maybe-you-dont-need-that-spa-f2c659bc7fec\u003C/p>\n\u003C/li>\n\u003C/ul>\n\u003Cp>RSC architecture ... it's islands (...but better?)\u003C/p>\n\u003Cp>RSC Rules:\u003C/p>\n\u003Col>\n\u003Cli>the root is on the server\u003C/li>\n\u003Cli>client components can't import server components\u003C/li>\n\u003Cli>Only Client Components can access Client Context\u003C/li>\n\u003C/ol>\n\u003Cul>\n\u003Cli>\n\u003Cp>RSC has \"router\" component on the outside of the app, unlike Astro/Qwik\u003C/p>\n\u003C/li>\n\u003Cli>\n\u003Cp>Client Components aren't actually Client Components... they run on both sides\u003C/p>\n\u003Cul>\n\u003Cli>not rendering them on the server but leaving white, then rendering them in on the client would be BAD!\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003C/ul>\n\u003Cp>\"lakes\" architecture comes from a client side mentality\u003C/p>\n\u003Col>\n\u003Cli>Client Root (false... sort of... all websites start on the server)\u003C/li>\n\u003Cli>Pass props to server proponent\u003C/li>\n\u003C/ol>\n\u003Cp>server components at the leaves is not where the win is ... because of data serialization\nclient->server->client->server ... you don't know what possible data the client could send back to the server\u003C/p>\n\u003Cp>\"with RSC model, the only thing you need to serialize is props of client components\"\nbecause its all rendered on the server, you don't need to hydrate\u003C/p>\n\u003Cp>sharing state between two distant client components... you need context... connect all islands with the context api (providers can have SCs as children!)\nClient component props are the boundaries... the props need to be serializable\u003C/p>\n\u003Cp>dan server components diagram... the black is when they become html\nhttps://twitter.com/dan_abramov/status/1633574036767662080/\u003C/p>\n\u003Col>\n\u003Cli>turn the server components into html and keep the client components in place\u003C/li>\n\u003Cli>turn the client components into the remaining html ... either during ssr or later on the client\u003C/li>\n\u003C/ol>\n\u003Cp>With islands: how do you find the anchor points to do replacement?\n=> rails had turbolinks\u003C/p>\n\u003Cp>the solution to swapping out islands is \"nested routing\"... just leave the remainder of the page alone... ryan points out frameworks always come down to routing\nMPA: you don't want to render the whole new page on the server on each navigation... you're not gonna serialize all the client state back to the server to let it preserve that on the render (counter etc). so how do you do it?\nTHATS why you cant make new client components on the server... because the server doesn't know about context\nLoad vs Refresh ... these are different\n=> initially: render everything\n=> afterwards: only render server components\nhow do you share state on refetch?\u003C/p>\n\u003Cp>if you pass a promise from a SC to a CC, the SC will never know if the CC has a suspense boundary\u003C/p>\n\u003Cp>you don't want to have to wait for the bundle before you can fetch! load data and code at the same time => this is why we hoisted it into loaders\nloaders get rid of waterfalls!\nbefore loaders pattern, ryan just made each route a hoc that fetches data and has the actual component as a lazy loaded child... this is kinda all a loader is\u003C/p>\n\u003Cp>server components is similar (fetch all data at the top of the route) BUT \"what if we don't want the whole thing to be a client component?\"\u003C/p>\n\u003Cul>\n\u003Cli>fetch later: waterfall\u003C/li>\n\u003Cli>await at top: block\u003C/li>\n\u003C/ul>\n\u003Cp>server components basically replicate loader pattern\u003C/p>\n\u003Cul>\n\u003Cli>ryan's prediction: everyone will create server waterfalls for a year or two\u003C/li>\n\u003C/ul>\n\u003Cp>pretty much all apps have in common that ideally you want to fetch the data as high up as possible\u003C/p>\n\u003Cp>QUESTION FOR RYAN: what if you don't want to fetch everything at once, but also you don't want to waterfall\u003C/p>\n\u003Cul>\n\u003Cli>example: twitter\n\u003Cul>\n\u003Cli>high priority: timeline\u003C/li>\n\u003Cli>low priority but still shouldn't waterfall: the user profile from the hover card\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003C/ul>\n\u003Cp>the problem with ryan's HOC lazy loading router: you're not rendering anything on the server. you're just getting props, serializing, and sending down the wire\n=> you've just created a json api. we've gone back to nested loaders\u003C/p>\n\u003Cp>how will next do mutations?\u003C/p>\n\u003Col>\n\u003Cli>do the mutation\n\u003Cul>\n\u003Cli>REST or RPC (RPC wins)\u003C/li>\n\u003Cli>no correlation between url and action\u003C/li>\n\u003Cli>GraphQL made this obvious\n\u003Cul>\n\u003Cli>you design a tree on the query side... stuff is connected, nesting, you get what data you want => BUT on the mutations side it's just a bunch of flat mutations => GET is graph, POST is RPC\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>React has added \u003Ccode>use server\u003C/code>... separate fetching from mutation\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>optimistic updates\n\u003Cul>\n\u003Cli>remix nailed it (but you don't need forms for this - forms make sense for the MPA mentality though)\u003C/li>\n\u003Cli>like solid start's actions\u003C/li>\n\u003Cli>push any mutation while in flight into ephemeral state\u003C/li>\n\u003Cli>How do you optimistic update the server part of the page? You can't... the answer:\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>invalidation\n\u003Cul>\n\u003Cli>my theory:\n\u003Cul>\n\u003Cli>if the data only exists in client components, do key invalidation similar to r-q\u003C/li>\n\u003Cli>if the data also exists in server components: full page refresh\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003Cli>\n\u003Col>\n\u003Cli>client sends mutation\u003C/li>\n\u003C/ol>\n\u003C/li>\n\u003Cli>\n\u003Col start=\"2\">\n\u003Cli>Optimistic ephemeral state until response\u003C/li>\n\u003C/ol>\n\u003C/li>\n\u003Cli>\n\u003Col start=\"3\">\n\u003Cli>Handle mutation + redirect/invalidate (on server)\u003C/li>\n\u003C/ol>\n\u003C/li>\n\u003Cli>\n\u003Col start=\"4\">\n\u003Cli>Server render\u003C/li>\n\u003C/ol>\n\u003C/li>\n\u003Cli>\n\u003Col start=\"5\">\n\u003Cli>Send the server rendered response back \"render this page\"\u003C/li>\n\u003C/ol>\n\u003C/li>\n\u003C/ul>\n\u003C/li>\n\u003C/ol>\n\u003Cp>IF YOU HAVE A LONG LIVED CACHE, YOU CAN SAVE MOST OF THE WORK OF RERENDERING THE PAGE\n\"oh, only this data changed, so we can use all this other stuff from last time\"\u003C/p>\n\u003Cp>Sizes (ryan is making these up, to make a point)\nReact Preact\nLib Size 70kb 5kb\nCost of SCs 10kb 5kb\nIsland size 120kb 120kb\nTotal SC 200kb 130kb\nSPA Size 500kb 430kb\u003C/p>\n\u003Cul>\n\u003Cli>the less of your own code you ship (because SCs), the more of your bundle is the framework, so size difference in frameworks becomes more meaningful\u003C/li>\n\u003Cli>BUT maybe RSCs is good enough so people won't care that other stuff is smaller\u003C/li>\n\u003C/ul>\n\u003Cp>an mpa with islands will still be a bit smaller than server components because of certain interactive points you dont care about in an mpa - because you know it will come back from the server\nBUT the difference is so much smaller than between MPA and \"SSR\"\u003C/p>\n\u003Cp>this isn't just \"hey lets go back to forms that POST because we suddenly care about performance\"\nits everything we've learned about clientside caching, mutation, optimistic rendering, waterfall reduction, etc. is getting wrapped into the architecture itself to produce something thats a bit different - its not an SPA and not an MPA\n...and the routing is the foundational piece of defining what the architecture is - \"hybrid\"?\u003C/p>\n\u003Cp>caching (my conjecture + ryans response)\u003C/p>\n\u003Cul>\n\u003Cli>no optimistic ui in RSCs\u003C/li>\n\u003Cli>anything that can mutate just won't be an RSC\u003C/li>\n\u003Cli>INP will be worse because its basically sending html as json that has to be diffed on the client\u003C/li>\n\u003Cli>If each route transition has a budget of 200ms and you have to hit the server, render html as json, send it back to the client, then serialise it and diff the dom to insert it, it's not gonna go well.\n=> regardless of if its cached or not, the browser needs to do some work\u003C/li>\n\u003Cli>if the cache ends up being server/cdn/etc then it might be a bit of work to ensure that there is no cache poisoning, leaking of data, etc\nRYAN THINKS:\u003C/li>\n\u003Cli>people are looking for edge caching\u003C/li>\n\u003Cli>probably view level caching because we're basically looking to replace browser http cache\u003C/li>\n\u003Cli>INP will be problem for client routing and for \"serving json and re-rendering the page, then diffing the vdom\"\n=> navigation is basically \"render (server) the part that changes, and innerHTML and hydrate the parts you need to\u003C/li>\n\u003C/ul>\n\u003Cp>the years of fighting against js bundle size are over... you can still get yourself in trouble, but \"random guy builds blog site\" is good by default now, almost astro-like .. the base case is more performant and simpler\u003C/p>\n\u003Cp>this is harder to adopt than hooks... because its an architecture change\u003C/p>\n\u003Cp>rsc is improving dx in cases where you're already optimizing for performance. and in other cases it doesn't matter\u003C/p>\n\u003Cp>this model puts tanstack query and state libraries into question. their impact will drop.\u003C/p>\n\u003Cp>mutations again\u003C/p>\n\u003Cul>\n\u003Cli>it's basically the form reload mentality, but with caching\u003C/li>\n\u003Cli>invalidation, optimistic update, server gives reload or redirect, client gets rendered html or jsx and diffs that\u003C/li>\n\u003Cli>conceptually we're thinking in pages\u003C/li>\n\u003Cli>ryan is thinking if server components should be .astro files because it makes even clearer what's going on\u003C/li>\n\u003C/ul>\n\u003Cp>learning => a lot of the SPA concepts become stuff that you don't need to learn initially... state is chapter 5, not chapter 1\u003C/p>\n\u003Cp>the adoption will be slow... it will take some public/blogged about wins until people realize the power - this also gives react team time to figure out the last couple of pieces\u003C/p>\n\u003Cp>Mental model: Container componenents vs Presentation components => RSCs move container components to the server so you can pass server data as props to presentation components\u003C/p>\n\u003Cp>New Chrome navigation APIs (page element moves on transition etc) will be a big part in making RSC even better\u003C/p>",{"headings":842,"localImagePaths":847,"remoteImagePaths":848,"frontmatter":849,"imagePaths":850},[843],{"depth":844,"slug":845,"text":846},1,"ryan-stream-notes","Ryan Stream Notes",[],[],{},[]]